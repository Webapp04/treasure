{"ast":null,"code":"import _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { sha256 } from 'multiformats/hashes/sha2';\nimport { msgId } from '@libp2p/pubsub/utils';\n/**\n * Generate a message id, based on the `key` and `seqno`\n */\nexport function msgIdFnStrictSign(msg) {\n  if (msg.type !== 'signed') {\n    throw new Error('expected signed message type');\n  }\n  // Should never happen\n  if (msg.sequenceNumber == null) throw Error('missing seqno field');\n  // TODO: Should use .from here or key?\n  return msgId(msg.from.toBytes(), msg.sequenceNumber);\n}\n/**\n * Generate a message id, based on message `data`\n */\nexport function msgIdFnStrictNoSign(_x) {\n  return _msgIdFnStrictNoSign.apply(this, arguments);\n}\nfunction _msgIdFnStrictNoSign() {\n  _msgIdFnStrictNoSign = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(msg) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return sha256.encode(msg.data);\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _msgIdFnStrictNoSign.apply(this, arguments);\n}","map":{"version":3,"names":["sha256","msgId","msgIdFnStrictSign","msg","type","Error","sequenceNumber","from","toBytes","msgIdFnStrictNoSign","_x","_msgIdFnStrictNoSign","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","encode","data","abrupt","sent","stop"],"sources":["../../../src/utils/msgIdFn.ts"],"sourcesContent":[null],"mappings":";;AAAA,SAASA,MAAM,QAAQ,0BAA0B;AAEjD,SAASC,KAAK,QAAQ,sBAAsB;AAE5C;;;AAGA,OAAM,SAAUC,iBAAiBA,CAACC,GAAY;EAC5C,IAAIA,GAAG,CAACC,IAAI,KAAK,QAAQ,EAAE;IACzB,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;;EAEjD;EACA,IAAIF,GAAG,CAACG,cAAc,IAAI,IAAI,EAAE,MAAMD,KAAK,CAAC,qBAAqB,CAAC;EAElE;EACA,OAAOJ,KAAK,CAACE,GAAG,CAACI,IAAI,CAACC,OAAO,EAAE,EAAEL,GAAG,CAACG,cAAc,CAAC;AACtD;AAEA;;;AAGA,gBAAsBG,mBAAmBA,CAAAC,EAAA;EAAA,OAAAC,oBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAExC,SAAAF,qBAAA;EAAAA,oBAAA,GAAAG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAFM,SAAAC,QAAmCd,GAAY;IAAA,OAAAY,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OACvCtB,MAAM,CAACuB,MAAM,CAACpB,GAAG,CAACqB,IAAI,CAAC;QAAA;UAAA,OAAAJ,QAAA,CAAAK,MAAA,WAAAL,QAAA,CAAAM,IAAA;QAAA;QAAA;UAAA,OAAAN,QAAA,CAAAO,IAAA;MAAA;IAAA,GAAAV,OAAA;EAAA,CACrC;EAAA,OAAAN,oBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}