{"ast":null,"code":"/* global indexedDB */\n\n'use strict';\n\nvar _objectWithoutProperties = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/objectWithoutProperties.js\").default;\nvar _classCallCheck = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _excluded = [\"prefix\", \"version\"];\nvar _require = require('abstract-level'),\n  AbstractLevel = _require.AbstractLevel;\nvar ModuleError = require('module-error');\nvar parallel = require('run-parallel-limit');\nvar _require2 = require('catering'),\n  fromCallback = _require2.fromCallback;\nvar _require3 = require('./iterator'),\n  Iterator = _require3.Iterator;\nvar deserialize = require('./util/deserialize');\nvar clear = require('./util/clear');\nvar createKeyRange = require('./util/key-range');\n\n// Keep as-is for compatibility with existing level-js databases\nvar DEFAULT_PREFIX = 'level-js-';\nvar kIDB = Symbol('idb');\nvar kNamePrefix = Symbol('namePrefix');\nvar kLocation = Symbol('location');\nvar kVersion = Symbol('version');\nvar kStore = Symbol('store');\nvar kOnComplete = Symbol('onComplete');\nvar kPromise = Symbol('promise');\nvar BrowserLevel = /*#__PURE__*/function (_AbstractLevel) {\n  _inherits(BrowserLevel, _AbstractLevel);\n  var _super = _createSuper(BrowserLevel);\n  function BrowserLevel(location, options, _) {\n    var _this;\n    _classCallCheck(this, BrowserLevel);\n    // To help migrating to abstract-level\n    if (typeof options === 'function' || typeof _ === 'function') {\n      throw new ModuleError('The levelup-style callback argument has been removed', {\n        code: 'LEVEL_LEGACY'\n      });\n    }\n    var _ref = options || {},\n      prefix = _ref.prefix,\n      version = _ref.version,\n      forward = _objectWithoutProperties(_ref, _excluded);\n    _this = _super.call(this, {\n      encodings: {\n        view: true\n      },\n      snapshots: false,\n      createIfMissing: false,\n      errorIfExists: false,\n      seek: true\n    }, forward);\n    if (typeof location !== 'string') {\n      throw new Error('constructor requires a location string argument');\n    }\n\n    // TODO (next major): remove default prefix\n    _this[kLocation] = location;\n    _this[kNamePrefix] = prefix == null ? DEFAULT_PREFIX : prefix;\n    _this[kVersion] = parseInt(version || 1, 10);\n    _this[kIDB] = null;\n    return _this;\n  }\n  _createClass(BrowserLevel, [{\n    key: \"location\",\n    get: function get() {\n      return this[kLocation];\n    }\n  }, {\n    key: \"namePrefix\",\n    get: function get() {\n      return this[kNamePrefix];\n    }\n  }, {\n    key: \"version\",\n    get: function get() {\n      return this[kVersion];\n    }\n\n    // Exposed for backwards compat and unit tests\n  }, {\n    key: \"db\",\n    get: function get() {\n      return this[kIDB];\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return 'browser-level';\n    }\n  }, {\n    key: \"_open\",\n    value: function _open(options, callback) {\n      var _this2 = this;\n      var req = indexedDB.open(this[kNamePrefix] + this[kLocation], this[kVersion]);\n      req.onerror = function () {\n        callback(req.error || new Error('unknown error'));\n      };\n      req.onsuccess = function () {\n        _this2[kIDB] = req.result;\n        callback();\n      };\n      req.onupgradeneeded = function (ev) {\n        var db = ev.target.result;\n        if (!db.objectStoreNames.contains(_this2[kLocation])) {\n          db.createObjectStore(_this2[kLocation]);\n        }\n      };\n    }\n  }, {\n    key: kStore,\n    value: function value(mode) {\n      var transaction = this[kIDB].transaction([this[kLocation]], mode);\n      return transaction.objectStore(this[kLocation]);\n    }\n  }, {\n    key: kOnComplete,\n    value: function value(request, callback) {\n      var transaction = request.transaction;\n\n      // Take advantage of the fact that a non-canceled request error aborts\n      // the transaction. I.e. no need to listen for \"request.onerror\".\n      transaction.onabort = function () {\n        callback(transaction.error || new Error('aborted by user'));\n      };\n      transaction.oncomplete = function () {\n        callback(null, request.result);\n      };\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(key, options, callback) {\n      var store = this[kStore]('readonly');\n      var req;\n      try {\n        req = store.get(key);\n      } catch (err) {\n        return this.nextTick(callback, err);\n      }\n      this[kOnComplete](req, function (err, value) {\n        if (err) return callback(err);\n        if (value === undefined) {\n          return callback(new ModuleError('Entry not found', {\n            code: 'LEVEL_NOT_FOUND'\n          }));\n        }\n        callback(null, deserialize(value));\n      });\n    }\n  }, {\n    key: \"_getMany\",\n    value: function _getMany(keys, options, callback) {\n      var store = this[kStore]('readonly');\n      var tasks = keys.map(function (key) {\n        return function (next) {\n          var request;\n          try {\n            request = store.get(key);\n          } catch (err) {\n            return next(err);\n          }\n          request.onsuccess = function () {\n            var value = request.result;\n            next(null, value === undefined ? value : deserialize(value));\n          };\n          request.onerror = function (ev) {\n            ev.stopPropagation();\n            next(request.error);\n          };\n        };\n      });\n      parallel(tasks, 16, callback);\n    }\n  }, {\n    key: \"_del\",\n    value: function _del(key, options, callback) {\n      var store = this[kStore]('readwrite');\n      var req;\n      try {\n        req = store.delete(key);\n      } catch (err) {\n        return this.nextTick(callback, err);\n      }\n      this[kOnComplete](req, callback);\n    }\n  }, {\n    key: \"_put\",\n    value: function _put(key, value, options, callback) {\n      var store = this[kStore]('readwrite');\n      var req;\n      try {\n        // Will throw a DataError or DataCloneError if the environment\n        // does not support serializing the key or value respectively.\n        req = store.put(value, key);\n      } catch (err) {\n        return this.nextTick(callback, err);\n      }\n      this[kOnComplete](req, callback);\n    }\n\n    // TODO: implement key and value iterators\n  }, {\n    key: \"_iterator\",\n    value: function _iterator(options) {\n      return new Iterator(this, this[kLocation], options);\n    }\n  }, {\n    key: \"_batch\",\n    value: function _batch(operations, options, callback) {\n      var store = this[kStore]('readwrite');\n      var transaction = store.transaction;\n      var index = 0;\n      var error;\n      transaction.onabort = function () {\n        callback(error || transaction.error || new Error('aborted by user'));\n      };\n      transaction.oncomplete = function () {\n        callback();\n      };\n\n      // Wait for a request to complete before making the next, saving CPU.\n      function loop() {\n        var op = operations[index++];\n        var key = op.key;\n        var req;\n        try {\n          req = op.type === 'del' ? store.delete(key) : store.put(op.value, key);\n        } catch (err) {\n          error = err;\n          transaction.abort();\n          return;\n        }\n        if (index < operations.length) {\n          req.onsuccess = loop;\n        } else if (typeof transaction.commit === 'function') {\n          // Commit now instead of waiting for auto-commit\n          transaction.commit();\n        }\n      }\n      loop();\n    }\n  }, {\n    key: \"_clear\",\n    value: function _clear(options, callback) {\n      var keyRange;\n      var req;\n      try {\n        keyRange = createKeyRange(options);\n      } catch (e) {\n        // The lower key is greater than the upper key.\n        // IndexedDB throws an error, but we'll just do nothing.\n        return this.nextTick(callback);\n      }\n      if (options.limit >= 0) {\n        // IDBObjectStore#delete(range) doesn't have such an option.\n        // Fall back to cursor-based implementation.\n        return clear(this, this[kLocation], keyRange, options, callback);\n      }\n      try {\n        var store = this[kStore]('readwrite');\n        req = keyRange ? store.delete(keyRange) : store.clear();\n      } catch (err) {\n        return this.nextTick(callback, err);\n      }\n      this[kOnComplete](req, callback);\n    }\n  }, {\n    key: \"_close\",\n    value: function _close(callback) {\n      this[kIDB].close();\n      this.nextTick(callback);\n    }\n  }]);\n  return BrowserLevel;\n}(AbstractLevel);\nBrowserLevel.destroy = function (location, prefix, callback) {\n  if (typeof prefix === 'function') {\n    callback = prefix;\n    prefix = DEFAULT_PREFIX;\n  }\n  callback = fromCallback(callback, kPromise);\n  var request = indexedDB.deleteDatabase(prefix + location);\n  request.onsuccess = function () {\n    callback();\n  };\n  request.onerror = function (err) {\n    callback(err);\n  };\n  return callback[kPromise];\n};\nexports.BrowserLevel = BrowserLevel;","map":{"version":3,"names":["_objectWithoutProperties","require","default","_classCallCheck","_createClass","_inherits","_createSuper","_excluded","_require","AbstractLevel","ModuleError","parallel","_require2","fromCallback","_require3","Iterator","deserialize","clear","createKeyRange","DEFAULT_PREFIX","kIDB","Symbol","kNamePrefix","kLocation","kVersion","kStore","kOnComplete","kPromise","BrowserLevel","_AbstractLevel","_super","location","options","_","_this","code","_ref","prefix","version","forward","call","encodings","view","snapshots","createIfMissing","errorIfExists","seek","Error","parseInt","key","get","value","_open","callback","_this2","req","indexedDB","open","onerror","error","onsuccess","result","onupgradeneeded","ev","db","target","objectStoreNames","contains","createObjectStore","mode","transaction","objectStore","request","onabort","oncomplete","_get","store","err","nextTick","undefined","_getMany","keys","tasks","map","next","stopPropagation","_del","delete","_put","put","_iterator","_batch","operations","index","loop","op","type","abort","length","commit","_clear","keyRange","e","limit","_close","close","destroy","deleteDatabase","exports"],"sources":["/Users/apple/Documents/treasure/node_modules/browser-level/index.js"],"sourcesContent":["/* global indexedDB */\n\n'use strict'\n\nconst { AbstractLevel } = require('abstract-level')\nconst ModuleError = require('module-error')\nconst parallel = require('run-parallel-limit')\nconst { fromCallback } = require('catering')\nconst { Iterator } = require('./iterator')\nconst deserialize = require('./util/deserialize')\nconst clear = require('./util/clear')\nconst createKeyRange = require('./util/key-range')\n\n// Keep as-is for compatibility with existing level-js databases\nconst DEFAULT_PREFIX = 'level-js-'\n\nconst kIDB = Symbol('idb')\nconst kNamePrefix = Symbol('namePrefix')\nconst kLocation = Symbol('location')\nconst kVersion = Symbol('version')\nconst kStore = Symbol('store')\nconst kOnComplete = Symbol('onComplete')\nconst kPromise = Symbol('promise')\n\nclass BrowserLevel extends AbstractLevel {\n  constructor (location, options, _) {\n    // To help migrating to abstract-level\n    if (typeof options === 'function' || typeof _ === 'function') {\n      throw new ModuleError('The levelup-style callback argument has been removed', {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    const { prefix, version, ...forward } = options || {}\n\n    super({\n      encodings: { view: true },\n      snapshots: false,\n      createIfMissing: false,\n      errorIfExists: false,\n      seek: true\n    }, forward)\n\n    if (typeof location !== 'string') {\n      throw new Error('constructor requires a location string argument')\n    }\n\n    // TODO (next major): remove default prefix\n    this[kLocation] = location\n    this[kNamePrefix] = prefix == null ? DEFAULT_PREFIX : prefix\n    this[kVersion] = parseInt(version || 1, 10)\n    this[kIDB] = null\n  }\n\n  get location () {\n    return this[kLocation]\n  }\n\n  get namePrefix () {\n    return this[kNamePrefix]\n  }\n\n  get version () {\n    return this[kVersion]\n  }\n\n  // Exposed for backwards compat and unit tests\n  get db () {\n    return this[kIDB]\n  }\n\n  get type () {\n    return 'browser-level'\n  }\n\n  _open (options, callback) {\n    const req = indexedDB.open(this[kNamePrefix] + this[kLocation], this[kVersion])\n\n    req.onerror = function () {\n      callback(req.error || new Error('unknown error'))\n    }\n\n    req.onsuccess = () => {\n      this[kIDB] = req.result\n      callback()\n    }\n\n    req.onupgradeneeded = (ev) => {\n      const db = ev.target.result\n\n      if (!db.objectStoreNames.contains(this[kLocation])) {\n        db.createObjectStore(this[kLocation])\n      }\n    }\n  }\n\n  [kStore] (mode) {\n    const transaction = this[kIDB].transaction([this[kLocation]], mode)\n    return transaction.objectStore(this[kLocation])\n  }\n\n  [kOnComplete] (request, callback) {\n    const transaction = request.transaction\n\n    // Take advantage of the fact that a non-canceled request error aborts\n    // the transaction. I.e. no need to listen for \"request.onerror\".\n    transaction.onabort = function () {\n      callback(transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback(null, request.result)\n    }\n  }\n\n  _get (key, options, callback) {\n    const store = this[kStore]('readonly')\n    let req\n\n    try {\n      req = store.get(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, function (err, value) {\n      if (err) return callback(err)\n\n      if (value === undefined) {\n        return callback(new ModuleError('Entry not found', {\n          code: 'LEVEL_NOT_FOUND'\n        }))\n      }\n\n      callback(null, deserialize(value))\n    })\n  }\n\n  _getMany (keys, options, callback) {\n    const store = this[kStore]('readonly')\n    const tasks = keys.map((key) => (next) => {\n      let request\n\n      try {\n        request = store.get(key)\n      } catch (err) {\n        return next(err)\n      }\n\n      request.onsuccess = () => {\n        const value = request.result\n        next(null, value === undefined ? value : deserialize(value))\n      }\n\n      request.onerror = (ev) => {\n        ev.stopPropagation()\n        next(request.error)\n      }\n    })\n\n    parallel(tasks, 16, callback)\n  }\n\n  _del (key, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      req = store.delete(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _put (key, value, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      // Will throw a DataError or DataCloneError if the environment\n      // does not support serializing the key or value respectively.\n      req = store.put(value, key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  // TODO: implement key and value iterators\n  _iterator (options) {\n    return new Iterator(this, this[kLocation], options)\n  }\n\n  _batch (operations, options, callback) {\n    const store = this[kStore]('readwrite')\n    const transaction = store.transaction\n    let index = 0\n    let error\n\n    transaction.onabort = function () {\n      callback(error || transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback()\n    }\n\n    // Wait for a request to complete before making the next, saving CPU.\n    function loop () {\n      const op = operations[index++]\n      const key = op.key\n\n      let req\n\n      try {\n        req = op.type === 'del' ? store.delete(key) : store.put(op.value, key)\n      } catch (err) {\n        error = err\n        transaction.abort()\n        return\n      }\n\n      if (index < operations.length) {\n        req.onsuccess = loop\n      } else if (typeof transaction.commit === 'function') {\n        // Commit now instead of waiting for auto-commit\n        transaction.commit()\n      }\n    }\n\n    loop()\n  }\n\n  _clear (options, callback) {\n    let keyRange\n    let req\n\n    try {\n      keyRange = createKeyRange(options)\n    } catch (e) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just do nothing.\n      return this.nextTick(callback)\n    }\n\n    if (options.limit >= 0) {\n      // IDBObjectStore#delete(range) doesn't have such an option.\n      // Fall back to cursor-based implementation.\n      return clear(this, this[kLocation], keyRange, options, callback)\n    }\n\n    try {\n      const store = this[kStore]('readwrite')\n      req = keyRange ? store.delete(keyRange) : store.clear()\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _close (callback) {\n    this[kIDB].close()\n    this.nextTick(callback)\n  }\n}\n\nBrowserLevel.destroy = function (location, prefix, callback) {\n  if (typeof prefix === 'function') {\n    callback = prefix\n    prefix = DEFAULT_PREFIX\n  }\n\n  callback = fromCallback(callback, kPromise)\n  const request = indexedDB.deleteDatabase(prefix + location)\n\n  request.onsuccess = function () {\n    callback()\n  }\n\n  request.onerror = function (err) {\n    callback(err)\n  }\n\n  return callback[kPromise]\n}\n\nexports.BrowserLevel = BrowserLevel\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}