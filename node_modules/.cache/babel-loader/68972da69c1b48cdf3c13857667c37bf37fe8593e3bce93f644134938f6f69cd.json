{"ast":null,"code":"import _objectSpread from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { ERR_INVALID_PEER_SCORE_THRESHOLDS } from './constants.js';\nimport errcode from 'err-code';\nexport var defaultPeerScoreThresholds = {\n  gossipThreshold: -10,\n  publishThreshold: -50,\n  graylistThreshold: -80,\n  acceptPXThreshold: 10,\n  opportunisticGraftThreshold: 20\n};\nexport function createPeerScoreThresholds() {\n  var p = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return _objectSpread(_objectSpread({}, defaultPeerScoreThresholds), p);\n}\nexport function validatePeerScoreThresholds(p) {\n  if (p.gossipThreshold > 0) {\n    throw errcode(new Error('invalid gossip threshold; it must be <= 0'), ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.publishThreshold > 0 || p.publishThreshold > p.gossipThreshold) {\n    throw errcode(new Error('invalid publish threshold; it must be <= 0 and <= gossip threshold'), ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.graylistThreshold > 0 || p.graylistThreshold > p.publishThreshold) {\n    throw errcode(new Error('invalid graylist threshold; it must be <= 0 and <= publish threshold'), ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.acceptPXThreshold < 0) {\n    throw errcode(new Error('invalid accept PX threshold; it must be >= 0'), ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.opportunisticGraftThreshold < 0) {\n    throw errcode(new Error('invalid opportunistic grafting threshold; it must be >= 0'), ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n}","map":{"version":3,"names":["ERR_INVALID_PEER_SCORE_THRESHOLDS","errcode","defaultPeerScoreThresholds","gossipThreshold","publishThreshold","graylistThreshold","acceptPXThreshold","opportunisticGraftThreshold","createPeerScoreThresholds","p","arguments","length","undefined","_objectSpread","validatePeerScoreThresholds","Error"],"sources":["../../../src/score/peer-score-thresholds.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,iCAAiC,QAAQ,gBAAgB;AAClE,OAAOC,OAAO,MAAM,UAAU;AAsC9B,OAAO,IAAMC,0BAA0B,GAAwB;EAC7DC,eAAe,EAAE,CAAC,EAAE;EACpBC,gBAAgB,EAAE,CAAC,EAAE;EACrBC,iBAAiB,EAAE,CAAC,EAAE;EACtBC,iBAAiB,EAAE,EAAE;EACrBC,2BAA2B,EAAE;CAC9B;AAED,OAAM,SAAUC,yBAAyBA,CAAA,EAAqC;EAAA,IAApCC,CAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAkC,EAAE;EAC5E,OAAAG,aAAA,CAAAA,aAAA,KACKX,0BAA0B,GAC1BO,CAAC;AAER;AAEA,OAAM,SAAUK,2BAA2BA,CAACL,CAAsB;EAChE,IAAIA,CAAC,CAACN,eAAe,GAAG,CAAC,EAAE;IACzB,MAAMF,OAAO,CAAC,IAAIc,KAAK,CAAC,2CAA2C,CAAC,EAAEf,iCAAiC,CAAC;;EAE1G,IAAIS,CAAC,CAACL,gBAAgB,GAAG,CAAC,IAAIK,CAAC,CAACL,gBAAgB,GAAGK,CAAC,CAACN,eAAe,EAAE;IACpE,MAAMF,OAAO,CACX,IAAIc,KAAK,CAAC,oEAAoE,CAAC,EAC/Ef,iCAAiC,CAClC;;EAEH,IAAIS,CAAC,CAACJ,iBAAiB,GAAG,CAAC,IAAII,CAAC,CAACJ,iBAAiB,GAAGI,CAAC,CAACL,gBAAgB,EAAE;IACvE,MAAMH,OAAO,CACX,IAAIc,KAAK,CAAC,sEAAsE,CAAC,EACjFf,iCAAiC,CAClC;;EAEH,IAAIS,CAAC,CAACH,iBAAiB,GAAG,CAAC,EAAE;IAC3B,MAAML,OAAO,CAAC,IAAIc,KAAK,CAAC,8CAA8C,CAAC,EAAEf,iCAAiC,CAAC;;EAE7G,IAAIS,CAAC,CAACF,2BAA2B,GAAG,CAAC,EAAE;IACrC,MAAMN,OAAO,CACX,IAAIc,KAAK,CAAC,2DAA2D,CAAC,EACtEf,iCAAiC,CAClC;;AAEL"},"metadata":{},"sourceType":"module","externalDependencies":[]}