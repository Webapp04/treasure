{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContractDailyBonusRewards}from\"hooks/blockchain/useHandleContracts\";import{useSelector}from\"react-redux\";import{selectNftList}from\"redux/slice/nftSlice\";import{selectUser}from\"redux/slice/userSlice\";import{hexToNumber}from\"utils/blockchain\";export default function useGetPendingTotalRewards(){var nftLists=useSelector(selectNftList);var user=useSelector(selectUser);var handleContractDailyBonusRewards=useContractDailyBonusRewards();var getPendingTotalRewards=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _nftLists$filter;var count,ownTokenList,contractDailyBonusRewards,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:count=_args.length>0&&_args[0]!==undefined?_args[0]:3;if(user!==null&&user!==void 0&&user.wallet_id){_context.next=3;break;}return _context.abrupt(\"return\");case 3:if(!((nftLists===null||nftLists===void 0?void 0:nftLists.length)==0)){_context.next=5;break;}return _context.abrupt(\"return\",0);case 5:ownTokenList=nftLists===null||nftLists===void 0?void 0:(_nftLists$filter=nftLists.filter(function(item){return(item===null||item===void 0?void 0:item.owner)===(user===null||user===void 0?void 0:user.wallet_id);}))===null||_nftLists$filter===void 0?void 0:_nftLists$filter.map(function(item){return+(item===null||item===void 0?void 0:item.tokenId);});_context.next=8;return handleContractDailyBonusRewards;case 8:contractDailyBonusRewards=_context.sent;return _context.abrupt(\"return\",contractDailyBonusRewards.pendingTotalReward(user===null||user===void 0?void 0:user.wallet_id,ownTokenList).then(function(res){return hexToNumber(res===null||res===void 0?void 0:res._hex)/1e18;}).catch(function(){return count?getPendingTotalRewards(count-1):null;}));case 10:case\"end\":return _context.stop();}},_callee);}));return function getPendingTotalRewards(){return _ref.apply(this,arguments);};}();return{getPendingTotalRewards:getPendingTotalRewards};}","map":{"version":3,"names":["useContractDailyBonusRewards","useSelector","selectNftList","selectUser","hexToNumber","useGetPendingTotalRewards","nftLists","user","handleContractDailyBonusRewards","getPendingTotalRewards","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_nftLists$filter","count","ownTokenList","contractDailyBonusRewards","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","wallet_id","abrupt","filter","item","owner","map","tokenId","sent","pendingTotalReward","then","res","_hex","catch","stop","apply"],"sources":["/Users/apple/Documents/treasure/src/hooks/rewards/useGetPendingTotalRewards.js"],"sourcesContent":["import { useContractDailyBonusRewards } from \"hooks/blockchain/useHandleContracts\";\nimport { useSelector } from \"react-redux\";\nimport { selectNftList } from \"redux/slice/nftSlice\";\nimport { selectUser } from \"redux/slice/userSlice\";\nimport { hexToNumber } from \"utils/blockchain\";\n\nexport default function useGetPendingTotalRewards() {\n  const nftLists = useSelector(selectNftList);\n  const user = useSelector(selectUser);\n  const handleContractDailyBonusRewards = useContractDailyBonusRewards();\n\n  const getPendingTotalRewards = async (count = 3) => {\n    if (!user?.wallet_id) return;\n    if (nftLists?.length == 0) return 0;\n    const ownTokenList = nftLists\n      ?.filter((item) => item?.owner === user?.wallet_id)\n      ?.map((item) => +item?.tokenId);\n    const contractDailyBonusRewards = await handleContractDailyBonusRewards;\n    return contractDailyBonusRewards\n      .pendingTotalReward(user?.wallet_id, ownTokenList)\n      .then((res) => hexToNumber(res?._hex) / 1e18)\n      .catch(() => (count ? getPendingTotalRewards(count - 1) : null));\n  };\n  return { getPendingTotalRewards };\n}\n"],"mappings":"0PAAA,OAASA,4BAA4B,KAAQ,qCAAqC,CAClF,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,aAAa,KAAQ,sBAAsB,CACpD,OAASC,UAAU,KAAQ,uBAAuB,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,cAAe,SAAS,CAAAC,yBAAyBA,CAAA,CAAG,CAClD,GAAM,CAAAC,QAAQ,CAAGL,WAAW,CAACC,aAAa,CAAC,CAC3C,GAAM,CAAAK,IAAI,CAAGN,WAAW,CAACE,UAAU,CAAC,CACpC,GAAM,CAAAK,+BAA+B,CAAGR,4BAA4B,CAAC,CAAC,CAEtE,GAAM,CAAAS,sBAAsB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,gBAAA,KAAAC,KAAA,CAAAC,YAAA,CAAAC,yBAAA,CAAAC,KAAA,CAAAC,SAAA,QAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAOT,KAAK,CAAAG,KAAA,CAAAO,MAAA,IAAAP,KAAA,MAAAQ,SAAA,CAAAR,KAAA,IAAG,CAAC,IACxCZ,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEqB,SAAS,EAAAL,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAM,MAAA,uBAChB,CAAAvB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEoB,MAAM,GAAI,CAAC,GAAAH,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAM,MAAA,UAAS,CAAC,SAC7BZ,YAAY,CAAGX,QAAQ,SAARA,QAAQ,kBAAAS,gBAAA,CAART,QAAQ,CACzBwB,MAAM,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEC,KAAK,KAAKzB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqB,SAAS,IAAC,UAAAb,gBAAA,iBADhCA,gBAAA,CAEjBkB,GAAG,CAAC,SAACF,IAAI,QAAK,EAACA,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEG,OAAO,IAAC,CAAAX,QAAA,CAAAE,IAAA,SACO,CAAAjB,+BAA+B,QAAjEU,yBAAyB,CAAAK,QAAA,CAAAY,IAAA,QAAAZ,QAAA,CAAAM,MAAA,UACxBX,yBAAyB,CAC7BkB,kBAAkB,CAAC7B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqB,SAAS,CAAEX,YAAY,CAAC,CACjDoB,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAlC,WAAW,CAACkC,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEC,IAAI,CAAC,CAAG,IAAI,GAAC,CAC5CC,KAAK,CAAC,iBAAO,CAAAxB,KAAK,CAAGP,sBAAsB,CAACO,KAAK,CAAG,CAAC,CAAC,CAAG,IAAI,EAAC,CAAC,2BAAAO,QAAA,CAAAkB,IAAA,MAAA3B,OAAA,GACnE,kBAXK,CAAAL,sBAAsBA,CAAA,SAAAC,IAAA,CAAAgC,KAAA,MAAAtB,SAAA,OAW3B,CACD,MAAO,CAAEX,sBAAsB,CAAtBA,sBAAuB,CAAC,CACnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}