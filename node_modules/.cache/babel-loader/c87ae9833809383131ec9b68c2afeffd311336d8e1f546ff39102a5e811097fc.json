{"ast":null,"code":"import _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport function isStartable(obj) {\n  return obj != null && typeof obj.start === 'function' && typeof obj.stop === 'function';\n}\nexport function start() {\n  return _start.apply(this, arguments);\n}\nfunction _start() {\n  _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    var startables,\n      _len,\n      objs,\n      _key,\n      _i,\n      _objs,\n      obj,\n      _args4 = arguments;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          startables = [];\n          for (_len = _args4.length, objs = new Array(_len), _key = 0; _key < _len; _key++) {\n            objs[_key] = _args4[_key];\n          }\n          for (_i = 0, _objs = objs; _i < _objs.length; _i++) {\n            obj = _objs[_i];\n            if (isStartable(obj)) {\n              startables.push(obj);\n            }\n          }\n          _context4.next = 5;\n          return Promise.all(startables.map( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(s) {\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    if (!(s.beforeStart != null)) {\n                      _context.next = 3;\n                      break;\n                    }\n                    _context.next = 3;\n                    return s.beforeStart();\n                  case 3:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }()));\n        case 5:\n          _context4.next = 7;\n          return Promise.all(startables.map( /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(s) {\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return s.start();\n                  case 2:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function (_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }()));\n        case 7:\n          _context4.next = 9;\n          return Promise.all(startables.map( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(s) {\n              return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    if (!(s.afterStart != null)) {\n                      _context3.next = 3;\n                      break;\n                    }\n                    _context3.next = 3;\n                    return s.afterStart();\n                  case 3:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }, _callee3);\n            }));\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }()));\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _start.apply(this, arguments);\n}\nexport function stop() {\n  return _stop.apply(this, arguments);\n}\nfunction _stop() {\n  _stop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n    var startables,\n      _len2,\n      objs,\n      _key2,\n      _i2,\n      _objs2,\n      obj,\n      _args8 = arguments;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          startables = [];\n          for (_len2 = _args8.length, objs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            objs[_key2] = _args8[_key2];\n          }\n          for (_i2 = 0, _objs2 = objs; _i2 < _objs2.length; _i2++) {\n            obj = _objs2[_i2];\n            if (isStartable(obj)) {\n              startables.push(obj);\n            }\n          }\n          _context8.next = 5;\n          return Promise.all(startables.map( /*#__PURE__*/function () {\n            var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(s) {\n              return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    if (!(s.beforeStop != null)) {\n                      _context5.next = 3;\n                      break;\n                    }\n                    _context5.next = 3;\n                    return s.beforeStop();\n                  case 3:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }, _callee5);\n            }));\n            return function (_x4) {\n              return _ref4.apply(this, arguments);\n            };\n          }()));\n        case 5:\n          _context8.next = 7;\n          return Promise.all(startables.map( /*#__PURE__*/function () {\n            var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(s) {\n              return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                while (1) switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _context6.next = 2;\n                    return s.stop();\n                  case 2:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }, _callee6);\n            }));\n            return function (_x5) {\n              return _ref5.apply(this, arguments);\n            };\n          }()));\n        case 7:\n          _context8.next = 9;\n          return Promise.all(startables.map( /*#__PURE__*/function () {\n            var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(s) {\n              return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n                while (1) switch (_context7.prev = _context7.next) {\n                  case 0:\n                    if (!(s.afterStop != null)) {\n                      _context7.next = 3;\n                      break;\n                    }\n                    _context7.next = 3;\n                    return s.afterStop();\n                  case 3:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }, _callee7);\n            }));\n            return function (_x6) {\n              return _ref6.apply(this, arguments);\n            };\n          }()));\n        case 9:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return _stop.apply(this, arguments);\n}","map":{"version":3,"names":["isStartable","obj","start","stop","_start","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee4","startables","_len","objs","_key","_i","_objs","_args4","wrap","_callee4$","_context4","prev","next","length","Array","push","Promise","all","map","_ref","_callee","s","_callee$","_context","beforeStart","_x","_ref2","_callee2","_callee2$","_context2","_x2","_ref3","_callee3","_callee3$","_context3","afterStart","_x3","_stop","_callee8","_len2","_key2","_i2","_objs2","_args8","_callee8$","_context8","_ref4","_callee5","_callee5$","_context5","beforeStop","_x4","_ref5","_callee6","_callee6$","_context6","_x5","_ref6","_callee7","_callee7$","_context7","afterStop","_x6"],"sources":["/Users/apple/Documents/treasure/node_modules/@libp2p/interfaces/src/startable.ts"],"sourcesContent":["\n/**\n * Implemented by components that have a lifecycle\n */\nexport interface Startable {\n  isStarted: () => boolean\n\n  /**\n   * If implemented, this method will be invoked before the start method.\n   *\n   * It should not assume any other components have been started.\n   */\n  beforeStart?: () => void | Promise<void>\n\n  /**\n   * This method will be invoked to start the component.\n   *\n   * It should not assume that any other components have been started.\n   */\n  start: () => void | Promise<void>\n\n  /**\n   * If implemented, this method will be invoked after the start method.\n   *\n   * All other components will have had their start method invoked before this method is called.\n   */\n  afterStart?: () => void | Promise<void>\n\n  /**\n   * If implemented, this method will be invoked before the stop method.\n   *\n   * Any other components will still be running when this method is called.\n   */\n  beforeStop?: () => void | Promise<void>\n\n  /**\n   * This method will be invoked to stop the component.\n   *\n   * It should not assume any other components are running when it is called.\n   */\n  stop: () => void | Promise<void>\n\n  /**\n   * If implemented, this method will be invoked after the stop method.\n   *\n   * All other components will have had their stop method invoked before this method is called.\n   */\n  afterStop?: () => void | Promise<void>\n}\n\nexport function isStartable (obj: any): obj is Startable {\n  return obj != null && typeof obj.start === 'function' && typeof obj.stop === 'function'\n}\n\nexport async function start (...objs: any[]): Promise<void> {\n  const startables: Startable[] = []\n\n  for (const obj of objs) {\n    if (isStartable(obj)) {\n      startables.push(obj)\n    }\n  }\n\n  await Promise.all(\n    startables.map(async s => {\n      if (s.beforeStart != null) {\n        await s.beforeStart()\n      }\n    })\n  )\n\n  await Promise.all(\n    startables.map(async s => {\n      await s.start()\n    })\n  )\n\n  await Promise.all(\n    startables.map(async s => {\n      if (s.afterStart != null) {\n        await s.afterStart()\n      }\n    })\n  )\n}\n\nexport async function stop (...objs: any[]): Promise<void> {\n  const startables: Startable[] = []\n\n  for (const obj of objs) {\n    if (isStartable(obj)) {\n      startables.push(obj)\n    }\n  }\n\n  await Promise.all(\n    startables.map(async s => {\n      if (s.beforeStop != null) {\n        await s.beforeStop()\n      }\n    })\n  )\n\n  await Promise.all(\n    startables.map(async s => {\n      await s.stop()\n    })\n  )\n\n  await Promise.all(\n    startables.map(async s => {\n      if (s.afterStop != null) {\n        await s.afterStop()\n      }\n    })\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}