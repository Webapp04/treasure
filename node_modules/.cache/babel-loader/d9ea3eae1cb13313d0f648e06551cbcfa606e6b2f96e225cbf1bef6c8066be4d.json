{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import AirdropApi from\"api/AirdropApi\";import{useContractSmarterCoinWithSigner}from\"hooks/blockchain/useHandleContracts\";import{useDispatch,useSelector}from\"react-redux\";import ACTIONS from\"redux/action\";import{selectUser}from\"redux/slice/userSlice\";/* global BigInt */export default function useApproveSMRTRtoContract(){var dispatch=useDispatch();var user=useSelector(selectUser);var handleContractSmarterCoinWithSigner=useContractSmarterCoinWithSigner();var approveSMRTRtoContract=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(contractAddress,amount){var sumToApprove,contractSmarterCoinWithSigner;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:sumToApprove=BigInt(amount*Math.pow(10,18));_context2.next=3;return handleContractSmarterCoinWithSigner;case 3:contractSmarterCoinWithSigner=_context2.sent;return _context2.abrupt(\"return\",contractSmarterCoinWithSigner.approve(contractAddress,sumToApprove).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(tx){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:new AirdropApi().logger({wallet_id:user===null||user===void 0?void 0:user.wallet_id,type:\"PENDING\",action:\"approveSMRTR\",description:\"approveSMRTR\",tx:JSON.stringify(tx)});_context.next=3;return tx.wait();case 3:ACTIONS.SET_TRANSANCTION_HASH(dispatch,tx===null||tx===void 0?void 0:tx.hash);return _context.abrupt(\"return\",true);case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x3){return _ref2.apply(this,arguments);};}()).catch(function(err){new AirdropApi().logger({wallet_id:user===null||user===void 0?void 0:user.wallet_id,type:\"ERROR\",action:\"approveSMRTR\",error:JSON.stringify(err)});return null;}));case 5:case\"end\":return _context2.stop();}},_callee2);}));return function approveSMRTRtoContract(_x,_x2){return _ref.apply(this,arguments);};}();return{approveSMRTRtoContract:approveSMRTRtoContract};}","map":{"version":3,"names":["AirdropApi","useContractSmarterCoinWithSigner","useDispatch","useSelector","ACTIONS","selectUser","useApproveSMRTRtoContract","dispatch","user","handleContractSmarterCoinWithSigner","approveSMRTRtoContract","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","contractAddress","amount","sumToApprove","contractSmarterCoinWithSigner","wrap","_callee2$","_context2","prev","next","BigInt","Math","pow","sent","abrupt","approve","then","_ref2","_callee","tx","_callee$","_context","logger","wallet_id","type","action","description","JSON","stringify","wait","SET_TRANSANCTION_HASH","hash","stop","_x3","apply","arguments","catch","err","error","_x","_x2"],"sources":["/Users/apple/Documents/treasure/src/hooks/nft/useApproveSMRTRtoContract.js"],"sourcesContent":["import AirdropApi from \"api/AirdropApi\";\nimport { useContractSmarterCoinWithSigner } from \"hooks/blockchain/useHandleContracts\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ACTIONS from \"redux/action\";\nimport { selectUser } from \"redux/slice/userSlice\";\n\n/* global BigInt */\n\nexport default function useApproveSMRTRtoContract() {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n  const handleContractSmarterCoinWithSigner =\n    useContractSmarterCoinWithSigner();\n\n  const approveSMRTRtoContract = async (contractAddress, amount) => {\n    const sumToApprove = BigInt(amount * Math.pow(10, 18));\n    const contractSmarterCoinWithSigner =\n      await handleContractSmarterCoinWithSigner;\n\n    return contractSmarterCoinWithSigner\n      .approve(contractAddress, sumToApprove)\n      .then(async (tx) => {\n        new AirdropApi().logger({\n          wallet_id: user?.wallet_id,\n          type: \"PENDING\",\n          action: \"approveSMRTR\",\n          description: \"approveSMRTR\",\n          tx: JSON.stringify(tx),\n        });\n\n        await tx.wait();\n        ACTIONS.SET_TRANSANCTION_HASH(dispatch, tx?.hash);\n        return true;\n      })\n      .catch((err) => {\n        new AirdropApi().logger({\n          wallet_id: user?.wallet_id,\n          type: \"ERROR\",\n          action: \"approveSMRTR\",\n          error: JSON.stringify(err),\n        });\n\n        return null;\n      });\n  };\n  return { approveSMRTRtoContract };\n}\n"],"mappings":"0PAAA,MAAO,CAAAA,UAAU,KAAM,gBAAgB,CACvC,OAASC,gCAAgC,KAAQ,qCAAqC,CACtF,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,OAAO,KAAM,cAAc,CAClC,OAASC,UAAU,KAAQ,uBAAuB,CAElD,mBAEA,cAAe,SAAS,CAAAC,yBAAyBA,CAAA,CAAG,CAClD,GAAM,CAAAC,QAAQ,CAAGL,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAM,IAAI,CAAGL,WAAW,CAACE,UAAU,CAAC,CACpC,GAAM,CAAAI,mCAAmC,CACvCR,gCAAgC,CAAC,CAAC,CAEpC,GAAM,CAAAS,sBAAsB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,SAAOC,eAAe,CAAEC,MAAM,MAAAC,YAAA,CAAAC,6BAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,UAAAC,SAAA,iBAAAA,SAAA,CAAAC,IAAA,CAAAD,SAAA,CAAAE,IAAA,SACrDN,YAAY,CAAGO,MAAM,CAACR,MAAM,CAAGS,IAAI,CAACC,GAAG,CAAC,EAAE,CAAE,EAAE,CAAC,CAAC,CAAAL,SAAA,CAAAE,IAAA,SAE9C,CAAAf,mCAAmC,QADrCU,6BAA6B,CAAAG,SAAA,CAAAM,IAAA,QAAAN,SAAA,CAAAO,MAAA,UAG5BV,6BAA6B,CACjCW,OAAO,CAACd,eAAe,CAAEE,YAAY,CAAC,CACtCa,IAAI,6BAAAC,KAAA,CAAApB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAmB,QAAOC,EAAE,SAAArB,mBAAA,GAAAO,IAAA,UAAAe,SAAAC,QAAA,iBAAAA,QAAA,CAAAb,IAAA,CAAAa,QAAA,CAAAZ,IAAA,SACb,GAAI,CAAAxB,UAAU,CAAC,CAAC,CAACqC,MAAM,CAAC,CACtBC,SAAS,CAAE9B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8B,SAAS,CAC1BC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,cAAc,CACtBC,WAAW,CAAE,cAAc,CAC3BP,EAAE,CAAEQ,IAAI,CAACC,SAAS,CAACT,EAAE,CACvB,CAAC,CAAC,CAACE,QAAA,CAAAZ,IAAA,SAEG,CAAAU,EAAE,CAACU,IAAI,CAAC,CAAC,QACfxC,OAAO,CAACyC,qBAAqB,CAACtC,QAAQ,CAAE2B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEY,IAAI,CAAC,CAAC,OAAAV,QAAA,CAAAP,MAAA,UAC3C,IAAI,0BAAAO,QAAA,CAAAW,IAAA,MAAAd,OAAA,GACZ,mBAAAe,GAAA,SAAAhB,KAAA,CAAAiB,KAAA,MAAAC,SAAA,QAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAK,CACd,GAAI,CAAApD,UAAU,CAAC,CAAC,CAACqC,MAAM,CAAC,CACtBC,SAAS,CAAE9B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8B,SAAS,CAC1BC,IAAI,CAAE,OAAO,CACbC,MAAM,CAAE,cAAc,CACtBa,KAAK,CAAEX,IAAI,CAACC,SAAS,CAACS,GAAG,CAC3B,CAAC,CAAC,CAEF,MAAO,KAAI,CACb,CAAC,CAAC,0BAAA9B,SAAA,CAAAyB,IAAA,MAAAhC,QAAA,GACL,kBA9BK,CAAAL,sBAAsBA,CAAA4C,EAAA,CAAAC,GAAA,SAAA5C,IAAA,CAAAsC,KAAA,MAAAC,SAAA,OA8B3B,CACD,MAAO,CAAExC,sBAAsB,CAAtBA,sBAAuB,CAAC,CACnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}