{"ast":null,"code":"'use strict';\n\nvar _inherits = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _regeneratorRuntime = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _createForOfIteratorHelper = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _objectSpread = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _classCallCheck = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _awaitAsyncGenerator = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js\").default;\nvar _wrapAsyncGenerator = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js\").default;\nvar _require = require('catering'),\n  fromCallback = _require.fromCallback;\nvar ModuleError = require('module-error');\nvar _require2 = require('./lib/common'),\n  getOptions = _require2.getOptions,\n  getCallback = _require2.getCallback;\nvar kPromise = Symbol('promise');\nvar kCallback = Symbol('callback');\nvar kWorking = Symbol('working');\nvar kHandleOne = Symbol('handleOne');\nvar kHandleMany = Symbol('handleMany');\nvar kAutoClose = Symbol('autoClose');\nvar kFinishWork = Symbol('finishWork');\nvar kReturnMany = Symbol('returnMany');\nvar kClosing = Symbol('closing');\nvar kHandleClose = Symbol('handleClose');\nvar kClosed = Symbol('closed');\nvar kCloseCallbacks = Symbol('closeCallbacks');\nvar kKeyEncoding = Symbol('keyEncoding');\nvar kValueEncoding = Symbol('valueEncoding');\nvar kAbortOnClose = Symbol('abortOnClose');\nvar kLegacy = Symbol('legacy');\nvar kKeys = Symbol('keys');\nvar kValues = Symbol('values');\nvar kLimit = Symbol('limit');\nvar kCount = Symbol('count');\nvar emptyOptions = Object.freeze({});\nvar noop = function noop() {};\nvar warnedEnd = false;\n\n// This class is an internal utility for common functionality between AbstractIterator,\n// AbstractKeyIterator and AbstractValueIterator. It's not exported.\nvar CommonIterator = /*#__PURE__*/function (_Symbol$asyncIterator) {\n  function CommonIterator(db, options, legacy) {\n    _classCallCheck(this, CommonIterator);\n    if (typeof db !== 'object' || db === null) {\n      var hint = db === null ? 'null' : typeof db;\n      throw new TypeError(\"The first argument must be an abstract-level database, received \".concat(hint));\n    }\n    if (typeof options !== 'object' || options === null) {\n      throw new TypeError('The second argument must be an options object');\n    }\n    this[kClosed] = false;\n    this[kCloseCallbacks] = [];\n    this[kWorking] = false;\n    this[kClosing] = false;\n    this[kAutoClose] = false;\n    this[kCallback] = null;\n    this[kHandleOne] = this[kHandleOne].bind(this);\n    this[kHandleMany] = this[kHandleMany].bind(this);\n    this[kHandleClose] = this[kHandleClose].bind(this);\n    this[kKeyEncoding] = options[kKeyEncoding];\n    this[kValueEncoding] = options[kValueEncoding];\n    this[kLegacy] = legacy;\n    this[kLimit] = Number.isInteger(options.limit) && options.limit >= 0 ? options.limit : Infinity;\n    this[kCount] = 0;\n\n    // Undocumented option to abort pending work on close(). Used by the\n    // many-level module as a temporary solution to a blocked close().\n    // TODO (next major): consider making this the default behavior. Native\n    // implementations should have their own logic to safely close iterators.\n    this[kAbortOnClose] = !!options.abortOnClose;\n    this.db = db;\n    this.db.attachResource(this);\n    this.nextTick = db.nextTick;\n  }\n  _createClass(CommonIterator, [{\n    key: \"count\",\n    get: function get() {\n      return this[kCount];\n    }\n  }, {\n    key: \"limit\",\n    get: function get() {\n      return this[kLimit];\n    }\n  }, {\n    key: \"next\",\n    value: function next(callback) {\n      var _this2 = this;\n      var promise;\n      if (callback === undefined) {\n        promise = new Promise(function (resolve, reject) {\n          callback = function callback(err, key, value) {\n            if (err) reject(err);else if (!_this2[kLegacy]) resolve(key);else if (key === undefined && value === undefined) resolve();else resolve([key, value]);\n          };\n        });\n      } else if (typeof callback !== 'function') {\n        throw new TypeError('Callback must be a function');\n      }\n      if (this[kClosing]) {\n        this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }));\n      } else if (this[kWorking]) {\n        this.nextTick(callback, new ModuleError('Iterator is busy: cannot call next() until previous call has completed', {\n          code: 'LEVEL_ITERATOR_BUSY'\n        }));\n      } else {\n        this[kWorking] = true;\n        this[kCallback] = callback;\n        if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleOne], null);else this._next(this[kHandleOne]);\n      }\n      return promise;\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(callback) {\n      this.nextTick(callback);\n    }\n  }, {\n    key: \"nextv\",\n    value: function nextv(size, options, callback) {\n      callback = getCallback(options, callback);\n      callback = fromCallback(callback, kPromise);\n      options = getOptions(options, emptyOptions);\n      if (!Number.isInteger(size)) {\n        this.nextTick(callback, new TypeError(\"The first argument 'size' must be an integer\"));\n        return callback[kPromise];\n      }\n      if (this[kClosing]) {\n        this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }));\n      } else if (this[kWorking]) {\n        this.nextTick(callback, new ModuleError('Iterator is busy: cannot call nextv() until previous call has completed', {\n          code: 'LEVEL_ITERATOR_BUSY'\n        }));\n      } else {\n        if (size < 1) size = 1;\n        if (this[kLimit] < Infinity) size = Math.min(size, this[kLimit] - this[kCount]);\n        this[kWorking] = true;\n        this[kCallback] = callback;\n        if (size <= 0) this.nextTick(this[kHandleMany], null, []);else this._nextv(size, options, this[kHandleMany]);\n      }\n      return callback[kPromise];\n    }\n  }, {\n    key: \"_nextv\",\n    value: function _nextv(size, options, callback) {\n      var _this3 = this;\n      var acc = [];\n      var onnext = function onnext(err, key, value) {\n        if (err) {\n          return callback(err);\n        } else if (_this3[kLegacy] ? key === undefined && value === undefined : key === undefined) {\n          return callback(null, acc);\n        }\n        acc.push(_this3[kLegacy] ? [key, value] : key);\n        if (acc.length === size) {\n          callback(null, acc);\n        } else {\n          _this3._next(onnext);\n        }\n      };\n      this._next(onnext);\n    }\n  }, {\n    key: \"all\",\n    value: function all(options, callback) {\n      callback = getCallback(options, callback);\n      callback = fromCallback(callback, kPromise);\n      options = getOptions(options, emptyOptions);\n      if (this[kClosing]) {\n        this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }));\n      } else if (this[kWorking]) {\n        this.nextTick(callback, new ModuleError('Iterator is busy: cannot call all() until previous call has completed', {\n          code: 'LEVEL_ITERATOR_BUSY'\n        }));\n      } else {\n        this[kWorking] = true;\n        this[kCallback] = callback;\n        this[kAutoClose] = true;\n        if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleMany], null, []);else this._all(options, this[kHandleMany]);\n      }\n      return callback[kPromise];\n    }\n  }, {\n    key: \"_all\",\n    value: function _all(options, callback) {\n      var _this4 = this;\n      // Must count here because we're directly calling _nextv()\n      var count = this[kCount];\n      var acc = [];\n      var nextv = function nextv() {\n        // Not configurable, because implementations should optimize _all().\n        var size = _this4[kLimit] < Infinity ? Math.min(1e3, _this4[kLimit] - count) : 1e3;\n        if (size <= 0) {\n          _this4.nextTick(callback, null, acc);\n        } else {\n          _this4._nextv(size, emptyOptions, onnextv);\n        }\n      };\n      var onnextv = function onnextv(err, items) {\n        if (err) {\n          callback(err);\n        } else if (items.length === 0) {\n          callback(null, acc);\n        } else {\n          acc.push.apply(acc, items);\n          count += items.length;\n          nextv();\n        }\n      };\n      nextv();\n    }\n  }, {\n    key: kFinishWork,\n    value: function value() {\n      var cb = this[kCallback];\n\n      // Callback will be null if work was aborted on close\n      if (this[kAbortOnClose] && cb === null) return noop;\n      this[kWorking] = false;\n      this[kCallback] = null;\n      if (this[kClosing]) this._close(this[kHandleClose]);\n      return cb;\n    }\n  }, {\n    key: kReturnMany,\n    value: function value(cb, err, items) {\n      if (this[kAutoClose]) {\n        this.close(cb.bind(null, err, items));\n      } else {\n        cb(err, items);\n      }\n    }\n  }, {\n    key: \"seek\",\n    value: function seek(target, options) {\n      options = getOptions(options, emptyOptions);\n      if (this[kClosing]) {\n        // Don't throw here, to be kind to implementations that wrap\n        // another db and don't necessarily control when the db is closed\n      } else if (this[kWorking]) {\n        throw new ModuleError('Iterator is busy: cannot call seek() until next() has completed', {\n          code: 'LEVEL_ITERATOR_BUSY'\n        });\n      } else {\n        var keyEncoding = this.db.keyEncoding(options.keyEncoding || this[kKeyEncoding]);\n        var keyFormat = keyEncoding.format;\n        if (options.keyEncoding !== keyFormat) {\n          options = _objectSpread(_objectSpread({}, options), {}, {\n            keyEncoding: keyFormat\n          });\n        }\n        var mapped = this.db.prefixKey(keyEncoding.encode(target), keyFormat);\n        this._seek(mapped, options);\n      }\n    }\n  }, {\n    key: \"_seek\",\n    value: function _seek(target, options) {\n      throw new ModuleError('Iterator does not support seek()', {\n        code: 'LEVEL_NOT_SUPPORTED'\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close(callback) {\n      callback = fromCallback(callback, kPromise);\n      if (this[kClosed]) {\n        this.nextTick(callback);\n      } else if (this[kClosing]) {\n        this[kCloseCallbacks].push(callback);\n      } else {\n        this[kClosing] = true;\n        this[kCloseCallbacks].push(callback);\n        if (!this[kWorking]) {\n          this._close(this[kHandleClose]);\n        } else if (this[kAbortOnClose]) {\n          // Don't wait for work to finish. Subsequently ignore the result.\n          var cb = this[kFinishWork]();\n          cb(new ModuleError('Aborted on iterator close()', {\n            code: 'LEVEL_ITERATOR_NOT_OPEN'\n          }));\n        }\n      }\n      return callback[kPromise];\n    }\n  }, {\n    key: \"_close\",\n    value: function _close(callback) {\n      this.nextTick(callback);\n    }\n  }, {\n    key: kHandleClose,\n    value: function value() {\n      this[kClosed] = true;\n      this.db.detachResource(this);\n      var callbacks = this[kCloseCallbacks];\n      this[kCloseCallbacks] = [];\n      var _iterator = _createForOfIteratorHelper(callbacks),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var cb = _step.value;\n          cb();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: _Symbol$asyncIterator,\n    value: function value() {\n      var _this = this;\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var item;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n            case 1:\n              _context.next = 3;\n              return _awaitAsyncGenerator(_this.next());\n            case 3:\n              _context.t0 = item = _context.sent;\n              _context.t1 = undefined;\n              if (!(_context.t0 !== _context.t1)) {\n                _context.next = 10;\n                break;\n              }\n              _context.next = 8;\n              return item;\n            case 8:\n              _context.next = 1;\n              break;\n            case 10:\n              _context.prev = 10;\n              if (_this[kClosed]) {\n                _context.next = 14;\n                break;\n              }\n              _context.next = 14;\n              return _awaitAsyncGenerator(_this.close());\n            case 14:\n              return _context.finish(10);\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0,, 10, 15]]);\n      }))();\n    }\n  }]);\n  return CommonIterator;\n}(Symbol.asyncIterator); // For backwards compatibility this class is not (yet) called AbstractEntryIterator.\nvar AbstractIterator = /*#__PURE__*/function (_CommonIterator) {\n  _inherits(AbstractIterator, _CommonIterator);\n  var _super = _createSuper(AbstractIterator);\n  function AbstractIterator(db, options) {\n    var _this5;\n    _classCallCheck(this, AbstractIterator);\n    _this5 = _super.call(this, db, options, true);\n    _this5[kKeys] = options.keys !== false;\n    _this5[kValues] = options.values !== false;\n    return _this5;\n  }\n  _createClass(AbstractIterator, [{\n    key: kHandleOne,\n    value: function value(err, key, _value) {\n      var cb = this[kFinishWork]();\n      if (err) return cb(err);\n      try {\n        key = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined;\n        _value = this[kValues] && _value !== undefined ? this[kValueEncoding].decode(_value) : undefined;\n      } catch (err) {\n        return cb(new IteratorDecodeError('entry', err));\n      }\n      if (!(key === undefined && _value === undefined)) {\n        this[kCount]++;\n      }\n      cb(null, key, _value);\n    }\n  }, {\n    key: kHandleMany,\n    value: function value(err, entries) {\n      var cb = this[kFinishWork]();\n      if (err) return this[kReturnMany](cb, err);\n      try {\n        var _iterator2 = _createForOfIteratorHelper(entries),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var entry = _step2.value;\n            var key = entry[0];\n            var value = entry[1];\n            entry[0] = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined;\n            entry[1] = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      } catch (err) {\n        return this[kReturnMany](cb, new IteratorDecodeError('entries', err));\n      }\n      this[kCount] += entries.length;\n      this[kReturnMany](cb, null, entries);\n    }\n  }, {\n    key: \"end\",\n    value: function end(callback) {\n      if (!warnedEnd && typeof console !== 'undefined') {\n        warnedEnd = true;\n        console.warn(new ModuleError('The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version', {\n          code: 'LEVEL_LEGACY'\n        }));\n      }\n      return this.close(callback);\n    }\n  }]);\n  return AbstractIterator;\n}(CommonIterator);\nvar AbstractKeyIterator = /*#__PURE__*/function (_CommonIterator2) {\n  _inherits(AbstractKeyIterator, _CommonIterator2);\n  var _super2 = _createSuper(AbstractKeyIterator);\n  function AbstractKeyIterator(db, options) {\n    _classCallCheck(this, AbstractKeyIterator);\n    return _super2.call(this, db, options, false);\n  }\n  _createClass(AbstractKeyIterator, [{\n    key: kHandleOne,\n    value: function value(err, key) {\n      var cb = this[kFinishWork]();\n      if (err) return cb(err);\n      try {\n        key = key !== undefined ? this[kKeyEncoding].decode(key) : undefined;\n      } catch (err) {\n        return cb(new IteratorDecodeError('key', err));\n      }\n      if (key !== undefined) this[kCount]++;\n      cb(null, key);\n    }\n  }, {\n    key: kHandleMany,\n    value: function value(err, keys) {\n      var cb = this[kFinishWork]();\n      if (err) return this[kReturnMany](cb, err);\n      try {\n        for (var i = 0; i < keys.length; i++) {\n          var key = keys[i];\n          keys[i] = key !== undefined ? this[kKeyEncoding].decode(key) : undefined;\n        }\n      } catch (err) {\n        return this[kReturnMany](cb, new IteratorDecodeError('keys', err));\n      }\n      this[kCount] += keys.length;\n      this[kReturnMany](cb, null, keys);\n    }\n  }]);\n  return AbstractKeyIterator;\n}(CommonIterator);\nvar AbstractValueIterator = /*#__PURE__*/function (_CommonIterator3) {\n  _inherits(AbstractValueIterator, _CommonIterator3);\n  var _super3 = _createSuper(AbstractValueIterator);\n  function AbstractValueIterator(db, options) {\n    _classCallCheck(this, AbstractValueIterator);\n    return _super3.call(this, db, options, false);\n  }\n  _createClass(AbstractValueIterator, [{\n    key: kHandleOne,\n    value: function value(err, _value2) {\n      var cb = this[kFinishWork]();\n      if (err) return cb(err);\n      try {\n        _value2 = _value2 !== undefined ? this[kValueEncoding].decode(_value2) : undefined;\n      } catch (err) {\n        return cb(new IteratorDecodeError('value', err));\n      }\n      if (_value2 !== undefined) this[kCount]++;\n      cb(null, _value2);\n    }\n  }, {\n    key: kHandleMany,\n    value: function value(err, values) {\n      var cb = this[kFinishWork]();\n      if (err) return this[kReturnMany](cb, err);\n      try {\n        for (var i = 0; i < values.length; i++) {\n          var value = values[i];\n          values[i] = value !== undefined ? this[kValueEncoding].decode(value) : undefined;\n        }\n      } catch (err) {\n        return this[kReturnMany](cb, new IteratorDecodeError('values', err));\n      }\n      this[kCount] += values.length;\n      this[kReturnMany](cb, null, values);\n    }\n  }]);\n  return AbstractValueIterator;\n}(CommonIterator); // Internal utility, not typed or exported\nvar IteratorDecodeError = /*#__PURE__*/function (_ModuleError) {\n  _inherits(IteratorDecodeError, _ModuleError);\n  var _super4 = _createSuper(IteratorDecodeError);\n  function IteratorDecodeError(subject, cause) {\n    _classCallCheck(this, IteratorDecodeError);\n    return _super4.call(this, \"Iterator could not decode \".concat(subject), {\n      code: 'LEVEL_DECODE_ERROR',\n      cause: cause\n    });\n  }\n  return _createClass(IteratorDecodeError);\n}(ModuleError); // To help migrating to abstract-level\nvar _loop = function _loop() {\n  var k = _arr[_i];\n  Object.defineProperty(AbstractIterator.prototype, k.split(' ')[0], {\n    get: function get() {\n      throw new ModuleError(\"The \".concat(k, \" has been removed\"), {\n        code: 'LEVEL_LEGACY'\n      });\n    },\n    set: function set() {\n      throw new ModuleError(\"The \".concat(k, \" has been removed\"), {\n        code: 'LEVEL_LEGACY'\n      });\n    }\n  });\n};\nfor (var _i = 0, _arr = ['_ended property', '_nexting property', '_end method']; _i < _arr.length; _i++) {\n  _loop();\n}\n\n// Exposed so that AbstractLevel can set these options\nAbstractIterator.keyEncoding = kKeyEncoding;\nAbstractIterator.valueEncoding = kValueEncoding;\nexports.AbstractIterator = AbstractIterator;\nexports.AbstractKeyIterator = AbstractKeyIterator;\nexports.AbstractValueIterator = AbstractValueIterator;","map":{"version":3,"names":["_inherits","require","default","_createSuper","_regeneratorRuntime","_createForOfIteratorHelper","_objectSpread","_classCallCheck","_createClass","_awaitAsyncGenerator","_wrapAsyncGenerator","_require","fromCallback","ModuleError","_require2","getOptions","getCallback","kPromise","Symbol","kCallback","kWorking","kHandleOne","kHandleMany","kAutoClose","kFinishWork","kReturnMany","kClosing","kHandleClose","kClosed","kCloseCallbacks","kKeyEncoding","kValueEncoding","kAbortOnClose","kLegacy","kKeys","kValues","kLimit","kCount","emptyOptions","Object","freeze","noop","warnedEnd","CommonIterator","_Symbol$asyncIterator","db","options","legacy","hint","TypeError","concat","bind","Number","isInteger","limit","Infinity","abortOnClose","attachResource","nextTick","key","get","value","next","callback","_this2","promise","undefined","Promise","resolve","reject","err","code","_next","nextv","size","Math","min","_nextv","_this3","acc","onnext","push","length","all","_all","_this4","count","onnextv","items","apply","cb","_close","close","seek","target","keyEncoding","keyFormat","format","mapped","prefixKey","encode","_seek","detachResource","callbacks","_iterator","_step","s","n","done","e","f","_this","mark","_callee","item","wrap","_callee$","_context","prev","t0","sent","t1","finish","stop","asyncIterator","AbstractIterator","_CommonIterator","_super","_this5","call","keys","values","decode","IteratorDecodeError","entries","_iterator2","_step2","entry","end","console","warn","AbstractKeyIterator","_CommonIterator2","_super2","i","AbstractValueIterator","_CommonIterator3","_super3","_ModuleError","_super4","subject","cause","_loop","k","_arr","_i","defineProperty","prototype","split","set","valueEncoding","exports"],"sources":["/Users/apple/Documents/treasure/node_modules/abstract-level/abstract-iterator.js"],"sourcesContent":["'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getOptions, getCallback } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kCallback = Symbol('callback')\nconst kWorking = Symbol('working')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kAutoClose = Symbol('autoClose')\nconst kFinishWork = Symbol('finishWork')\nconst kReturnMany = Symbol('returnMany')\nconst kClosing = Symbol('closing')\nconst kHandleClose = Symbol('handleClose')\nconst kClosed = Symbol('closed')\nconst kCloseCallbacks = Symbol('closeCallbacks')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst kAbortOnClose = Symbol('abortOnClose')\nconst kLegacy = Symbol('legacy')\nconst kKeys = Symbol('keys')\nconst kValues = Symbol('values')\nconst kLimit = Symbol('limit')\nconst kCount = Symbol('count')\n\nconst emptyOptions = Object.freeze({})\nconst noop = () => {}\nlet warnedEnd = false\n\n// This class is an internal utility for common functionality between AbstractIterator,\n// AbstractKeyIterator and AbstractValueIterator. It's not exported.\nclass CommonIterator {\n  constructor (db, options, legacy) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    if (typeof options !== 'object' || options === null) {\n      throw new TypeError('The second argument must be an options object')\n    }\n\n    this[kClosed] = false\n    this[kCloseCallbacks] = []\n    this[kWorking] = false\n    this[kClosing] = false\n    this[kAutoClose] = false\n    this[kCallback] = null\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kHandleClose] = this[kHandleClose].bind(this)\n    this[kKeyEncoding] = options[kKeyEncoding]\n    this[kValueEncoding] = options[kValueEncoding]\n    this[kLegacy] = legacy\n    this[kLimit] = Number.isInteger(options.limit) && options.limit >= 0 ? options.limit : Infinity\n    this[kCount] = 0\n\n    // Undocumented option to abort pending work on close(). Used by the\n    // many-level module as a temporary solution to a blocked close().\n    // TODO (next major): consider making this the default behavior. Native\n    // implementations should have their own logic to safely close iterators.\n    this[kAbortOnClose] = !!options.abortOnClose\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get count () {\n    return this[kCount]\n  }\n\n  get limit () {\n    return this[kLimit]\n  }\n\n  next (callback) {\n    let promise\n\n    if (callback === undefined) {\n      promise = new Promise((resolve, reject) => {\n        callback = (err, key, value) => {\n          if (err) reject(err)\n          else if (!this[kLegacy]) resolve(key)\n          else if (key === undefined && value === undefined) resolve()\n          else resolve([key, value])\n        }\n      })\n    } else if (typeof callback !== 'function') {\n      throw new TypeError('Callback must be a function')\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call next() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleOne], null)\n      else this._next(this[kHandleOne])\n    }\n\n    return promise\n  }\n\n  _next (callback) {\n    this.nextTick(callback)\n  }\n\n  nextv (size, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (!Number.isInteger(size)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'size' must be an integer\"))\n      return callback[kPromise]\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call nextv() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      if (size < 1) size = 1\n      if (this[kLimit] < Infinity) size = Math.min(size, this[kLimit] - this[kCount])\n\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (size <= 0) this.nextTick(this[kHandleMany], null, [])\n      else this._nextv(size, options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _nextv (size, options, callback) {\n    const acc = []\n    const onnext = (err, key, value) => {\n      if (err) {\n        return callback(err)\n      } else if (this[kLegacy] ? key === undefined && value === undefined : key === undefined) {\n        return callback(null, acc)\n      }\n\n      acc.push(this[kLegacy] ? [key, value] : key)\n\n      if (acc.length === size) {\n        callback(null, acc)\n      } else {\n        this._next(onnext)\n      }\n    }\n\n    this._next(onnext)\n  }\n\n  all (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call all() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n      this[kAutoClose] = true\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleMany], null, [])\n      else this._all(options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _all (options, callback) {\n    // Must count here because we're directly calling _nextv()\n    let count = this[kCount]\n    const acc = []\n\n    const nextv = () => {\n      // Not configurable, because implementations should optimize _all().\n      const size = this[kLimit] < Infinity ? Math.min(1e3, this[kLimit] - count) : 1e3\n\n      if (size <= 0) {\n        this.nextTick(callback, null, acc)\n      } else {\n        this._nextv(size, emptyOptions, onnextv)\n      }\n    }\n\n    const onnextv = (err, items) => {\n      if (err) {\n        callback(err)\n      } else if (items.length === 0) {\n        callback(null, acc)\n      } else {\n        acc.push.apply(acc, items)\n        count += items.length\n        nextv()\n      }\n    }\n\n    nextv()\n  }\n\n  [kFinishWork] () {\n    const cb = this[kCallback]\n\n    // Callback will be null if work was aborted on close\n    if (this[kAbortOnClose] && cb === null) return noop\n\n    this[kWorking] = false\n    this[kCallback] = null\n\n    if (this[kClosing]) this._close(this[kHandleClose])\n\n    return cb\n  }\n\n  [kReturnMany] (cb, err, items) {\n    if (this[kAutoClose]) {\n      this.close(cb.bind(null, err, items))\n    } else {\n      cb(err, items)\n    }\n  }\n\n  seek (target, options) {\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      // Don't throw here, to be kind to implementations that wrap\n      // another db and don't necessarily control when the db is closed\n    } else if (this[kWorking]) {\n      throw new ModuleError('Iterator is busy: cannot call seek() until next() has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      })\n    } else {\n      const keyEncoding = this.db.keyEncoding(options.keyEncoding || this[kKeyEncoding])\n      const keyFormat = keyEncoding.format\n\n      if (options.keyEncoding !== keyFormat) {\n        options = { ...options, keyEncoding: keyFormat }\n      }\n\n      const mapped = this.db.prefixKey(keyEncoding.encode(target), keyFormat)\n      this._seek(mapped, options)\n    }\n  }\n\n  _seek (target, options) {\n    throw new ModuleError('Iterator does not support seek()', {\n      code: 'LEVEL_NOT_SUPPORTED'\n    })\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kClosed]) {\n      this.nextTick(callback)\n    } else if (this[kClosing]) {\n      this[kCloseCallbacks].push(callback)\n    } else {\n      this[kClosing] = true\n      this[kCloseCallbacks].push(callback)\n\n      if (!this[kWorking]) {\n        this._close(this[kHandleClose])\n      } else if (this[kAbortOnClose]) {\n        // Don't wait for work to finish. Subsequently ignore the result.\n        const cb = this[kFinishWork]()\n\n        cb(new ModuleError('Aborted on iterator close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }))\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kHandleClose] () {\n    this[kClosed] = true\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n\n  async * [Symbol.asyncIterator] () {\n    try {\n      let item\n\n      while ((item = (await this.next())) !== undefined) {\n        yield item\n      }\n    } finally {\n      if (!this[kClosed]) await this.close()\n    }\n  }\n}\n\n// For backwards compatibility this class is not (yet) called AbstractEntryIterator.\nclass AbstractIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, true)\n    this[kKeys] = options.keys !== false\n    this[kValues] = options.values !== false\n  }\n\n  [kHandleOne] (err, key, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      value = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('entry', err))\n    }\n\n    if (!(key === undefined && value === undefined)) {\n      this[kCount]++\n    }\n\n    cb(null, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (const entry of entries) {\n        const key = entry[0]\n        const value = entry[1]\n\n        entry[0] = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n        entry[1] = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('entries', err))\n    }\n\n    this[kCount] += entries.length\n    this[kReturnMany](cb, null, entries)\n  }\n\n  end (callback) {\n    if (!warnedEnd && typeof console !== 'undefined') {\n      warnedEnd = true\n      console.warn(new ModuleError(\n        'The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version',\n        { code: 'LEVEL_LEGACY' }\n      ))\n    }\n\n    return this.close(callback)\n  }\n}\n\nclass AbstractKeyIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, key) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('key', err))\n    }\n\n    if (key !== undefined) this[kCount]++\n    cb(null, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i]\n        keys[i] = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('keys', err))\n    }\n\n    this[kCount] += keys.length\n    this[kReturnMany](cb, null, keys)\n  }\n}\n\nclass AbstractValueIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      value = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('value', err))\n    }\n\n    if (value !== undefined) this[kCount]++\n    cb(null, value)\n  }\n\n  [kHandleMany] (err, values) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < values.length; i++) {\n        const value = values[i]\n        values[i] = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('values', err))\n    }\n\n    this[kCount] += values.length\n    this[kReturnMany](cb, null, values)\n  }\n}\n\n// Internal utility, not typed or exported\nclass IteratorDecodeError extends ModuleError {\n  constructor (subject, cause) {\n    super(`Iterator could not decode ${subject}`, {\n      code: 'LEVEL_DECODE_ERROR',\n      cause\n    })\n  }\n}\n\n// To help migrating to abstract-level\nfor (const k of ['_ended property', '_nexting property', '_end method']) {\n  Object.defineProperty(AbstractIterator.prototype, k.split(' ')[0], {\n    get () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) },\n    set () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) }\n  })\n}\n\n// Exposed so that AbstractLevel can set these options\nAbstractIterator.keyEncoding = kKeyEncoding\nAbstractIterator.valueEncoding = kValueEncoding\n\nexports.AbstractIterator = AbstractIterator\nexports.AbstractKeyIterator = AbstractKeyIterator\nexports.AbstractValueIterator = AbstractValueIterator\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}