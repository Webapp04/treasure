{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContractNFKeyStakingWithSigner,useContractNFKeyWithSigner}from\"hooks/blockchain/useHandleContracts\";import{useSelector}from\"react-redux\";import{selectNftList}from\"redux/slice/nftSlice\";import{hexToNumber}from\"utils/blockchain\";export default function useGetNFkeyInfo(){var nftLists=useSelector(selectNftList);var handleContractNFKeyStakingWithSigner=useContractNFKeyStakingWithSigner();var handleContractNFKeyWithSigner=useContractNFKeyWithSigner();var getNFkeyInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_token){var tokenIdList,contractNFKeyStakingWithSigner,contractNFKeyWithSigner;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:tokenIdList=nftLists===null||nftLists===void 0?void 0:nftLists.map(function(item){return item.tokenId;});_context.next=3;return handleContractNFKeyStakingWithSigner;case 3:contractNFKeyStakingWithSigner=_context.sent;_context.next=6;return handleContractNFKeyWithSigner;case 6:contractNFKeyWithSigner=_context.sent;return _context.abrupt(\"return\",Promise.all([contractNFKeyWithSigner.getAmountUpgradeKey(_token.tier).then(function(tx){var _hexToNumber;return((_hexToNumber=hexToNumber(tx===null||tx===void 0?void 0:tx._hex))===null||_hexToNumber===void 0?void 0:_hexToNumber.toString())/Math.pow(10,18);}).then(function(res){return Math.ceil(+res);}).catch(function(err){return console.log(err);}),contractNFKeyStakingWithSigner.calcUnlockCost(_token.tokenId).catch(function(err){return console.log(err);}).then(function(tx){var _hexToNumber2;return((_hexToNumber2=hexToNumber(tx===null||tx===void 0?void 0:tx._hex))===null||_hexToNumber2===void 0?void 0:_hexToNumber2.toString())/Math.pow(10,18);}),contractNFKeyStakingWithSigner.calcBaseProbToOpen(_token.tokenId).catch(function(err){return console.log(err);}).then(function(tx){return hexToNumber(tx===null||tx===void 0?void 0:tx._hex)/10;}),contractNFKeyWithSigner.getUpgradeDelay(_token.tokenId).catch(function(err){return console.log(err);}).then(function(tx){return hexToNumber(tx===null||tx===void 0?void 0:tx._hex);}),contractNFKeyStakingWithSigner.pendingAllBaseReward(tokenIdList).catch(function(err){return console.log(err);}).then(function(tx){var _hexToNumber3;return((_hexToNumber3=hexToNumber(tx===null||tx===void 0?void 0:tx._hex))===null||_hexToNumber3===void 0?void 0:_hexToNumber3.toString())/Math.pow(10,18);}),contractNFKeyStakingWithSigner.calcRewards(_token.tokenId).catch(function(err){return console.log(err);}).then(function(tx){var _hexToNumber4;return((_hexToNumber4=hexToNumber(tx===null||tx===void 0?void 0:tx._hex))===null||_hexToNumber4===void 0?void 0:_hexToNumber4.toString())/Math.pow(10,18);}),contractNFKeyStakingWithSigner.calcRewardsPerSecond(_token.tokenId).catch(function(err){return console.log(err);}).then(function(tx){var _hexToNumber5;return((_hexToNumber5=hexToNumber(tx===null||tx===void 0?void 0:tx._hex))===null||_hexToNumber5===void 0?void 0:_hexToNumber5.toString())/Math.pow(10,18);}),contractNFKeyStakingWithSigner.calcRewardsPerSecondByTokens(tokenIdList).catch(function(err){return console.log(err);}).then(function(tx){var _hexToNumber6;return((_hexToNumber6=hexToNumber(tx===null||tx===void 0?void 0:tx._hex))===null||_hexToNumber6===void 0?void 0:_hexToNumber6.toString())/Math.pow(10,18);})]));case 8:case\"end\":return _context.stop();}},_callee);}));return function getNFkeyInfo(_x){return _ref.apply(this,arguments);};}();return{getNFkeyInfo:getNFkeyInfo};}","map":{"version":3,"names":["useContractNFKeyStakingWithSigner","useContractNFKeyWithSigner","useSelector","selectNftList","hexToNumber","useGetNFkeyInfo","nftLists","handleContractNFKeyStakingWithSigner","handleContractNFKeyWithSigner","getNFkeyInfo","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_token","tokenIdList","contractNFKeyStakingWithSigner","contractNFKeyWithSigner","wrap","_callee$","_context","prev","next","map","item","tokenId","sent","abrupt","Promise","all","getAmountUpgradeKey","tier","then","tx","_hexToNumber","_hex","toString","Math","pow","res","ceil","catch","err","console","log","calcUnlockCost","_hexToNumber2","calcBaseProbToOpen","getUpgradeDelay","pendingAllBaseReward","_hexToNumber3","calcRewards","_hexToNumber4","calcRewardsPerSecond","_hexToNumber5","calcRewardsPerSecondByTokens","_hexToNumber6","stop","_x","apply","arguments"],"sources":["/Users/apple/Documents/treasure/src/hooks/nft/useGetNFkeyInfo.js"],"sourcesContent":["import {\n  useContractNFKeyStakingWithSigner,\n  useContractNFKeyWithSigner,\n} from \"hooks/blockchain/useHandleContracts\";\nimport { useSelector } from \"react-redux\";\nimport { selectNftList } from \"redux/slice/nftSlice\";\nimport { hexToNumber } from \"utils/blockchain\";\n\nexport default function useGetNFkeyInfo() {\n  const nftLists = useSelector(selectNftList);\n  const handleContractNFKeyStakingWithSigner =\n    useContractNFKeyStakingWithSigner();\n  const handleContractNFKeyWithSigner = useContractNFKeyWithSigner();\n\n  const getNFkeyInfo = async (_token) => {\n    const tokenIdList = nftLists?.map((item) => item.tokenId);\n    const contractNFKeyStakingWithSigner =\n      await handleContractNFKeyStakingWithSigner;\n    const contractNFKeyWithSigner = await handleContractNFKeyWithSigner;\n    return Promise.all([\n      contractNFKeyWithSigner\n        .getAmountUpgradeKey(_token.tier)\n        .then((tx) => hexToNumber(tx?._hex)?.toString() / 10 ** 18)\n        .then((res) => Math.ceil(+res))\n        .catch((err) => console.log(err)),\n      contractNFKeyStakingWithSigner\n        .calcUnlockCost(_token.tokenId)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex)?.toString() / 10 ** 18),\n      contractNFKeyStakingWithSigner\n        .calcBaseProbToOpen(_token.tokenId)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex) / 10),\n      contractNFKeyWithSigner\n        .getUpgradeDelay(_token.tokenId)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex)),\n      contractNFKeyStakingWithSigner\n        .pendingAllBaseReward(tokenIdList)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex)?.toString() / 10 ** 18),\n      contractNFKeyStakingWithSigner\n        .calcRewards(_token.tokenId)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex)?.toString() / 10 ** 18),\n      contractNFKeyStakingWithSigner\n        .calcRewardsPerSecond(_token.tokenId)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex)?.toString() / 10 ** 18),\n      contractNFKeyStakingWithSigner\n        .calcRewardsPerSecondByTokens(tokenIdList)\n        .catch((err) => console.log(err))\n        .then((tx) => hexToNumber(tx?._hex)?.toString() / 10 ** 18),\n    ]);\n  };\n\n  return { getNFkeyInfo };\n}\n"],"mappings":"0PAAA,OACEA,iCAAiC,CACjCC,0BAA0B,KACrB,qCAAqC,CAC5C,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,aAAa,KAAQ,sBAAsB,CACpD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,cAAe,SAAS,CAAAC,eAAeA,CAAA,CAAG,CACxC,GAAM,CAAAC,QAAQ,CAAGJ,WAAW,CAACC,aAAa,CAAC,CAC3C,GAAM,CAAAI,oCAAoC,CACxCP,iCAAiC,CAAC,CAAC,CACrC,GAAM,CAAAQ,6BAA6B,CAAGP,0BAA0B,CAAC,CAAC,CAElE,GAAM,CAAAQ,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,WAAA,CAAAC,8BAAA,CAAAC,uBAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC1BP,WAAW,CAAGV,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEkB,GAAG,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,OAAO,GAAC,CAAAL,QAAA,CAAAE,IAAA,SAEjD,CAAAhB,oCAAoC,QADtCU,8BAA8B,CAAAI,QAAA,CAAAM,IAAA,CAAAN,QAAA,CAAAE,IAAA,SAEE,CAAAf,6BAA6B,QAA7DU,uBAAuB,CAAAG,QAAA,CAAAM,IAAA,QAAAN,QAAA,CAAAO,MAAA,UACtBC,OAAO,CAACC,GAAG,CAAC,CACjBZ,uBAAuB,CACpBa,mBAAmB,CAAChB,MAAM,CAACiB,IAAI,CAAC,CAChCC,IAAI,CAAC,SAACC,EAAE,MAAAC,YAAA,OAAK,EAAAA,YAAA,CAAA/B,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,UAAAD,YAAA,iBAArBA,YAAA,CAAuBE,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAC,GAAA,CAAG,EAAE,CAAI,EAAE,IAAC,CAC1DN,IAAI,CAAC,SAACO,GAAG,QAAK,CAAAF,IAAI,CAACG,IAAI,CAAC,CAACD,GAAG,CAAC,GAAC,CAC9BE,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACnC1B,8BAA8B,CAC3B6B,cAAc,CAAC/B,MAAM,CAACW,OAAO,CAAC,CAC9BgB,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,MAAAa,aAAA,OAAK,EAAAA,aAAA,CAAA3C,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,UAAAW,aAAA,iBAArBA,aAAA,CAAuBV,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAC,GAAA,CAAG,EAAE,CAAI,EAAE,IAAC,CAC7DtB,8BAA8B,CAC3B+B,kBAAkB,CAACjC,MAAM,CAACW,OAAO,CAAC,CAClCgB,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,QAAK,CAAA9B,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,CAAG,EAAE,GAAC,CAC3ClB,uBAAuB,CACpB+B,eAAe,CAAClC,MAAM,CAACW,OAAO,CAAC,CAC/BgB,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,QAAK,CAAA9B,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,GAAC,CACtCnB,8BAA8B,CAC3BiC,oBAAoB,CAAClC,WAAW,CAAC,CACjC0B,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,MAAAiB,aAAA,OAAK,EAAAA,aAAA,CAAA/C,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,UAAAe,aAAA,iBAArBA,aAAA,CAAuBd,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAC,GAAA,CAAG,EAAE,CAAI,EAAE,IAAC,CAC7DtB,8BAA8B,CAC3BmC,WAAW,CAACrC,MAAM,CAACW,OAAO,CAAC,CAC3BgB,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,MAAAmB,aAAA,OAAK,EAAAA,aAAA,CAAAjD,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,UAAAiB,aAAA,iBAArBA,aAAA,CAAuBhB,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAC,GAAA,CAAG,EAAE,CAAI,EAAE,IAAC,CAC7DtB,8BAA8B,CAC3BqC,oBAAoB,CAACvC,MAAM,CAACW,OAAO,CAAC,CACpCgB,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,MAAAqB,aAAA,OAAK,EAAAA,aAAA,CAAAnD,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,UAAAmB,aAAA,iBAArBA,aAAA,CAAuBlB,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAC,GAAA,CAAG,EAAE,CAAI,EAAE,IAAC,CAC7DtB,8BAA8B,CAC3BuC,4BAA4B,CAACxC,WAAW,CAAC,CACzC0B,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CAChCV,IAAI,CAAC,SAACC,EAAE,MAAAuB,aAAA,OAAK,EAAAA,aAAA,CAAArD,WAAW,CAAC8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,UAAAqB,aAAA,iBAArBA,aAAA,CAAuBpB,QAAQ,CAAC,CAAC,EAAAC,IAAA,CAAAC,GAAA,CAAG,EAAE,CAAI,EAAE,IAAC,CAC9D,CAAC,0BAAAlB,QAAA,CAAAqC,IAAA,MAAA5C,OAAA,GACH,kBAxCK,CAAAL,YAAYA,CAAAkD,EAAA,SAAAjD,IAAA,CAAAkD,KAAA,MAAAC,SAAA,OAwCjB,CAED,MAAO,CAAEpD,YAAY,CAAZA,YAAa,CAAC,CACzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}