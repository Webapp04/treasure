{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContractNFKeyStakingWithSigner}from\"hooks/blockchain/useHandleContracts\";import{useDispatch}from\"react-redux\";import ACTIONS from\"redux/action\";import{hexToNumber}from\"utils/blockchain\";export default function useTimeToTreasureAvailable(){var dispatch=useDispatch();var handleContractNFKeyStakingWithSigner=useContractNFKeyStakingWithSigner();var timeToTreasureAvailable=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(tokenId){var count,contractNFKeyStakingWithSigner,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:count=_args.length>1&&_args[1]!==undefined?_args[1]:3;_context.next=3;return handleContractNFKeyStakingWithSigner;case 3:contractNFKeyStakingWithSigner=_context.sent;return _context.abrupt(\"return\",contractNFKeyStakingWithSigner.getTimeToTreasureUnlock(tokenId).then(function(tx){//FIXME: 100->1000\nACTIONS.SET_BALANCE_TRESR_TIME_UNLOCK(dispatch,hexToNumber(tx===null||tx===void 0?void 0:tx._hex)*1000);return hexToNumber(tx===null||tx===void 0?void 0:tx._hex);}).catch(function(){return count?timeToTreasureAvailable(tokenId,count-1):null;}));case 5:case\"end\":return _context.stop();}},_callee);}));return function timeToTreasureAvailable(_x){return _ref.apply(this,arguments);};}();return{timeToTreasureAvailable:timeToTreasureAvailable};}","map":{"version":3,"names":["useContractNFKeyStakingWithSigner","useDispatch","ACTIONS","hexToNumber","useTimeToTreasureAvailable","dispatch","handleContractNFKeyStakingWithSigner","timeToTreasureAvailable","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","tokenId","count","contractNFKeyStakingWithSigner","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","sent","abrupt","getTimeToTreasureUnlock","then","tx","SET_BALANCE_TRESR_TIME_UNLOCK","_hex","catch","stop","_x","apply"],"sources":["/Users/apple/Documents/treasure/src/hooks/nft/useTimeToTreasureAvailable.js"],"sourcesContent":["import { useContractNFKeyStakingWithSigner } from \"hooks/blockchain/useHandleContracts\";\nimport { useDispatch } from \"react-redux\";\nimport ACTIONS from \"redux/action\";\nimport { hexToNumber } from \"utils/blockchain\";\n\nexport default function useTimeToTreasureAvailable() {\n  const dispatch = useDispatch();\n  const handleContractNFKeyStakingWithSigner =\n    useContractNFKeyStakingWithSigner();\n  const timeToTreasureAvailable = async (tokenId, count = 3) => {\n    const contractNFKeyStakingWithSigner =\n      await handleContractNFKeyStakingWithSigner;\n    return contractNFKeyStakingWithSigner\n      .getTimeToTreasureUnlock(tokenId)\n      .then((tx) => {\n        //FIXME: 100->1000\n        ACTIONS.SET_BALANCE_TRESR_TIME_UNLOCK(\n          dispatch,\n          hexToNumber(tx?._hex) * 1000\n        );\n        return hexToNumber(tx?._hex);\n      })\n      .catch(() =>\n        count ? timeToTreasureAvailable(tokenId, count - 1) : null\n      );\n  };\n  return { timeToTreasureAvailable };\n}\n"],"mappings":"0PAAA,OAASA,iCAAiC,KAAQ,qCAAqC,CACvF,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,OAAO,KAAM,cAAc,CAClC,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,cAAe,SAAS,CAAAC,0BAA0BA,CAAA,CAAG,CACnD,GAAM,CAAAC,QAAQ,CAAGJ,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAK,oCAAoC,CACxCN,iCAAiC,CAAC,CAAC,CACrC,GAAM,CAAAO,uBAAuB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,OAAO,MAAAC,KAAA,CAAAC,8BAAA,CAAAC,KAAA,CAAAC,SAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAER,KAAK,CAAAE,KAAA,CAAAO,MAAA,IAAAP,KAAA,MAAAQ,SAAA,CAAAR,KAAA,IAAG,CAAC,CAAAI,QAAA,CAAAE,IAAA,SAE/C,CAAAhB,oCAAoC,QADtCS,8BAA8B,CAAAK,QAAA,CAAAK,IAAA,QAAAL,QAAA,CAAAM,MAAA,UAE7BX,8BAA8B,CAClCY,uBAAuB,CAACd,OAAO,CAAC,CAChCe,IAAI,CAAC,SAACC,EAAE,CAAK,CACZ;AACA3B,OAAO,CAAC4B,6BAA6B,CACnCzB,QAAQ,CACRF,WAAW,CAAC0B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,CAAG,IAC1B,CAAC,CACD,MAAO,CAAA5B,WAAW,CAAC0B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEE,IAAI,CAAC,CAC9B,CAAC,CAAC,CACDC,KAAK,CAAC,iBACL,CAAAlB,KAAK,CAAGP,uBAAuB,CAACM,OAAO,CAAEC,KAAK,CAAG,CAAC,CAAC,CAAG,IAAI,EAC5D,CAAC,0BAAAM,QAAA,CAAAa,IAAA,MAAArB,OAAA,GACJ,kBAhBK,CAAAL,uBAAuBA,CAAA2B,EAAA,SAAA1B,IAAA,CAAA2B,KAAA,MAAAlB,SAAA,OAgB5B,CACD,MAAO,CAAEV,uBAAuB,CAAvBA,uBAAwB,CAAC,CACpC"},"metadata":{},"sourceType":"module","externalDependencies":[]}