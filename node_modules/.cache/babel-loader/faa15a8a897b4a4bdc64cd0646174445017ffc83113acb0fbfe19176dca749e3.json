{"ast":null,"code":"import _slicedToArray from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from\"react\";import\"./style.scss\";import{customStyles}from\"./styles\";import uploadImg from\"../../assets/images/marketplace/upload.svg\";import AccountComponent from\"../AccountComponent\";import defaultBanner from\"../../assets/images/marketplace/navbar_banner.jpg\";import useHandleCustomer from\"../../hooks/customer/useHandleCustomer\";import{useDispatch,useSelector}from\"react-redux\";import{selectUser}from\"redux/slice/userSlice\";import ACTIONS from\"redux/action\";import Modal from\"storybook/atom/Modal/modal\";// import Modal from \"react-modal\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NavBarEditMode=function NavBarEditMode(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose;var user=useSelector(selectUser);var dispatch=useDispatch();var fileRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),banner=_useState2[0],setBanner=_useState2[1];var handleCustomer=useHandleCustomer();var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),userInfo=_useState4[0],setUserInfo=_useState4[1];useEffect(function(){var _user$banner;setBanner(user!==null&&user!==void 0&&(_user$banner=user.banner)!==null&&_user$banner!==void 0&&_user$banner.length?user===null||user===void 0?void 0:user.banner:defaultBanner);},[user]);var uploadImage=function uploadImage(event){var _event$target;var reader=new FileReader();reader.readAsDataURL(event===null||event===void 0?void 0:(_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.files[0]);reader.onload=function(){setBanner(reader.result);ACTIONS.SET_ACCOUNT_BANNER_IMAGE(dispatch,reader.result);};};var onSave=function onSave(){var account=userInfo.account,linkList=userInfo.linkList,avatar=userInfo.avatar;handleCustomer.updateInfo({name:account,links:linkList,avatar:avatar,banner:banner});onClose();};var onCancel=function onCancel(){onClose();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,{isModalOpen:isOpen,handleClose:onClose,className:\"customNavbarEditModal\",bgImg:banner,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editModal\",children:[/*#__PURE__*/_jsx(AccountComponent,{isEditMode:true,setUserInfo:setUserInfo}),/*#__PURE__*/_jsxs(\"div\",{className:\"uploadImg\",onClick:function onClick(){var _fileRef$current;return fileRef===null||fileRef===void 0?void 0:(_fileRef$current=fileRef.current)===null||_fileRef$current===void 0?void 0:_fileRef$current.click();},children:[/*#__PURE__*/_jsx(\"img\",{src:uploadImg,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Upload baner image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileRef,hidden:true,multiple:true,onChange:uploadImage})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editModal__buttons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"account__save account__cancel\",onClick:onCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"account__save\",onClick:onSave,children:\"Save\"})]})]})});};export default NavBarEditMode;","map":{"version":3,"names":["React","useRef","useState","useEffect","customStyles","uploadImg","AccountComponent","defaultBanner","useHandleCustomer","useDispatch","useSelector","selectUser","ACTIONS","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NavBarEditMode","_ref","isOpen","onClose","user","dispatch","fileRef","_useState","_useState2","_slicedToArray","banner","setBanner","handleCustomer","_useState3","_useState4","userInfo","setUserInfo","_user$banner","length","uploadImage","event","_event$target","reader","FileReader","readAsDataURL","target","files","onload","result","SET_ACCOUNT_BANNER_IMAGE","onSave","account","linkList","avatar","updateInfo","name","links","onCancel","children","isModalOpen","handleClose","className","bgImg","isEditMode","onClick","_fileRef$current","current","click","src","alt","type","ref","hidden","multiple","onChange"],"sources":["/Users/apple/Documents/treasure/src/components/NavBarEditMode/index.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport \"./style.scss\";\nimport { customStyles } from \"./styles\";\nimport uploadImg from \"../../assets/images/marketplace/upload.svg\";\nimport AccountComponent from \"../AccountComponent\";\nimport defaultBanner from \"../../assets/images/marketplace/navbar_banner.jpg\";\nimport useHandleCustomer from \"../../hooks/customer/useHandleCustomer\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUser } from \"redux/slice/userSlice\";\nimport ACTIONS from \"redux/action\";\nimport Modal from \"storybook/atom/Modal/modal\";\n// import Modal from \"react-modal\";\n\nconst NavBarEditMode = ({ isOpen, onClose }) => {\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n  const fileRef = useRef();\n  const [banner, setBanner] = useState();\n  const handleCustomer = useHandleCustomer();\n  const [userInfo, setUserInfo] = useState({});\n\n  useEffect(() => {\n    setBanner(user?.banner?.length ? user?.banner : defaultBanner);\n  }, [user]);\n\n  const uploadImage = (event) => {\n    let reader = new FileReader();\n    reader.readAsDataURL(event?.target?.files[0]);\n    reader.onload = function () {\n      setBanner(reader.result);\n      ACTIONS.SET_ACCOUNT_BANNER_IMAGE(dispatch, reader.result);\n    };\n  };\n\n  const onSave = () => {\n    const { account, linkList, avatar } = userInfo;\n    handleCustomer.updateInfo({\n      name: account,\n      links: linkList,\n      avatar: avatar,\n      banner: banner,\n    });\n    onClose();\n  };\n\n  const onCancel = () => {\n    onClose();\n  };\n\n  return (\n    <>\n      <Modal\n        isModalOpen={isOpen}\n        handleClose={onClose}\n        className={`customNavbarEditModal`}\n        bgImg={banner}\n      >\n        <div className={\"editModal\"}>\n          <AccountComponent isEditMode={true} setUserInfo={setUserInfo} />\n\n          <div\n            className={\"uploadImg\"}\n            onClick={() => fileRef?.current?.click()}\n          >\n            <img src={uploadImg} alt={\"\"} />\n            <p>Upload baner image</p>\n            <input\n              type={\"file\"}\n              ref={fileRef}\n              hidden\n              multiple\n              onChange={uploadImage}\n            />\n          </div>\n        </div>\n        <div className={\"editModal__buttons\"}>\n          <div className={\"account__save account__cancel\"} onClick={onCancel}>\n            Cancel\n          </div>\n          <div className={\"account__save\"} onClick={onSave}>\n            Save\n          </div>\n        </div>\n      </Modal>\n      {/* {isOpen && (\n        <div className={\"editModal__buttons\"}>\n          <div className={\"account__save account__cancel\"} onClick={onCancel}>\n            Cancel\n          </div>\n          <div className={\"account__save\"} onClick={onSave}>\n            Save\n          </div>\n        </div>\n      )} */}\n    </>\n  );\n};\n\nexport default NavBarEditMode;\n"],"mappings":"qHAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,cAAc,CACrB,OAASC,YAAY,KAAQ,UAAU,CACvC,MAAO,CAAAC,SAAS,KAAM,4CAA4C,CAClE,MAAO,CAAAC,gBAAgB,KAAM,qBAAqB,CAClD,MAAO,CAAAC,aAAa,KAAM,mDAAmD,CAC7E,MAAO,CAAAC,iBAAiB,KAAM,wCAAwC,CACtE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,UAAU,KAAQ,uBAAuB,CAClD,MAAO,CAAAC,OAAO,KAAM,cAAc,CAClC,MAAO,CAAAC,KAAK,KAAM,4BAA4B,CAC9C;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEA,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAA4B,IAAtB,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CACvC,GAAM,CAAAC,IAAI,CAAGd,WAAW,CAACC,UAAU,CAAC,CACpC,GAAM,CAAAc,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAiB,OAAO,CAAGzB,MAAM,CAAC,CAAC,CACxB,IAAA0B,SAAA,CAA4BzB,QAAQ,CAAC,CAAC,CAAA0B,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,GAAM,CAAAI,cAAc,CAAGxB,iBAAiB,CAAC,CAAC,CAC1C,IAAAyB,UAAA,CAAgC/B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAgC,UAAA,CAAAL,cAAA,CAAAI,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5B/B,SAAS,CAAC,UAAM,KAAAkC,YAAA,CACdN,SAAS,CAACP,IAAI,SAAJA,IAAI,YAAAa,YAAA,CAAJb,IAAI,CAAEM,MAAM,UAAAO,YAAA,WAAZA,YAAA,CAAcC,MAAM,CAAGd,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,MAAM,CAAGvB,aAAa,CAAC,CAChE,CAAC,CAAE,CAACiB,IAAI,CAAC,CAAC,CAEV,GAAM,CAAAe,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,KAAK,CAAK,KAAAC,aAAA,CAC7B,GAAI,CAAAC,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC7BD,MAAM,CAACE,aAAa,CAACJ,KAAK,SAALA,KAAK,kBAAAC,aAAA,CAALD,KAAK,CAAEK,MAAM,UAAAJ,aAAA,iBAAbA,aAAA,CAAeK,KAAK,CAAC,CAAC,CAAC,CAAC,CAC7CJ,MAAM,CAACK,MAAM,CAAG,UAAY,CAC1BhB,SAAS,CAACW,MAAM,CAACM,MAAM,CAAC,CACxBpC,OAAO,CAACqC,wBAAwB,CAACxB,QAAQ,CAAEiB,MAAM,CAACM,MAAM,CAAC,CAC3D,CAAC,CACH,CAAC,CAED,GAAM,CAAAE,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,GAAQ,CAAAC,OAAO,CAAuBhB,QAAQ,CAAtCgB,OAAO,CAAEC,QAAQ,CAAajB,QAAQ,CAA7BiB,QAAQ,CAAEC,MAAM,CAAKlB,QAAQ,CAAnBkB,MAAM,CACjCrB,cAAc,CAACsB,UAAU,CAAC,CACxBC,IAAI,CAAEJ,OAAO,CACbK,KAAK,CAAEJ,QAAQ,CACfC,MAAM,CAAEA,MAAM,CACdvB,MAAM,CAAEA,MACV,CAAC,CAAC,CACFP,OAAO,CAAC,CAAC,CACX,CAAC,CAED,GAAM,CAAAkC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrBlC,OAAO,CAAC,CAAC,CACX,CAAC,CAED,mBACER,IAAA,CAAAI,SAAA,EAAAuC,QAAA,cACEzC,KAAA,CAACJ,KAAK,EACJ8C,WAAW,CAAErC,MAAO,CACpBsC,WAAW,CAAErC,OAAQ,CACrBsC,SAAS,wBAA0B,CACnCC,KAAK,CAAEhC,MAAO,CAAA4B,QAAA,eAEdzC,KAAA,QAAK4C,SAAS,CAAE,WAAY,CAAAH,QAAA,eAC1B3C,IAAA,CAACT,gBAAgB,EAACyD,UAAU,CAAE,IAAK,CAAC3B,WAAW,CAAEA,WAAY,CAAE,CAAC,cAEhEnB,KAAA,QACE4C,SAAS,CAAE,WAAY,CACvBG,OAAO,CAAE,SAAAA,QAAA,MAAAC,gBAAA,OAAM,CAAAvC,OAAO,SAAPA,OAAO,kBAAAuC,gBAAA,CAAPvC,OAAO,CAAEwC,OAAO,UAAAD,gBAAA,iBAAhBA,gBAAA,CAAkBE,KAAK,CAAC,CAAC,EAAC,CAAAT,QAAA,eAEzC3C,IAAA,QAAKqD,GAAG,CAAE/D,SAAU,CAACgE,GAAG,CAAE,EAAG,CAAE,CAAC,cAChCtD,IAAA,MAAA2C,QAAA,CAAG,oBAAkB,CAAG,CAAC,cACzB3C,IAAA,UACEuD,IAAI,CAAE,MAAO,CACbC,GAAG,CAAE7C,OAAQ,CACb8C,MAAM,MACNC,QAAQ,MACRC,QAAQ,CAAEnC,WAAY,CACvB,CAAC,EACC,CAAC,EACH,CAAC,cACNtB,KAAA,QAAK4C,SAAS,CAAE,oBAAqB,CAAAH,QAAA,eACnC3C,IAAA,QAAK8C,SAAS,CAAE,+BAAgC,CAACG,OAAO,CAAEP,QAAS,CAAAC,QAAA,CAAC,QAEpE,CAAK,CAAC,cACN3C,IAAA,QAAK8C,SAAS,CAAE,eAAgB,CAACG,OAAO,CAAEd,MAAO,CAAAQ,QAAA,CAAC,MAElD,CAAK,CAAC,EACH,CAAC,EACD,CAAC,CAWR,CAAC,CAEP,CAAC,CAED,cAAe,CAAAtC,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}