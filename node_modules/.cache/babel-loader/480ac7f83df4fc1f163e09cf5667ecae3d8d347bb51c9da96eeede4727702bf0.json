{"ast":null,"code":"import _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport webcrypto from '../webcrypto.js';\nimport lengths from './lengths.js';\nvar hashTypes = {\n  SHA1: 'SHA-1',\n  SHA256: 'SHA-256',\n  SHA512: 'SHA-512'\n};\nvar sign = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(key, data) {\n    var buf;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return webcrypto.get().subtle.sign({\n            name: 'HMAC'\n          }, key, data);\n        case 2:\n          buf = _context.sent;\n          return _context.abrupt(\"return\", new Uint8Array(buf, 0, buf.byteLength));\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function sign(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport function create(_x3, _x4) {\n  return _create.apply(this, arguments);\n}\nfunction _create() {\n  _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(hashType, secret) {\n    var hash, key;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          hash = hashTypes[hashType];\n          _context3.next = 3;\n          return webcrypto.get().subtle.importKey('raw', secret, {\n            name: 'HMAC',\n            hash: {\n              name: hash\n            }\n          }, false, ['sign']);\n        case 3:\n          key = _context3.sent;\n          return _context3.abrupt(\"return\", {\n            digest: function digest(data) {\n              return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n                return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                  while (1) switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.next = 2;\n                      return sign(key, data);\n                    case 2:\n                      return _context2.abrupt(\"return\", _context2.sent);\n                    case 3:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }, _callee2);\n              }))();\n            },\n            length: lengths[hashType]\n          });\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _create.apply(this, arguments);\n}","map":{"version":3,"names":["webcrypto","lengths","hashTypes","SHA1","SHA256","SHA512","sign","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","key","data","buf","wrap","_callee$","_context","prev","next","get","subtle","name","sent","abrupt","Uint8Array","byteLength","stop","_x","_x2","apply","arguments","create","_x3","_x4","_create","_callee3","hashType","secret","hash","_callee3$","_context3","importKey","digest","_callee2","_callee2$","_context2","length"],"sources":["/Users/apple/Documents/treasure/node_modules/@libp2p/crypto/src/hmac/index-browser.ts"],"sourcesContent":["import webcrypto from '../webcrypto.js'\nimport lengths from './lengths.js'\n\nconst hashTypes = {\n  SHA1: 'SHA-1',\n  SHA256: 'SHA-256',\n  SHA512: 'SHA-512'\n}\n\nconst sign = async (key: CryptoKey, data: Uint8Array) => {\n  const buf = await webcrypto.get().subtle.sign({ name: 'HMAC' }, key, data)\n  return new Uint8Array(buf, 0, buf.byteLength)\n}\n\nexport async function create (hashType: 'SHA1' | 'SHA256' | 'SHA512', secret: Uint8Array) {\n  const hash = hashTypes[hashType]\n\n  const key = await webcrypto.get().subtle.importKey(\n    'raw',\n    secret,\n    {\n      name: 'HMAC',\n      hash: { name: hash }\n    },\n    false,\n    ['sign']\n  )\n\n  return {\n    async digest (data: Uint8Array) { // eslint-disable-line require-await\n      return await sign(key, data)\n    },\n    length: lengths[hashType]\n  }\n}\n"],"mappings":";;AAAA,OAAOA,SAAS,MAAM,iBAAiB;AACvC,OAAOC,OAAO,MAAM,cAAc;AAElC,IAAMC,SAAS,GAAG;EAChBC,IAAI,EAAE,OAAO;EACbC,MAAM,EAAE,SAAS;EACjBC,MAAM,EAAE;CACT;AAED,IAAMC,IAAI;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,GAAc,EAAEC,IAAgB;IAAA,IAAAC,GAAA;IAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OAChCnB,SAAS,CAACoB,GAAG,EAAE,CAACC,MAAM,CAACf,IAAI,CAAC;YAAEgB,IAAI,EAAE;UAAM,CAAE,EAAEV,GAAG,EAAEC,IAAI,CAAC;QAAA;UAApEC,GAAG,GAAAG,QAAA,CAAAM,IAAA;UAAA,OAAAN,QAAA,CAAAO,MAAA,WACF,IAAIC,UAAU,CAACX,GAAG,EAAE,CAAC,EAAEA,GAAG,CAACY,UAAU,CAAC;QAAA;QAAA;UAAA,OAAAT,QAAA,CAAAU,IAAA;MAAA;IAAA,GAAAhB,OAAA;EAAA,CAC9C;EAAA,gBAHKL,IAAIA,CAAAsB,EAAA,EAAAC,GAAA;IAAA,OAAAtB,IAAA,CAAAuB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAGT;AAED,gBAAsBC,MAAMA,CAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,OAAA,CAAAL,KAAA,OAAAC,SAAA;AAAA;AAoB3B,SAAAI,QAAA;EAAAA,OAAA,GAAA3B,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CApBM,SAAA0B,SAAuBC,QAAsC,EAAEC,MAAkB;IAAA,IAAAC,IAAA,EAAA3B,GAAA;IAAA,OAAAH,mBAAA,GAAAM,IAAA,UAAAyB,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAvB,IAAA,GAAAuB,SAAA,CAAAtB,IAAA;QAAA;UAChFoB,IAAI,GAAGrC,SAAS,CAACmC,QAAQ,CAAC;UAAAI,SAAA,CAAAtB,IAAA;UAAA,OAEdnB,SAAS,CAACoB,GAAG,EAAE,CAACC,MAAM,CAACqB,SAAS,CAChD,KAAK,EACLJ,MAAM,EACN;YACEhB,IAAI,EAAE,MAAM;YACZiB,IAAI,EAAE;cAAEjB,IAAI,EAAEiB;YAAI;WACnB,EACD,KAAK,EACL,CAAC,MAAM,CAAC,CACT;QAAA;UATK3B,GAAG,GAAA6B,SAAA,CAAAlB,IAAA;UAAA,OAAAkB,SAAA,CAAAjB,MAAA,WAWF;YACCmB,MAAM,WAAAA,OAAE9B,IAAgB;cAAA,OAAAL,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAkC,SAAA;gBAAA,OAAAnC,mBAAA,GAAAM,IAAA,UAAA8B,UAAAC,SAAA;kBAAA,kBAAAA,SAAA,CAAA5B,IAAA,GAAA4B,SAAA,CAAA3B,IAAA;oBAAA;sBAAA2B,SAAA,CAAA3B,IAAA;sBAAA,OACfb,IAAI,CAACM,GAAG,EAAEC,IAAI,CAAC;oBAAA;sBAAA,OAAAiC,SAAA,CAAAtB,MAAA,WAAAsB,SAAA,CAAAvB,IAAA;oBAAA;oBAAA;sBAAA,OAAAuB,SAAA,CAAAnB,IAAA;kBAAA;gBAAA,GAAAiB,QAAA;cAAA;YAC9B,CAAC;YACDG,MAAM,EAAE9C,OAAO,CAACoC,QAAQ;WACzB;QAAA;QAAA;UAAA,OAAAI,SAAA,CAAAd,IAAA;MAAA;IAAA,GAAAS,QAAA;EAAA,CACF;EAAA,OAAAD,OAAA,CAAAL,KAAA,OAAAC,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}