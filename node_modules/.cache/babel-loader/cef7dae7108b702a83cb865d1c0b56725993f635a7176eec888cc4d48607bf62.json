{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import AirdropApi from\"api/AirdropApi\";import{ALERT_STATUS_FAILURE,ALERT_STATUS_SUCCESS,CLAIM_BONUS_REWARDS_ALERT}from\"constant/alert\";import{useContractDailyBonusRewardsWithSigner}from\"hooks/blockchain/useHandleContracts\";import useHandleNFT from\"hooks/blockchain/useHandleNFT\";import{useDispatch,useSelector}from\"react-redux\";import ACTIONS from\"redux/action\";import{selectUser}from\"redux/slice/userSlice\";import useGetKeyLevelBonusReward from\"./useGetKeyLevelBonusReward\";import useGetJlpSmrtBonusReward from\"./useGetJlpSmrtBonusReward\";import useGetJlpTresrBonusReward from\"./useGetJlpTresrBonusReward\";import useGetVeTresrBonusRewards from\"./useGetVeTresrBonusRewards\";export default function useClaimBonus(){var user=useSelector(selectUser);var dispatch=useDispatch();var handleContractDailyBonusRewardsWithSigner=useContractDailyBonusRewardsWithSigner();var handleNFT=useHandleNFT();var handleGetKeyLevelBonusReward=useGetKeyLevelBonusReward();var handleGetJlpSmrtBonusReward=useGetJlpSmrtBonusReward();var handleGetJlpTresrBonusReward=useGetJlpTresrBonusReward();var handleGetVeTresrBonusRewards=useGetVeTresrBonusRewards();var claimBonus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var contractDailyBonusRewardsWithSigner;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(user!==null&&user!==void 0&&user.wallet_id){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return handleContractDailyBonusRewardsWithSigner;case 4:contractDailyBonusRewardsWithSigner=_context2.sent;return _context2.abrupt(\"return\",contractDailyBonusRewardsWithSigner.claimBonusReward().then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(tx){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:new AirdropApi().logger({wallet_id:user===null||user===void 0?void 0:user.wallet_id,type:\"PENDING\",action:\"claimBonus\",description:\"Claimed bonus\",tx:JSON.stringify(tx)});_context.next=3;return tx.wait();case 3:ACTIONS.SET_TRANSANCTION_HASH(dispatch,tx===null||tx===void 0?void 0:tx.hash);// await sleep(15);\nhandleNFT.balanceOfTRESR(user===null||user===void 0?void 0:user.wallet_id);handleNFT.getAVAXBalance(user===null||user===void 0?void 0:user.wallet_id);handleNFT.getBonusPoolAllocation();handleGetKeyLevelBonusReward.getKeyLevelBonusReward();handleGetJlpSmrtBonusReward.getJlpSmrtBonusReward();handleGetJlpTresrBonusReward.getJlpTresrBonusReward();handleGetVeTresrBonusRewards.getVeTresrBonusReward();ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_SUCCESS,CLAIM_BONUS_REWARDS_ALERT(true));case 12:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){new AirdropApi().logger({wallet_id:user===null||user===void 0?void 0:user.wallet_id,type:\"ERROR\",action:\"claimBonus\",description:\"Claimed bonus\",error:JSON.stringify(err)});ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_FAILURE,CLAIM_BONUS_REWARDS_ALERT(false));return null;}));case 6:case\"end\":return _context2.stop();}},_callee2);}));return function claimBonus(){return _ref.apply(this,arguments);};}();return{claimBonus:claimBonus};}","map":{"version":3,"names":["AirdropApi","ALERT_STATUS_FAILURE","ALERT_STATUS_SUCCESS","CLAIM_BONUS_REWARDS_ALERT","useContractDailyBonusRewardsWithSigner","useHandleNFT","useDispatch","useSelector","ACTIONS","selectUser","useGetKeyLevelBonusReward","useGetJlpSmrtBonusReward","useGetJlpTresrBonusReward","useGetVeTresrBonusRewards","useClaimBonus","user","dispatch","handleContractDailyBonusRewardsWithSigner","handleNFT","handleGetKeyLevelBonusReward","handleGetJlpSmrtBonusReward","handleGetJlpTresrBonusReward","handleGetVeTresrBonusRewards","claimBonus","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","contractDailyBonusRewardsWithSigner","wrap","_callee2$","_context2","prev","next","wallet_id","abrupt","sent","claimBonusReward","then","_ref2","_callee","tx","_callee$","_context","logger","type","action","description","JSON","stringify","wait","SET_TRANSANCTION_HASH","hash","balanceOfTRESR","getAVAXBalance","getBonusPoolAllocation","getKeyLevelBonusReward","getJlpSmrtBonusReward","getJlpTresrBonusReward","getVeTresrBonusReward","SET_ALERT","stop","_x","apply","arguments","catch","err","error"],"sources":["/Users/apple/Documents/treasure/src/hooks/rewards/useClaimBonus.js"],"sourcesContent":["import AirdropApi from \"api/AirdropApi\";\nimport {\n  ALERT_STATUS_FAILURE,\n  ALERT_STATUS_SUCCESS,\n  CLAIM_BONUS_REWARDS_ALERT,\n} from \"constant/alert\";\nimport { useContractDailyBonusRewardsWithSigner } from \"hooks/blockchain/useHandleContracts\";\nimport useHandleNFT from \"hooks/blockchain/useHandleNFT\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ACTIONS from \"redux/action\";\nimport { selectUser } from \"redux/slice/userSlice\";\nimport useGetKeyLevelBonusReward from \"./useGetKeyLevelBonusReward\";\nimport useGetJlpSmrtBonusReward from \"./useGetJlpSmrtBonusReward\";\nimport useGetJlpTresrBonusReward from \"./useGetJlpTresrBonusReward\";\nimport useGetVeTresrBonusRewards from \"./useGetVeTresrBonusRewards\";\n\nexport default function useClaimBonus() {\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n  const handleContractDailyBonusRewardsWithSigner =\n    useContractDailyBonusRewardsWithSigner();\n  const handleNFT = useHandleNFT();\n  const handleGetKeyLevelBonusReward = useGetKeyLevelBonusReward();\n  const handleGetJlpSmrtBonusReward = useGetJlpSmrtBonusReward();\n  const handleGetJlpTresrBonusReward = useGetJlpTresrBonusReward();\n  const handleGetVeTresrBonusRewards = useGetVeTresrBonusRewards();\n\n  const claimBonus = async () => {\n    if (!user?.wallet_id) return;\n    const contractDailyBonusRewardsWithSigner =\n      await handleContractDailyBonusRewardsWithSigner;\n    return contractDailyBonusRewardsWithSigner\n      .claimBonusReward()\n      .then(async (tx) => {\n        new AirdropApi().logger({\n          wallet_id: user?.wallet_id,\n          type: \"PENDING\",\n          action: \"claimBonus\",\n          description: `Claimed bonus`,\n          tx: JSON.stringify(tx),\n        });\n        await tx.wait();\n        ACTIONS.SET_TRANSANCTION_HASH(dispatch, tx?.hash);\n        // await sleep(15);\n        handleNFT.balanceOfTRESR(user?.wallet_id);\n        handleNFT.getAVAXBalance(user?.wallet_id);\n        handleNFT.getBonusPoolAllocation();\n        handleGetKeyLevelBonusReward.getKeyLevelBonusReward();\n        handleGetJlpSmrtBonusReward.getJlpSmrtBonusReward();\n        handleGetJlpTresrBonusReward.getJlpTresrBonusReward();\n        handleGetVeTresrBonusRewards.getVeTresrBonusReward();\n        ACTIONS.SET_ALERT(\n          dispatch,\n          true,\n          ALERT_STATUS_SUCCESS,\n          CLAIM_BONUS_REWARDS_ALERT(true)\n        );\n      })\n      .catch((err) => {\n        new AirdropApi().logger({\n          wallet_id: user?.wallet_id,\n          type: \"ERROR\",\n          action: \"claimBonus\",\n          description: `Claimed bonus`,\n          error: JSON.stringify(err),\n        });\n        ACTIONS.SET_ALERT(\n          dispatch,\n          true,\n          ALERT_STATUS_FAILURE,\n          CLAIM_BONUS_REWARDS_ALERT(false)\n        );\n        return null;\n      });\n  };\n  return { claimBonus };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}