{"ast":null,"code":"import _objectSpread from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n/**\n * @typedef {object} FixedChunkerOptions\n * @property {'fixed'} chunker\n * @property {number} [maxChunkSize]\n *\n * @typedef {object} RabinChunkerOptions\n * @property {'rabin'} chunker\n * @property {number} avgChunkSize\n * @property {number} [minChunkSize]\n * @property {number} [maxChunkSize]\n *\n * @typedef {FixedChunkerOptions|RabinChunkerOptions} ChunkerOptions\n *\n * Parses chunker string into options used by DAGBuilder in ipfs-unixfs-engine\n *\n *\n * @param  {string} [chunker] - Chunker algorithm supported formats:\n * \"size-{size}\"\n * \"rabin\"\n * \"rabin-{avg}\"\n * \"rabin-{min}-{avg}-{max}\"\n *\n * @returns {ChunkerOptions}   Chunker options for DAGBuilder\n */\nexport var parseChunkerString = function parseChunkerString(chunker) {\n  if (!chunker) {\n    return {\n      chunker: 'fixed'\n    };\n  } else if (chunker.startsWith('size-')) {\n    var sizeStr = chunker.split('-')[1];\n    var size = parseInt(sizeStr);\n    if (isNaN(size)) {\n      throw new Error('Chunker parameter size must be an integer');\n    }\n    return {\n      chunker: 'fixed',\n      maxChunkSize: size\n    };\n  } else if (chunker.startsWith('rabin')) {\n    return _objectSpread({\n      chunker: 'rabin'\n    }, parseRabinString(chunker));\n  } else {\n    throw new Error(\"Unrecognized chunker option: \".concat(chunker));\n  }\n};\n\n/**\n * @typedef {object} RabinChunkerSettings\n * @property {number} avgChunkSize\n * @property {number} [minChunkSize]\n * @property {number} [maxChunkSize]\n *\n * Parses rabin chunker string\n *\n * @param  {string}   chunker - Chunker algorithm supported formats:\n * \"rabin\"\n * \"rabin-{avg}\"\n * \"rabin-{min}-{avg}-{max}\"\n *\n * @returns {RabinChunkerSettings}   rabin chunker options\n */\nexport var parseRabinString = function parseRabinString(chunker) {\n  var options = {};\n  var parts = chunker.split('-');\n  switch (parts.length) {\n    case 1:\n      options.avgChunkSize = 262144;\n      break;\n    case 2:\n      options.avgChunkSize = parseChunkSize(parts[1], 'avg');\n      break;\n    case 4:\n      options.minChunkSize = parseChunkSize(parts[1], 'min');\n      options.avgChunkSize = parseChunkSize(parts[2], 'avg');\n      options.maxChunkSize = parseChunkSize(parts[3], 'max');\n      break;\n    default:\n      throw new Error('Incorrect chunker format (expected \"rabin\" \"rabin-[avg]\" or \"rabin-[min]-[avg]-[max]\"');\n  }\n  return options;\n};\n\n/**\n *\n * @param {string} str\n * @param {string} name\n * @returns {number}\n */\nexport var parseChunkSize = function parseChunkSize(str, name) {\n  var size = parseInt(str);\n  if (isNaN(size)) {\n    throw new Error(\"Chunker parameter \".concat(name, \" must be an integer\"));\n  }\n  return size;\n};","map":{"version":3,"names":["parseChunkerString","chunker","startsWith","sizeStr","split","size","parseInt","isNaN","Error","maxChunkSize","_objectSpread","parseRabinString","concat","options","parts","length","avgChunkSize","parseChunkSize","minChunkSize","str","name"],"sources":["/Users/apple/Documents/treasure/node_modules/ipfs-core/src/components/add-all/utils.js"],"sourcesContent":["/**\n * @typedef {object} FixedChunkerOptions\n * @property {'fixed'} chunker\n * @property {number} [maxChunkSize]\n *\n * @typedef {object} RabinChunkerOptions\n * @property {'rabin'} chunker\n * @property {number} avgChunkSize\n * @property {number} [minChunkSize]\n * @property {number} [maxChunkSize]\n *\n * @typedef {FixedChunkerOptions|RabinChunkerOptions} ChunkerOptions\n *\n * Parses chunker string into options used by DAGBuilder in ipfs-unixfs-engine\n *\n *\n * @param  {string} [chunker] - Chunker algorithm supported formats:\n * \"size-{size}\"\n * \"rabin\"\n * \"rabin-{avg}\"\n * \"rabin-{min}-{avg}-{max}\"\n *\n * @returns {ChunkerOptions}   Chunker options for DAGBuilder\n */\nexport const parseChunkerString = (chunker) => {\n  if (!chunker) {\n    return {\n      chunker: 'fixed'\n    }\n  } else if (chunker.startsWith('size-')) {\n    const sizeStr = chunker.split('-')[1]\n    const size = parseInt(sizeStr)\n    if (isNaN(size)) {\n      throw new Error('Chunker parameter size must be an integer')\n    }\n    return {\n      chunker: 'fixed',\n      maxChunkSize: size\n    }\n  } else if (chunker.startsWith('rabin')) {\n    return {\n      chunker: 'rabin',\n      ...parseRabinString(chunker)\n    }\n  } else {\n    throw new Error(`Unrecognized chunker option: ${chunker}`)\n  }\n}\n\n/**\n * @typedef {object} RabinChunkerSettings\n * @property {number} avgChunkSize\n * @property {number} [minChunkSize]\n * @property {number} [maxChunkSize]\n *\n * Parses rabin chunker string\n *\n * @param  {string}   chunker - Chunker algorithm supported formats:\n * \"rabin\"\n * \"rabin-{avg}\"\n * \"rabin-{min}-{avg}-{max}\"\n *\n * @returns {RabinChunkerSettings}   rabin chunker options\n */\nexport const parseRabinString = (chunker) => {\n  const options = {}\n  const parts = chunker.split('-')\n  switch (parts.length) {\n    case 1:\n      options.avgChunkSize = 262144\n      break\n    case 2:\n      options.avgChunkSize = parseChunkSize(parts[1], 'avg')\n      break\n    case 4:\n      options.minChunkSize = parseChunkSize(parts[1], 'min')\n      options.avgChunkSize = parseChunkSize(parts[2], 'avg')\n      options.maxChunkSize = parseChunkSize(parts[3], 'max')\n      break\n    default:\n      throw new Error('Incorrect chunker format (expected \"rabin\" \"rabin-[avg]\" or \"rabin-[min]-[avg]-[max]\"')\n  }\n\n  return options\n}\n\n/**\n *\n * @param {string} str\n * @param {string} name\n * @returns {number}\n */\nexport const parseChunkSize = (str, name) => {\n  const size = parseInt(str)\n  if (isNaN(size)) {\n    throw new Error(`Chunker parameter ${name} must be an integer`)\n  }\n\n  return size\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMA,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,OAAO,EAAK;EAC7C,IAAI,CAACA,OAAO,EAAE;IACZ,OAAO;MACLA,OAAO,EAAE;IACX,CAAC;EACH,CAAC,MAAM,IAAIA,OAAO,CAACC,UAAU,CAAC,OAAO,CAAC,EAAE;IACtC,IAAMC,OAAO,GAAGF,OAAO,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrC,IAAMC,IAAI,GAAGC,QAAQ,CAACH,OAAO,CAAC;IAC9B,IAAII,KAAK,CAACF,IAAI,CAAC,EAAE;MACf,MAAM,IAAIG,KAAK,CAAC,2CAA2C,CAAC;IAC9D;IACA,OAAO;MACLP,OAAO,EAAE,OAAO;MAChBQ,YAAY,EAAEJ;IAChB,CAAC;EACH,CAAC,MAAM,IAAIJ,OAAO,CAACC,UAAU,CAAC,OAAO,CAAC,EAAE;IACtC,OAAAQ,aAAA;MACET,OAAO,EAAE;IAAO,GACbU,gBAAgB,CAACV,OAAO,CAAC;EAEhC,CAAC,MAAM;IACL,MAAM,IAAIO,KAAK,iCAAAI,MAAA,CAAiCX,OAAO,CAAE,CAAC;EAC5D;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMU,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIV,OAAO,EAAK;EAC3C,IAAMY,OAAO,GAAG,CAAC,CAAC;EAClB,IAAMC,KAAK,GAAGb,OAAO,CAACG,KAAK,CAAC,GAAG,CAAC;EAChC,QAAQU,KAAK,CAACC,MAAM;IAClB,KAAK,CAAC;MACJF,OAAO,CAACG,YAAY,GAAG,MAAM;MAC7B;IACF,KAAK,CAAC;MACJH,OAAO,CAACG,YAAY,GAAGC,cAAc,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;MACtD;IACF,KAAK,CAAC;MACJD,OAAO,CAACK,YAAY,GAAGD,cAAc,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;MACtDD,OAAO,CAACG,YAAY,GAAGC,cAAc,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;MACtDD,OAAO,CAACJ,YAAY,GAAGQ,cAAc,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;MACtD;IACF;MACE,MAAM,IAAIN,KAAK,CAAC,uFAAuF,CAAC;EAC5G;EAEA,OAAOK,OAAO;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMI,cAAc,GAAG,SAAjBA,cAAcA,CAAIE,GAAG,EAAEC,IAAI,EAAK;EAC3C,IAAMf,IAAI,GAAGC,QAAQ,CAACa,GAAG,CAAC;EAC1B,IAAIZ,KAAK,CAACF,IAAI,CAAC,EAAE;IACf,MAAM,IAAIG,KAAK,sBAAAI,MAAA,CAAsBQ,IAAI,wBAAqB,CAAC;EACjE;EAEA,OAAOf,IAAI;AACb,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}