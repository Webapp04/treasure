{"ast":null,"code":"import _objectSpread from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _wrapAsyncGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js\";\nimport _awaitAsyncGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js\";\nimport _asyncGeneratorDelegate from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncGeneratorDelegate.js\";\nimport _asyncIterator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncIterator.js\";\nimport { BaseDatastore } from './base.js';\nimport map from 'it-map';\nimport { pipe } from 'it-pipe';\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('./types').KeyTransform} KeyTransform\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * A datastore shim, that wraps around a given datastore, changing\n * the way keys look to the user, for example namespacing\n * keys, reversing them, etc.\n *\n * @implements {Datastore}\n */\nexport var KeyTransformDatastore = /*#__PURE__*/function (_BaseDatastore) {\n  _inherits(KeyTransformDatastore, _BaseDatastore);\n  var _super = _createSuper(KeyTransformDatastore);\n  /**\n   * @param {Datastore} child\n   * @param {KeyTransform} transform\n   */\n  function KeyTransformDatastore(child, transform) {\n    var _this4;\n    _classCallCheck(this, KeyTransformDatastore);\n    _this4 = _super.call(this);\n    _this4.child = child;\n    _this4.transform = transform;\n    return _this4;\n  }\n  _createClass(KeyTransformDatastore, [{\n    key: \"open\",\n    value: function open() {\n      return this.child.open();\n    }\n\n    /**\n     * @param {Key} key\n     * @param {Uint8Array} val\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"put\",\n    value: function put(key, val, options) {\n      return this.child.put(this.transform.convert(key), val, options);\n    }\n\n    /**\n     * @param {Key} key\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"get\",\n    value: function get(key, options) {\n      return this.child.get(this.transform.convert(key), options);\n    }\n\n    /**\n     * @param {Key} key\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"has\",\n    value: function has(key, options) {\n      return this.child.has(this.transform.convert(key), options);\n    }\n\n    /**\n     * @param {Key} key\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"delete\",\n    value: function _delete(key, options) {\n      return this.child.delete(this.transform.convert(key), options);\n    }\n\n    /**\n     * @param {AwaitIterable<Pair>} source\n     * @param {Options} [options]\n     * @returns {AsyncIterable<Pair>}\n     */\n  }, {\n    key: \"putMany\",\n    value: function putMany(source) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var transform, child;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              transform = _this.transform;\n              child = _this.child;\n              return _context4.delegateYield(_asyncGeneratorDelegate(_asyncIterator(pipe(source, /*#__PURE__*/function () {\n                var _ref = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(source) {\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        return _context.delegateYield(_asyncGeneratorDelegate(_asyncIterator(map(source, function (_ref9) {\n                          var key = _ref9.key,\n                            value = _ref9.value;\n                          return {\n                            key: transform.convert(key),\n                            value: value\n                          };\n                        })), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }(), /*#__PURE__*/function () {\n                var _ref2 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(source) {\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) switch (_context2.prev = _context2.next) {\n                      case 0:\n                        return _context2.delegateYield(_asyncGeneratorDelegate(_asyncIterator(child.putMany(source, options)), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }, _callee2);\n                }));\n                return function (_x2) {\n                  return _ref2.apply(this, arguments);\n                };\n              }(), /*#__PURE__*/function () {\n                var _ref3 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(source) {\n                  return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                    while (1) switch (_context3.prev = _context3.next) {\n                      case 0:\n                        return _context3.delegateYield(_asyncGeneratorDelegate(_asyncIterator(map(source, function (_ref10) {\n                          var key = _ref10.key,\n                            value = _ref10.value;\n                          return {\n                            key: transform.invert(key),\n                            value: value\n                          };\n                        })), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }, _callee3);\n                }));\n                return function (_x3) {\n                  return _ref3.apply(this, arguments);\n                };\n              }())), _awaitAsyncGenerator), \"t0\", 3);\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }))();\n    }\n\n    /**\n     * @param {AwaitIterable<Key>} source\n     * @param {Options} [options]\n     * @returns {AsyncIterable<Uint8Array>}\n     */\n  }, {\n    key: \"getMany\",\n    value: function getMany(source) {\n      var _this2 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var transform, child;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              transform = _this2.transform;\n              child = _this2.child;\n              return _context7.delegateYield(_asyncGeneratorDelegate(_asyncIterator(pipe(source, /*#__PURE__*/function () {\n                var _ref4 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(source) {\n                  return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                    while (1) switch (_context5.prev = _context5.next) {\n                      case 0:\n                        return _context5.delegateYield(_asyncGeneratorDelegate(_asyncIterator(map(source, function (key) {\n                          return transform.convert(key);\n                        })), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }, _callee5);\n                }));\n                return function (_x4) {\n                  return _ref4.apply(this, arguments);\n                };\n              }(), /*#__PURE__*/function () {\n                var _ref5 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(source) {\n                  return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                    while (1) switch (_context6.prev = _context6.next) {\n                      case 0:\n                        return _context6.delegateYield(_asyncGeneratorDelegate(_asyncIterator(child.getMany(source, options)), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }, _callee6);\n                }));\n                return function (_x5) {\n                  return _ref5.apply(this, arguments);\n                };\n              }())), _awaitAsyncGenerator), \"t0\", 3);\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7);\n      }))();\n    }\n\n    /**\n     * @param {AwaitIterable<Key>} source\n     * @param {Options} [options]\n     * @returns {AsyncIterable<Key>}\n     */\n  }, {\n    key: \"deleteMany\",\n    value: function deleteMany(source) {\n      var _this3 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n        var transform, child;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              transform = _this3.transform;\n              child = _this3.child;\n              return _context11.delegateYield(_asyncGeneratorDelegate(_asyncIterator(pipe(source, /*#__PURE__*/function () {\n                var _ref6 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(source) {\n                  return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n                    while (1) switch (_context8.prev = _context8.next) {\n                      case 0:\n                        return _context8.delegateYield(_asyncGeneratorDelegate(_asyncIterator(map(source, function (key) {\n                          return transform.convert(key);\n                        })), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context8.stop();\n                    }\n                  }, _callee8);\n                }));\n                return function (_x6) {\n                  return _ref6.apply(this, arguments);\n                };\n              }(), /*#__PURE__*/function () {\n                var _ref7 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(source) {\n                  return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n                    while (1) switch (_context9.prev = _context9.next) {\n                      case 0:\n                        return _context9.delegateYield(_asyncGeneratorDelegate(_asyncIterator(child.deleteMany(source, options)), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context9.stop();\n                    }\n                  }, _callee9);\n                }));\n                return function (_x7) {\n                  return _ref7.apply(this, arguments);\n                };\n              }(), /*#__PURE__*/function () {\n                var _ref8 = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(source) {\n                  return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n                    while (1) switch (_context10.prev = _context10.next) {\n                      case 0:\n                        return _context10.delegateYield(_asyncGeneratorDelegate(_asyncIterator(map(source, function (key) {\n                          return transform.invert(key);\n                        })), _awaitAsyncGenerator), \"t0\", 1);\n                      case 1:\n                      case \"end\":\n                        return _context10.stop();\n                    }\n                  }, _callee10);\n                }));\n                return function (_x8) {\n                  return _ref8.apply(this, arguments);\n                };\n              }())), _awaitAsyncGenerator), \"t0\", 3);\n            case 3:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11);\n      }))();\n    }\n\n    /**\n     * @returns {Batch}\n     */\n  }, {\n    key: \"batch\",\n    value: function batch() {\n      var _this5 = this;\n      var b = this.child.batch();\n      return {\n        put: function put(key, value) {\n          b.put(_this5.transform.convert(key), value);\n        },\n        delete: function _delete(key) {\n          b.delete(_this5.transform.convert(key));\n        },\n        commit: function commit(options) {\n          return b.commit(options);\n        }\n      };\n    }\n\n    /**\n     * @param {Query} q\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"query\",\n    value: function query(q, options) {\n      var _this6 = this;\n      /** @type {Query} */\n      var query = _objectSpread({}, q);\n      query.filters = (query.filters || []).map(function (filter) {\n        return function (_ref11) {\n          var key = _ref11.key,\n            value = _ref11.value;\n          return filter({\n            key: _this6.transform.convert(key),\n            value: value\n          });\n        };\n      });\n      var prefix = q.prefix;\n      if (prefix != null && prefix !== '/') {\n        delete query.prefix;\n        query.filters.push(function (_ref12) {\n          var key = _ref12.key;\n          return _this6.transform.invert(key).toString().startsWith(prefix);\n        });\n      }\n      if (query.orders) {\n        query.orders = query.orders.map(function (order) {\n          return function (a, b) {\n            return order({\n              key: _this6.transform.invert(a.key),\n              value: a.value\n            }, {\n              key: _this6.transform.invert(b.key),\n              value: b.value\n            });\n          };\n        });\n      }\n      return map(this.child.query(query, options), function (_ref13) {\n        var key = _ref13.key,\n          value = _ref13.value;\n        return {\n          key: _this6.transform.invert(key),\n          value: value\n        };\n      });\n    }\n\n    /**\n     * @param {KeyQuery} q\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"queryKeys\",\n    value: function queryKeys(q, options) {\n      var _this7 = this;\n      var query = _objectSpread({}, q);\n      query.filters = (query.filters || []).map(function (filter) {\n        return function (key) {\n          return filter(_this7.transform.convert(key));\n        };\n      });\n      var prefix = q.prefix;\n      if (prefix != null && prefix !== '/') {\n        delete query.prefix;\n        query.filters.push(function (key) {\n          return _this7.transform.invert(key).toString().startsWith(prefix);\n        });\n      }\n      if (query.orders) {\n        query.orders = query.orders.map(function (order) {\n          return function (a, b) {\n            return order(_this7.transform.invert(a), _this7.transform.invert(b));\n          };\n        });\n      }\n      return map(this.child.queryKeys(query, options), function (key) {\n        return _this7.transform.invert(key);\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      return this.child.close();\n    }\n  }]);\n  return KeyTransformDatastore;\n}(BaseDatastore);","map":{"version":3,"names":["BaseDatastore","map","pipe","KeyTransformDatastore","_BaseDatastore","_inherits","_super","_createSuper","child","transform","_this4","_classCallCheck","call","_createClass","key","value","open","put","val","options","convert","get","has","_delete","delete","putMany","source","_this","arguments","length","undefined","_wrapAsyncGenerator","_regeneratorRuntime","mark","_callee4","wrap","_callee4$","_context4","prev","next","delegateYield","_asyncGeneratorDelegate","_asyncIterator","_ref","_callee","_callee$","_context","_ref9","_awaitAsyncGenerator","stop","_x","apply","_ref2","_callee2","_callee2$","_context2","_x2","_ref3","_callee3","_callee3$","_context3","_ref10","invert","_x3","getMany","_this2","_callee7","_callee7$","_context7","_ref4","_callee5","_callee5$","_context5","_x4","_ref5","_callee6","_callee6$","_context6","_x5","deleteMany","_this3","_callee11","_callee11$","_context11","_ref6","_callee8","_callee8$","_context8","_x6","_ref7","_callee9","_callee9$","_context9","_x7","_ref8","_callee10","_callee10$","_context10","_x8","batch","_this5","b","commit","query","q","_this6","_objectSpread","filters","filter","_ref11","prefix","push","_ref12","toString","startsWith","orders","order","a","_ref13","queryKeys","_this7","close"],"sources":["/Users/apple/Documents/treasure/node_modules/datastore-core/src/keytransform.js"],"sourcesContent":["import { BaseDatastore } from './base.js'\nimport map from 'it-map'\nimport { pipe } from 'it-pipe'\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n * @typedef {import('./types').KeyTransform} KeyTransform\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * A datastore shim, that wraps around a given datastore, changing\n * the way keys look to the user, for example namespacing\n * keys, reversing them, etc.\n *\n * @implements {Datastore}\n */\nexport class KeyTransformDatastore extends BaseDatastore {\n  /**\n   * @param {Datastore} child\n   * @param {KeyTransform} transform\n   */\n  constructor (child, transform) {\n    super()\n\n    this.child = child\n    this.transform = transform\n  }\n\n  open () {\n    return this.child.open()\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} val\n   * @param {Options} [options]\n   */\n  put (key, val, options) {\n    return this.child.put(this.transform.convert(key), val, options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  get (key, options) {\n    return this.child.get(this.transform.convert(key), options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  has (key, options) {\n    return this.child.has(this.transform.convert(key), options)\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  delete (key, options) {\n    return this.child.delete(this.transform.convert(key), options)\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    const transform = this.transform\n    const child = this.child\n\n    yield * pipe(\n      source,\n      async function * (source) {\n        yield * map(source, ({ key, value }) => ({\n          key: transform.convert(key),\n          value\n        }))\n      },\n      async function * (source) {\n        yield * child.putMany(source, options)\n      },\n      async function * (source) {\n        yield * map(source, ({ key, value }) => ({\n          key: transform.invert(key),\n          value\n        }))\n      }\n    )\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Uint8Array>}\n   */\n  async * getMany (source, options = {}) {\n    const transform = this.transform\n    const child = this.child\n\n    yield * pipe(\n      source,\n      async function * (source) {\n        yield * map(source, key => transform.convert(key))\n      },\n      async function * (source) {\n        yield * child.getMany(source, options)\n      }\n    )\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    const transform = this.transform\n    const child = this.child\n\n    yield * pipe(\n      source,\n      async function * (source) {\n        yield * map(source, key => transform.convert(key))\n      },\n      async function * (source) {\n        yield * child.deleteMany(source, options)\n      },\n      async function * (source) {\n        yield * map(source, key => transform.invert(key))\n      }\n    )\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    const b = this.child.batch()\n    return {\n      put: (key, value) => {\n        b.put(this.transform.convert(key), value)\n      },\n      delete: (key) => {\n        b.delete(this.transform.convert(key))\n      },\n      commit: (options) => {\n        return b.commit(options)\n      }\n    }\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    /** @type {Query} */\n    const query = {\n      ...q\n    }\n\n    query.filters = (query.filters || []).map(filter => {\n      return ({ key, value }) => filter({ key: this.transform.convert(key), value })\n    })\n\n    const { prefix } = q\n    if (prefix != null && prefix !== '/') {\n      delete query.prefix\n      query.filters.push(({ key }) => {\n        return this.transform.invert(key).toString().startsWith(prefix)\n      })\n    }\n\n    if (query.orders) {\n      query.orders = query.orders.map(order => {\n        return (a, b) => order(\n          { key: this.transform.invert(a.key), value: a.value },\n          { key: this.transform.invert(b.key), value: b.value }\n        )\n      })\n    }\n\n    return map(this.child.query(query, options), ({ key, value }) => {\n      return {\n        key: this.transform.invert(key),\n        value\n      }\n    })\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    const query = {\n      ...q\n    }\n\n    query.filters = (query.filters || []).map(filter => {\n      return (key) => filter(this.transform.convert(key))\n    })\n\n    const { prefix } = q\n    if (prefix != null && prefix !== '/') {\n      delete query.prefix\n      query.filters.push((key) => {\n        return this.transform.invert(key).toString().startsWith(prefix)\n      })\n    }\n\n    if (query.orders) {\n      query.orders = query.orders.map(order => {\n        return (a, b) => order(\n          this.transform.invert(a),\n          this.transform.invert(b)\n        )\n      })\n    }\n\n    return map(this.child.queryKeys(query, options), key => {\n      return this.transform.invert(key)\n    })\n  }\n\n  close () {\n    return this.child.close()\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}