{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{parseEther}from\"ethers/lib/utils\";import{useContractMasterChefWithSigner}from\"hooks/blockchain/useHandleContracts\";import{useDispatch,useSelector}from\"react-redux\";import ACTIONS from\"redux/action\";import{selectUser}from\"redux/slice/userSlice\";import useGetMasterChefRewards from\"./useGetMasterChefRewards\";export default function useWithdrawMasterChef(){var user=useSelector(selectUser);var dispatch=useDispatch();var handleContractMasterChefWithSigner=useContractMasterChefWithSigner();var handleGetMasterChefRewards=useGetMasterChefRewards();var withdrawMasterChef=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,amount){var amountEther,contractMasterChefWithSigner;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(user!==null&&user!==void 0&&user.wallet_id){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:amountEther=parseEther(amount===null||amount===void 0?void 0:amount.toString()).toString();_context2.next=5;return handleContractMasterChefWithSigner;case 5:contractMasterChefWithSigner=_context2.sent;return _context2.abrupt(\"return\",contractMasterChefWithSigner.withdraw(id,amountEther).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(tx){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return tx.wait();case 2:ACTIONS.SET_TRANSANCTION_HASH(dispatch,tx===null||tx===void 0?void 0:tx.hash);// await sleep(15);\nhandleGetMasterChefRewards.getMasterChefRewards(id);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x3){return _ref2.apply(this,arguments);};}()).catch(function(){return null;}));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function withdrawMasterChef(_x,_x2){return _ref.apply(this,arguments);};}();return{withdrawMasterChef:withdrawMasterChef};}","map":{"version":3,"names":["parseEther","useContractMasterChefWithSigner","useDispatch","useSelector","ACTIONS","selectUser","useGetMasterChefRewards","useWithdrawMasterChef","user","dispatch","handleContractMasterChefWithSigner","handleGetMasterChefRewards","withdrawMasterChef","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","id","amount","amountEther","contractMasterChefWithSigner","wrap","_callee2$","_context2","prev","next","wallet_id","abrupt","toString","sent","withdraw","then","_ref2","_callee","tx","_callee$","_context","wait","SET_TRANSANCTION_HASH","hash","getMasterChefRewards","stop","_x3","apply","arguments","catch","_x","_x2"],"sources":["/Users/apple/Documents/treasure/src/hooks/rewards/useWithdrawMasterChef.js"],"sourcesContent":["import { parseEther } from \"ethers/lib/utils\";\nimport { useContractMasterChefWithSigner } from \"hooks/blockchain/useHandleContracts\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ACTIONS from \"redux/action\";\nimport { selectUser } from \"redux/slice/userSlice\";\nimport useGetMasterChefRewards from \"./useGetMasterChefRewards\";\n\nexport default function useWithdrawMasterChef() {\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n  const handleContractMasterChefWithSigner = useContractMasterChefWithSigner();\n  const handleGetMasterChefRewards = useGetMasterChefRewards();\n\n  const withdrawMasterChef = async (id, amount) => {\n    if (!user?.wallet_id) return;\n    const amountEther = parseEther(amount?.toString()).toString();\n    const contractMasterChefWithSigner =\n      await handleContractMasterChefWithSigner;\n    return contractMasterChefWithSigner\n      .withdraw(id, amountEther)\n      .then(async (tx) => {\n        await tx.wait();\n        ACTIONS.SET_TRANSANCTION_HASH(dispatch, tx?.hash);\n        // await sleep(15);\n        handleGetMasterChefRewards.getMasterChefRewards(id);\n      })\n      .catch(() => null);\n  };\n  return { withdrawMasterChef };\n}\n"],"mappings":"0PAAA,OAASA,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,+BAA+B,KAAQ,qCAAqC,CACrF,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,OAAO,KAAM,cAAc,CAClC,OAASC,UAAU,KAAQ,uBAAuB,CAClD,MAAO,CAAAC,uBAAuB,KAAM,2BAA2B,CAE/D,cAAe,SAAS,CAAAC,qBAAqBA,CAAA,CAAG,CAC9C,GAAM,CAAAC,IAAI,CAAGL,WAAW,CAACE,UAAU,CAAC,CACpC,GAAM,CAAAI,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAQ,kCAAkC,CAAGT,+BAA+B,CAAC,CAAC,CAC5E,GAAM,CAAAU,0BAA0B,CAAGL,uBAAuB,CAAC,CAAC,CAE5D,GAAM,CAAAM,kBAAkB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,SAAOC,EAAE,CAAEC,MAAM,MAAAC,WAAA,CAAAC,4BAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,UAAAC,SAAA,iBAAAA,SAAA,CAAAC,IAAA,CAAAD,SAAA,CAAAE,IAAA,YACrClB,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEmB,SAAS,EAAAH,SAAA,CAAAE,IAAA,iBAAAF,SAAA,CAAAI,MAAA,kBACdR,WAAW,CAAGpB,UAAU,CAACmB,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEU,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAAL,SAAA,CAAAE,IAAA,SAErD,CAAAhB,kCAAkC,QADpCW,4BAA4B,CAAAG,SAAA,CAAAM,IAAA,QAAAN,SAAA,CAAAI,MAAA,UAE3BP,4BAA4B,CAChCU,QAAQ,CAACb,EAAE,CAAEE,WAAW,CAAC,CACzBY,IAAI,6BAAAC,KAAA,CAAAnB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAkB,QAAOC,EAAE,SAAApB,mBAAA,GAAAO,IAAA,UAAAc,SAAAC,QAAA,iBAAAA,QAAA,CAAAZ,IAAA,CAAAY,QAAA,CAAAX,IAAA,SAAAW,QAAA,CAAAX,IAAA,SACP,CAAAS,EAAE,CAACG,IAAI,CAAC,CAAC,QACflC,OAAO,CAACmC,qBAAqB,CAAC9B,QAAQ,CAAE0B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAEK,IAAI,CAAC,CACjD;AACA7B,0BAA0B,CAAC8B,oBAAoB,CAACvB,EAAE,CAAC,CAAC,wBAAAmB,QAAA,CAAAK,IAAA,MAAAR,OAAA,GACrD,mBAAAS,GAAA,SAAAV,KAAA,CAAAW,KAAA,MAAAC,SAAA,QAAC,CACDC,KAAK,CAAC,iBAAM,KAAI,GAAC,0BAAAtB,SAAA,CAAAkB,IAAA,MAAAzB,QAAA,GACrB,kBAdK,CAAAL,kBAAkBA,CAAAmC,EAAA,CAAAC,GAAA,SAAAnC,IAAA,CAAA+B,KAAA,MAAAC,SAAA,OAcvB,CACD,MAAO,CAAEjC,kBAAkB,CAAlBA,kBAAmB,CAAC,CAC/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}