{"ast":null,"code":"import _slicedToArray from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{ALERT_STATUS_INFO,AUCTION_CANCELED,AUCTION_CREATED,AUCTION_FINALIZED,BID_SUCCESS,LISTING_BUYING,LISTING_CANCELED,LISTING_CHANGED,LISTING_CREATED,OFFER_ACCEPTED,OFFER_CANCELED,OFFER_CREATED,TRANSFER_EVENT}from\"../../constant/alert\";import{useLocation}from\"react-router-dom\";import useHandleNFT from\"../blockchain/useHandleNFT\";import{EVENT_ACCEPT_OFFER,EVENT_AUCTION_CANCELED,EVENT_AUCTION_CREATED,EVENT_AUCTION_FINALIZED,EVENT_BID_SUCCESS,EVENT_BUYING_LISTING,EVENT_CANCEL_LISTING,EVENT_CANCELED_OFFER,EVENT_CHANGED_LISTING,EVENT_CREATED_LISTING,EVENT_CREATED_OFFER,EVENT_TRANSFER}from\"../../constant/blockchain\";import{useDispatch,useSelector}from\"react-redux\";import{selectNftList}from\"redux/slice/nftSlice\";import{selectUser}from\"redux/slice/userSlice\";import ACTIONS from\"redux/action\";import{selectProvider}from\"redux/slice/providerSlice\";export default function useHandleSocket(){var provider=useSelector(selectProvider);var nftLists=useSelector(selectNftList);var user=useSelector(selectUser);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var location=useLocation();var handleNFT=useHandleNFT();var dispatch=useDispatch();var init=function init(){return ACTIONS.SET_SYNC(dispatch);};var messageHandler=function messageHandler(){var _message$data;var data=message!==null&&message!==void 0&&(_message$data=message.data)!==null&&_message$data!==void 0&&_message$data.length?JSON.parse(message===null||message===void 0?void 0:message.data):message===null||message===void 0?void 0:message.data;var currentToken=nftLists===null||nftLists===void 0?void 0:nftLists.find(function(item){var _item$contractAddress,_data$nftAddress,_item$tokenId;return(item===null||item===void 0?void 0:(_item$contractAddress=item.contractAddress)===null||_item$contractAddress===void 0?void 0:_item$contractAddress.toLowerCase())===(data===null||data===void 0?void 0:(_data$nftAddress=data.nftAddress)===null||_data$nftAddress===void 0?void 0:_data$nftAddress.toLowerCase())&&(item===null||item===void 0?void 0:(_item$tokenId=item.tokenId)===null||_item$tokenId===void 0?void 0:_item$tokenId.toString())===(data===null||data===void 0?void 0:data.tokenID);});if(data!==null&&data!==void 0&&data.confirmed){switch(message===null||message===void 0?void 0:message.action){case EVENT_CREATED_LISTING:{var _location$pathname,_user$wallet_id,_data$owner;if((_location$pathname=location.pathname)!==null&&_location$pathname!==void 0&&_location$pathname.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id=user.wallet_id)===null||_user$wallet_id===void 0?void 0:_user$wallet_id.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner=data.owner)===null||_data$owner===void 0?void 0:_data$owner.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,LISTING_CREATED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_BUYING_LISTING:{ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,LISTING_BUYING(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);break;}case EVENT_CANCEL_LISTING:{var _location$pathname2,_user$wallet_id2,_data$owner2;if((_location$pathname2=location.pathname)!==null&&_location$pathname2!==void 0&&_location$pathname2.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id2=user.wallet_id)===null||_user$wallet_id2===void 0?void 0:_user$wallet_id2.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner2=data.owner)===null||_data$owner2===void 0?void 0:_data$owner2.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,LISTING_CANCELED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_CHANGED_LISTING:{var _location$pathname3,_user$wallet_id3,_data$owner3;if((_location$pathname3=location.pathname)!==null&&_location$pathname3!==void 0&&_location$pathname3.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id3=user.wallet_id)===null||_user$wallet_id3===void 0?void 0:_user$wallet_id3.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner3=data.owner)===null||_data$owner3===void 0?void 0:_data$owner3.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,LISTING_CHANGED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_ACCEPT_OFFER:{ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,OFFER_ACCEPTED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);break;}case EVENT_CREATED_OFFER:{ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,OFFER_CREATED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);break;}case EVENT_CANCELED_OFFER:{ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,OFFER_CANCELED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);break;}case EVENT_TRANSFER:{var _location$pathname4,_user$wallet_id4,_data$owner4;if((_location$pathname4=location.pathname)!==null&&_location$pathname4!==void 0&&_location$pathname4.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id4=user.wallet_id)===null||_user$wallet_id4===void 0?void 0:_user$wallet_id4.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner4=data.owner)===null||_data$owner4===void 0?void 0:_data$owner4.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,TRANSFER_EVENT(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_AUCTION_CREATED:{var _location$pathname5,_user$wallet_id5,_data$owner5;if((_location$pathname5=location.pathname)!==null&&_location$pathname5!==void 0&&_location$pathname5.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id5=user.wallet_id)===null||_user$wallet_id5===void 0?void 0:_user$wallet_id5.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner5=data.owner)===null||_data$owner5===void 0?void 0:_data$owner5.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,AUCTION_CREATED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_AUCTION_CANCELED:{var _location$pathname6,_user$wallet_id6,_data$owner6;if((_location$pathname6=location.pathname)!==null&&_location$pathname6!==void 0&&_location$pathname6.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id6=user.wallet_id)===null||_user$wallet_id6===void 0?void 0:_user$wallet_id6.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner6=data.owner)===null||_data$owner6===void 0?void 0:_data$owner6.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,AUCTION_CANCELED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_AUCTION_FINALIZED:{var _location$pathname7,_user$wallet_id7,_data$owner7;if((_location$pathname7=location.pathname)!==null&&_location$pathname7!==void 0&&_location$pathname7.includes(\"\".concat(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,\"/\").concat(currentToken===null||currentToken===void 0?void 0:currentToken.tokenId))&&(user===null||user===void 0?void 0:(_user$wallet_id7=user.wallet_id)===null||_user$wallet_id7===void 0?void 0:_user$wallet_id7.toLowerCase())!==(data===null||data===void 0?void 0:(_data$owner7=data.owner)===null||_data$owner7===void 0?void 0:_data$owner7.toLowerCase())){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,AUCTION_FINALIZED(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);}break;}case EVENT_BID_SUCCESS:{ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_INFO,BID_SUCCESS(data===null||data===void 0?void 0:data.tokenID),currentToken===null||currentToken===void 0?void 0:currentToken.image);handleNFT.reloadNFTItemBalance(currentToken===null||currentToken===void 0?void 0:currentToken.contractAddress,currentToken===null||currentToken===void 0?void 0:currentToken.tokenId);break;}default:break;}}setMessage(null);};useEffect(function(){if(message!==null&&message!==void 0&&message.action)messageHandler();},[message]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(function(){if(provider!==null&&provider!==void 0&&provider.addListener)provider===null||provider===void 0?void 0:provider.addListener(setMessage);},[provider]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn{init:init};}","map":{"version":3,"names":["useEffect","useState","ALERT_STATUS_INFO","AUCTION_CANCELED","AUCTION_CREATED","AUCTION_FINALIZED","BID_SUCCESS","LISTING_BUYING","LISTING_CANCELED","LISTING_CHANGED","LISTING_CREATED","OFFER_ACCEPTED","OFFER_CANCELED","OFFER_CREATED","TRANSFER_EVENT","useLocation","useHandleNFT","EVENT_ACCEPT_OFFER","EVENT_AUCTION_CANCELED","EVENT_AUCTION_CREATED","EVENT_AUCTION_FINALIZED","EVENT_BID_SUCCESS","EVENT_BUYING_LISTING","EVENT_CANCEL_LISTING","EVENT_CANCELED_OFFER","EVENT_CHANGED_LISTING","EVENT_CREATED_LISTING","EVENT_CREATED_OFFER","EVENT_TRANSFER","useDispatch","useSelector","selectNftList","selectUser","ACTIONS","selectProvider","useHandleSocket","provider","nftLists","user","_useState","_useState2","_slicedToArray","message","setMessage","location","handleNFT","dispatch","init","SET_SYNC","messageHandler","_message$data","data","length","JSON","parse","currentToken","find","item","_item$contractAddress","_data$nftAddress","_item$tokenId","contractAddress","toLowerCase","nftAddress","tokenId","toString","tokenID","confirmed","action","_location$pathname","_user$wallet_id","_data$owner","pathname","includes","concat","wallet_id","owner","SET_ALERT","image","reloadNFTItemBalance","_location$pathname2","_user$wallet_id2","_data$owner2","_location$pathname3","_user$wallet_id3","_data$owner3","_location$pathname4","_user$wallet_id4","_data$owner4","_location$pathname5","_user$wallet_id5","_data$owner5","_location$pathname6","_user$wallet_id6","_data$owner6","_location$pathname7","_user$wallet_id7","_data$owner7","addListener"],"sources":["/Users/apple/Documents/treasure/src/hooks/socket/useHandleSocket.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport {\n  ALERT_STATUS_INFO,\n  AUCTION_CANCELED,\n  AUCTION_CREATED,\n  AUCTION_FINALIZED,\n  BID_SUCCESS,\n  LISTING_BUYING,\n  LISTING_CANCELED,\n  LISTING_CHANGED,\n  LISTING_CREATED,\n  OFFER_ACCEPTED,\n  OFFER_CANCELED,\n  OFFER_CREATED,\n  TRANSFER_EVENT,\n} from \"../../constant/alert\";\nimport { useLocation } from \"react-router-dom\";\nimport useHandleNFT from \"../blockchain/useHandleNFT\";\nimport {\n  EVENT_ACCEPT_OFFER,\n  EVENT_AUCTION_CANCELED,\n  EVENT_AUCTION_CREATED,\n  EVENT_AUCTION_FINALIZED,\n  EVENT_BID_SUCCESS,\n  EVENT_BUYING_LISTING,\n  EVENT_CANCEL_LISTING,\n  EVENT_CANCELED_OFFER,\n  EVENT_CHANGED_LISTING,\n  EVENT_CREATED_LISTING,\n  EVENT_CREATED_OFFER,\n  EVENT_TRANSFER,\n} from \"../../constant/blockchain\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectNftList } from \"redux/slice/nftSlice\";\nimport { selectUser } from \"redux/slice/userSlice\";\nimport ACTIONS from \"redux/action\";\nimport { selectProvider } from \"redux/slice/providerSlice\";\n\nexport default function useHandleSocket() {\n  const provider = useSelector(selectProvider);\n  const nftLists = useSelector(selectNftList);\n  const user = useSelector(selectUser);\n  const [message, setMessage] = useState(null);\n  const location = useLocation();\n  const handleNFT = useHandleNFT();\n  const dispatch = useDispatch();\n\n  const init = () => ACTIONS.SET_SYNC(dispatch);\n\n  const messageHandler = () => {\n    const data = message?.data?.length\n      ? JSON.parse(message?.data)\n      : message?.data;\n    const currentToken = nftLists?.find(\n      (item) =>\n        item?.contractAddress?.toLowerCase() ===\n          data?.nftAddress?.toLowerCase() &&\n        item?.tokenId?.toString() === data?.tokenID\n    );\n\n    if (data?.confirmed) {\n      switch (message?.action) {\n        case EVENT_CREATED_LISTING: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              LISTING_CREATED(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n\n        case EVENT_BUYING_LISTING: {\n          ACTIONS.SET_ALERT(\n            dispatch,\n            true,\n            ALERT_STATUS_INFO,\n            LISTING_BUYING(data?.tokenID),\n            currentToken?.image\n          );\n          handleNFT.reloadNFTItemBalance(\n            currentToken?.contractAddress,\n            currentToken?.tokenId\n          );\n          break;\n        }\n\n        case EVENT_CANCEL_LISTING: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              LISTING_CANCELED(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n\n        case EVENT_CHANGED_LISTING: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              LISTING_CHANGED(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n\n        case EVENT_ACCEPT_OFFER: {\n          ACTIONS.SET_ALERT(\n            dispatch,\n            true,\n            ALERT_STATUS_INFO,\n            OFFER_ACCEPTED(data?.tokenID),\n            currentToken?.image\n          );\n          handleNFT.reloadNFTItemBalance(\n            currentToken?.contractAddress,\n            currentToken?.tokenId\n          );\n          break;\n        }\n\n        case EVENT_CREATED_OFFER: {\n          ACTIONS.SET_ALERT(\n            dispatch,\n            true,\n            ALERT_STATUS_INFO,\n            OFFER_CREATED(data?.tokenID),\n            currentToken?.image\n          );\n          handleNFT.reloadNFTItemBalance(\n            currentToken?.contractAddress,\n            currentToken?.tokenId\n          );\n          break;\n        }\n\n        case EVENT_CANCELED_OFFER: {\n          ACTIONS.SET_ALERT(\n            dispatch,\n            true,\n            ALERT_STATUS_INFO,\n            OFFER_CANCELED(data?.tokenID),\n            currentToken?.image\n          );\n          handleNFT.reloadNFTItemBalance(\n            currentToken?.contractAddress,\n            currentToken?.tokenId\n          );\n          break;\n        }\n\n        case EVENT_TRANSFER: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              TRANSFER_EVENT(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n\n        case EVENT_AUCTION_CREATED: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              AUCTION_CREATED(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n\n        case EVENT_AUCTION_CANCELED: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              AUCTION_CANCELED(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n\n        case EVENT_AUCTION_FINALIZED: {\n          if (\n            location.pathname?.includes(\n              `${currentToken?.contractAddress}/${currentToken?.tokenId}`\n            ) &&\n            user?.wallet_id?.toLowerCase() !== data?.owner?.toLowerCase()\n          ) {\n            ACTIONS.SET_ALERT(\n              dispatch,\n              true,\n              ALERT_STATUS_INFO,\n              AUCTION_FINALIZED(data?.tokenID),\n              currentToken?.image\n            );\n            handleNFT.reloadNFTItemBalance(\n              currentToken?.contractAddress,\n              currentToken?.tokenId\n            );\n          }\n          break;\n        }\n        case EVENT_BID_SUCCESS: {\n          ACTIONS.SET_ALERT(\n            dispatch,\n            true,\n            ALERT_STATUS_INFO,\n            BID_SUCCESS(data?.tokenID),\n            currentToken?.image\n          );\n          handleNFT.reloadNFTItemBalance(\n            currentToken?.contractAddress,\n            currentToken?.tokenId\n          );\n          break;\n        }\n\n        default:\n          break;\n      }\n    }\n\n    setMessage(null);\n  };\n\n  useEffect(() => {\n    if (message?.action) messageHandler();\n  }, [message]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (provider?.addListener) provider?.addListener(setMessage);\n  }, [provider]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    init,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}