{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import useHandleRewards from\"../../../hooks/blockchain/useHandleRewards\";import MarketplaceButton from\"../../common/MarketplaceButton\";import infoImg from\"../../../assets/images/info_img.svg\";import infoImgDark from\"../../../assets/images/info_img_dark.svg\";import{formatterUS}from\"../../../utils\";import Tooltip from\"components/common/Tooltip\";import{ClipLoader}from\"react-spinners\";import useWindowDimensions from\"hooks/useWidowDimensions\";import useHandleNFT from\"hooks/blockchain/useHandleNFT\";import useHandleTresrStaking from\"hooks/blockchain/useHandleTresrStaking\";import{useDispatch,useSelector}from\"react-redux\";import{selectLpTotalStakedSMRTRAVAXBalance,selectLpTotalStakedTRESRAVAXBalance,selectKeyLevelPBalance,selectVeTresrSharePBalance}from\"redux/slice/balanceSlice\";import{selectTheme}from\"redux/slice/themeSlice\";import{selectBonusJlpSmartrReward,selectBonusJlpTresrReward,selectBonusKeyLevelReward,selectBonusTotalReward,selectBonusVeTresrReward}from\"redux/slice/rewardSlice\";import ACTIONS from\"redux/action\";import BonusCard from\"storybook/molecule/BonusCard/bonusCard\";import{jsx as _jsx}from\"react/jsx-runtime\";var DashboardBonusCard=function DashboardBonusCard(_ref){var onClaimBonus=_ref.onClaimBonus;var dispatch=useDispatch();var theme=useSelector(selectTheme);var claimableBonusJlpTresrReward=useSelector(selectBonusJlpTresrReward);var claimableBonusJlpSmartrReward=useSelector(selectBonusJlpSmartrReward);var claimableBonusTotalReward=useSelector(selectBonusTotalReward);var veTresrSharePBalance=useSelector(selectVeTresrSharePBalance);var claimableBonusVeTresrReward=useSelector(selectBonusVeTresrReward);var lpTotalStakedSMRTRAVAXBalance=useSelector(selectLpTotalStakedSMRTRAVAXBalance);var lpTotalStakedTRESRAVAXBalance=useSelector(selectLpTotalStakedTRESRAVAXBalance);var keyLevelPBalance=useSelector(selectKeyLevelPBalance);var claimableBonusKeyLevelReward=useSelector(selectBonusKeyLevelReward);var handleRewards=useHandleRewards();var handleTresrStaking=useHandleTresrStaking();var handleNFT=useHandleNFT();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),comulativeKeyLevel=_useState2[0],setcomulativeKeyLevel=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalRewards=_useState4[0],setTotalRewards=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),timerID=_useState6[0],setTimerID=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),flag=_useState8[0],setFlag=_useState8[1];var windowParams=useWindowDimensions();var isMobile=(windowParams===null||windowParams===void 0?void 0:windowParams.width)<=640;var isDark=theme===\"dark\";var balanceBonusAll=formatterUS(+claimableBonusJlpTresrReward+ +claimableBonusJlpSmartrReward);useEffect(function(){// handleRewards.getMasterChefRewards(0);\n// handleRewards.getMasterChefRewards(1);\nhandleRewards.getCumulativeLevels().then(function(res){return setcomulativeKeyLevel(res);});handleNFT.getkeyLevelP();handleTresrStaking.getveTresrShareP();},[]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(function(){clearInterval(timerID);setFlag(true);var timer=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.t0=setTotalRewards;_context.next=3;return handleRewards.getPenddingBonusRewards();case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);_context.t2=ACTIONS;_context.t3=dispatch;_context.next=9;return handleRewards.getTotalRewards();case 9:_context.t4=_context.sent;_context.t2.SET_BONUS_TOTAL_REWARDS.call(_context.t2,_context.t3,_context.t4);setFlag(false);case 12:case\"end\":return _context.stop();}},_callee);})),1000);setTimerID(timer);return function(){return clearInterval(timerID);};},[]);return/*#__PURE__*/_jsx(BonusCard,{isDark:isDark,isMobile:isMobile,totalRewards:totalRewards,onClaimBonus:onClaimBonus,claimableBonusTotalReward:claimableBonusTotalReward,comulativeKeyLevel:comulativeKeyLevel,veTresrSharePBalance:veTresrSharePBalance,claimableBonusVeTresrReward:claimableBonusVeTresrReward,lpTotalStakedSMRTRAVAXBalance:lpTotalStakedSMRTRAVAXBalance,claimableBonusJlpSmartrReward:claimableBonusJlpSmartrReward,lpTotalStakedTRESRAVAXBalance:lpTotalStakedTRESRAVAXBalance,claimableBonusJlpTresrReward:claimableBonusJlpTresrReward,keyLevelPBalance:keyLevelPBalance,claimableBonusKeyLevelReward:claimableBonusKeyLevelReward});};export default DashboardBonusCard;","map":{"version":3,"names":["React","useEffect","useState","useHandleRewards","MarketplaceButton","infoImg","infoImgDark","formatterUS","Tooltip","ClipLoader","useWindowDimensions","useHandleNFT","useHandleTresrStaking","useDispatch","useSelector","selectLpTotalStakedSMRTRAVAXBalance","selectLpTotalStakedTRESRAVAXBalance","selectKeyLevelPBalance","selectVeTresrSharePBalance","selectTheme","selectBonusJlpSmartrReward","selectBonusJlpTresrReward","selectBonusKeyLevelReward","selectBonusTotalReward","selectBonusVeTresrReward","ACTIONS","BonusCard","jsx","_jsx","DashboardBonusCard","_ref","onClaimBonus","dispatch","theme","claimableBonusJlpTresrReward","claimableBonusJlpSmartrReward","claimableBonusTotalReward","veTresrSharePBalance","claimableBonusVeTresrReward","lpTotalStakedSMRTRAVAXBalance","lpTotalStakedTRESRAVAXBalance","keyLevelPBalance","claimableBonusKeyLevelReward","handleRewards","handleTresrStaking","handleNFT","_useState","_useState2","_slicedToArray","comulativeKeyLevel","setcomulativeKeyLevel","_useState3","_useState4","totalRewards","setTotalRewards","_useState5","_useState6","timerID","setTimerID","_useState7","_useState8","flag","setFlag","windowParams","isMobile","width","isDark","balanceBonusAll","getCumulativeLevels","then","res","getkeyLevelP","getveTresrShareP","clearInterval","timer","setInterval","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","getPenddingBonusRewards","t1","sent","t2","t3","getTotalRewards","t4","SET_BONUS_TOTAL_REWARDS","call","stop"],"sources":["/Users/apple/Documents/treasure/src/components/Dashboard/DashboardBonusCard/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport useHandleRewards from \"../../../hooks/blockchain/useHandleRewards\";\nimport MarketplaceButton from \"../../common/MarketplaceButton\";\nimport infoImg from \"../../../assets/images/info_img.svg\";\nimport infoImgDark from \"../../../assets/images/info_img_dark.svg\";\nimport { formatterUS } from \"../../../utils\";\nimport Tooltip from \"components/common/Tooltip\";\nimport { ClipLoader } from \"react-spinners\";\nimport useWindowDimensions from \"hooks/useWidowDimensions\";\nimport useHandleNFT from \"hooks/blockchain/useHandleNFT\";\nimport useHandleTresrStaking from \"hooks/blockchain/useHandleTresrStaking\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  selectLpTotalStakedSMRTRAVAXBalance,\n  selectLpTotalStakedTRESRAVAXBalance,\n  selectKeyLevelPBalance,\n  selectVeTresrSharePBalance,\n} from \"redux/slice/balanceSlice\";\nimport { selectTheme } from \"redux/slice/themeSlice\";\nimport {\n  selectBonusJlpSmartrReward,\n  selectBonusJlpTresrReward,\n  selectBonusKeyLevelReward,\n  selectBonusTotalReward,\n  selectBonusVeTresrReward,\n} from \"redux/slice/rewardSlice\";\nimport ACTIONS from \"redux/action\";\nimport BonusCard from \"storybook/molecule/BonusCard/bonusCard\";\n\nconst DashboardBonusCard = ({ onClaimBonus }) => {\n  const dispatch = useDispatch();\n  const theme = useSelector(selectTheme);\n  const claimableBonusJlpTresrReward = useSelector(selectBonusJlpTresrReward);\n  const claimableBonusJlpSmartrReward = useSelector(selectBonusJlpSmartrReward);\n  const claimableBonusTotalReward = useSelector(selectBonusTotalReward);\n  const veTresrSharePBalance = useSelector(selectVeTresrSharePBalance);\n  const claimableBonusVeTresrReward = useSelector(selectBonusVeTresrReward);\n  const lpTotalStakedSMRTRAVAXBalance = useSelector(\n    selectLpTotalStakedSMRTRAVAXBalance\n  );\n  const lpTotalStakedTRESRAVAXBalance = useSelector(\n    selectLpTotalStakedTRESRAVAXBalance\n  );\n  const keyLevelPBalance = useSelector(selectKeyLevelPBalance);\n  const claimableBonusKeyLevelReward = useSelector(selectBonusKeyLevelReward);\n  const handleRewards = useHandleRewards();\n  const handleTresrStaking = useHandleTresrStaking();\n  const handleNFT = useHandleNFT();\n  const [comulativeKeyLevel, setcomulativeKeyLevel] = useState(0);\n  const [totalRewards, setTotalRewards] = useState(0);\n  const [timerID, setTimerID] = useState(0);\n  const [flag, setFlag] = useState(false);\n  const windowParams = useWindowDimensions();\n  const isMobile = windowParams?.width <= 640;\n\n  const isDark = theme === \"dark\";\n\n  const balanceBonusAll = formatterUS(\n    +claimableBonusJlpTresrReward + +claimableBonusJlpSmartrReward\n  );\n\n  useEffect(() => {\n    // handleRewards.getMasterChefRewards(0);\n    // handleRewards.getMasterChefRewards(1);\n    handleRewards\n      .getCumulativeLevels()\n      .then((res) => setcomulativeKeyLevel(res));\n    handleNFT.getkeyLevelP();\n    handleTresrStaking.getveTresrShareP();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    clearInterval(timerID);\n    setFlag(true);\n    const timer = setInterval(async () => {\n      setTotalRewards(await handleRewards.getPenddingBonusRewards());\n      ACTIONS.SET_BONUS_TOTAL_REWARDS(\n        dispatch,\n        await handleRewards.getTotalRewards()\n      );\n      setFlag(false);\n    }, 1000);\n    setTimerID(timer);\n\n    return () => clearInterval(timerID);\n  }, []);\n\n  return (\n    <BonusCard\n      isDark={isDark}\n      isMobile={isMobile}\n      totalRewards={totalRewards}\n      onClaimBonus={onClaimBonus}\n      claimableBonusTotalReward={claimableBonusTotalReward}\n      comulativeKeyLevel={comulativeKeyLevel}\n      veTresrSharePBalance={veTresrSharePBalance}\n      claimableBonusVeTresrReward={claimableBonusVeTresrReward}\n      lpTotalStakedSMRTRAVAXBalance={lpTotalStakedSMRTRAVAXBalance}\n      claimableBonusJlpSmartrReward={claimableBonusJlpSmartrReward}\n      lpTotalStakedTRESRAVAXBalance={lpTotalStakedTRESRAVAXBalance}\n      claimableBonusJlpTresrReward={claimableBonusJlpTresrReward}\n      keyLevelPBalance={keyLevelPBalance}\n      claimableBonusKeyLevelReward={claimableBonusKeyLevelReward}\n    />\n  );\n};\n\nexport default DashboardBonusCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}