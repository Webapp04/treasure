{"ast":null,"code":"var _defineProperty = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar FIFO = require('fast-fifo');\nmodule.exports = function (options) {\n  var _pushable2, _pushable3;\n  options = options || {};\n  var onEnd;\n  if (typeof options === 'function') {\n    onEnd = options;\n    options = {};\n  } else {\n    onEnd = options.onEnd;\n  }\n  var buffer = new FIFO();\n  var pushable, _onNext, ended;\n  var waitNext = function waitNext() {\n    if (!buffer.isEmpty()) {\n      if (options.writev) {\n        var _next;\n        var values = [];\n        while (!buffer.isEmpty()) {\n          _next = buffer.shift();\n          if (_next.error) throw _next.error;\n          values.push(_next.value);\n        }\n        return {\n          done: _next.done,\n          value: values\n        };\n      }\n      var next = buffer.shift();\n      if (next.error) throw next.error;\n      return next;\n    }\n    if (ended) return {\n      done: true\n    };\n    return new Promise(function (resolve, reject) {\n      _onNext = function onNext(next) {\n        _onNext = null;\n        if (next.error) {\n          reject(next.error);\n        } else {\n          if (options.writev && !next.done) {\n            resolve({\n              done: next.done,\n              value: [next.value]\n            });\n          } else {\n            resolve(next);\n          }\n        }\n        return pushable;\n      };\n    });\n  };\n  var bufferNext = function bufferNext(next) {\n    if (_onNext) return _onNext(next);\n    buffer.push(next);\n    return pushable;\n  };\n  var bufferError = function bufferError(err) {\n    buffer = new FIFO();\n    if (_onNext) return _onNext({\n      error: err\n    });\n    buffer.push({\n      error: err\n    });\n    return pushable;\n  };\n  var push = function push(value) {\n    if (ended) return pushable;\n    return bufferNext({\n      done: false,\n      value: value\n    });\n  };\n  var end = function end(err) {\n    if (ended) return pushable;\n    ended = true;\n    return err ? bufferError(err) : bufferNext({\n      done: true\n    });\n  };\n  var _return = function _return() {\n    buffer = new FIFO();\n    end();\n    return {\n      done: true\n    };\n  };\n  var _throw = function _throw(err) {\n    end(err);\n    return {\n      done: true\n    };\n  };\n  pushable = (_pushable2 = {}, _defineProperty(_pushable2, Symbol.asyncIterator, function () {\n    return this;\n  }), _defineProperty(_pushable2, \"next\", waitNext), _defineProperty(_pushable2, \"return\", _return), _defineProperty(_pushable2, \"throw\", _throw), _defineProperty(_pushable2, \"push\", push), _defineProperty(_pushable2, \"end\", end), _pushable2);\n  if (!onEnd) return pushable;\n  var _pushable = pushable;\n  pushable = (_pushable3 = {}, _defineProperty(_pushable3, Symbol.asyncIterator, function () {\n    return this;\n  }), _defineProperty(_pushable3, \"next\", function next() {\n    return _pushable.next();\n  }), _defineProperty(_pushable3, \"throw\", function _throw(err) {\n    _pushable.throw(err);\n    if (onEnd) {\n      onEnd(err);\n      onEnd = null;\n    }\n    return {\n      done: true\n    };\n  }), _defineProperty(_pushable3, \"return\", function _return() {\n    _pushable.return();\n    if (onEnd) {\n      onEnd();\n      onEnd = null;\n    }\n    return {\n      done: true\n    };\n  }), _defineProperty(_pushable3, \"push\", push), _defineProperty(_pushable3, \"end\", function end(err) {\n    _pushable.end(err);\n    if (onEnd) {\n      onEnd(err);\n      onEnd = null;\n    }\n    return pushable;\n  }), _pushable3);\n  return pushable;\n};","map":{"version":3,"names":["FIFO","require","module","exports","options","_pushable2","_pushable3","onEnd","buffer","pushable","onNext","ended","waitNext","isEmpty","writev","next","values","shift","error","push","value","done","Promise","resolve","reject","bufferNext","bufferError","err","end","_return","_throw","_defineProperty","Symbol","asyncIterator","_pushable","throw","return"],"sources":["/Users/apple/Documents/treasure/node_modules/it-merge/node_modules/it-pushable/index.js"],"sourcesContent":["const FIFO = require('fast-fifo')\n\nmodule.exports = (options) => {\n  options = options || {}\n  let onEnd\n\n  if (typeof options === 'function') {\n    onEnd = options\n    options = {}\n  } else {\n    onEnd = options.onEnd\n  }\n\n  let buffer = new FIFO()\n  let pushable, onNext, ended\n\n  const waitNext = () => {\n    if (!buffer.isEmpty()) {\n      if (options.writev) {\n        let next\n        const values = []\n        while (!buffer.isEmpty()) {\n          next = buffer.shift()\n          if (next.error) throw next.error\n          values.push(next.value)\n        }\n        return { done: next.done, value: values }\n      }\n\n      const next = buffer.shift()\n      if (next.error) throw next.error\n      return next\n    }\n\n    if (ended) return { done: true }\n\n    return new Promise((resolve, reject) => {\n      onNext = next => {\n        onNext = null\n        if (next.error) {\n          reject(next.error)\n        } else {\n          if (options.writev && !next.done) {\n            resolve({ done: next.done, value: [next.value] })\n          } else {\n            resolve(next)\n          }\n        }\n        return pushable\n      }\n    })\n  }\n\n  const bufferNext = next => {\n    if (onNext) return onNext(next)\n    buffer.push(next)\n    return pushable\n  }\n\n  const bufferError = err => {\n    buffer = new FIFO()\n    if (onNext) return onNext({ error: err })\n    buffer.push({ error: err })\n    return pushable\n  }\n\n  const push = value => {\n    if (ended) return pushable\n    return bufferNext({ done: false, value })\n  }\n  const end = err => {\n    if (ended) return pushable\n    ended = true\n    return err ? bufferError(err) : bufferNext({ done: true })\n  }\n  const _return = () => {\n    buffer = new FIFO()\n    end()\n    return { done: true }\n  }\n  const _throw = err => {\n    end(err)\n    return { done: true }\n  }\n\n  pushable = {\n    [Symbol.asyncIterator] () { return this },\n    next: waitNext,\n    return: _return,\n    throw: _throw,\n    push,\n    end\n  }\n\n  if (!onEnd) return pushable\n\n  const _pushable = pushable\n\n  pushable = {\n    [Symbol.asyncIterator] () { return this },\n    next () {\n      return _pushable.next()\n    },\n    throw (err) {\n      _pushable.throw(err)\n      if (onEnd) {\n        onEnd(err)\n        onEnd = null\n      }\n      return { done: true }\n    },\n    return () {\n      _pushable.return()\n      if (onEnd) {\n        onEnd()\n        onEnd = null\n      }\n      return { done: true }\n    },\n    push,\n    end (err) {\n      _pushable.end(err)\n      if (onEnd) {\n        onEnd(err)\n        onEnd = null\n      }\n      return pushable\n    }\n  }\n\n  return pushable\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}