{"ast":null,"code":"var _classCallCheck = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar FixedFIFO = require('./fixed-size');\nmodule.exports = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function FastFIFO(hwm) {\n    _classCallCheck(this, FastFIFO);\n    this.hwm = hwm || 16;\n    this.head = new FixedFIFO(this.hwm);\n    this.tail = this.head;\n  }\n  _createClass(FastFIFO, [{\n    key: \"push\",\n    value: function push(val) {\n      if (!this.head.push(val)) {\n        var prev = this.head;\n        this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length);\n        this.head.push(val);\n      }\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      var val = this.tail.shift();\n      if (val === undefined && this.tail.next) {\n        var next = this.tail.next;\n        this.tail.next = null;\n        this.tail = next;\n        return this.tail.shift();\n      }\n      return val;\n    }\n  }, {\n    key: \"peek\",\n    value: function peek() {\n      return this.tail.peek();\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this.head.isEmpty();\n    }\n  }]);\n  return FastFIFO;\n}();","map":{"version":3,"names":["FixedFIFO","require","module","exports","FastFIFO","hwm","_classCallCheck","head","tail","_createClass","key","value","push","val","prev","next","buffer","length","shift","undefined","peek","isEmpty"],"sources":["/Users/apple/Documents/treasure/node_modules/fast-fifo/index.js"],"sourcesContent":["const FixedFIFO = require('./fixed-size')\n\nmodule.exports = class FastFIFO {\n  constructor (hwm) {\n    this.hwm = hwm || 16\n    this.head = new FixedFIFO(this.hwm)\n    this.tail = this.head\n  }\n\n  push (val) {\n    if (!this.head.push(val)) {\n      const prev = this.head\n      this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length)\n      this.head.push(val)\n    }\n  }\n\n  shift () {\n    const val = this.tail.shift()\n    if (val === undefined && this.tail.next) {\n      const next = this.tail.next\n      this.tail.next = null\n      this.tail = next\n      return this.tail.shift()\n    }\n    return val\n  }\n\n  peek () {\n    return this.tail.peek()\n  }\n\n  isEmpty () {\n    return this.head.isEmpty()\n  }\n}\n"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,cAAc,CAAC;AAEzCC,MAAM,CAACC,OAAO;EAAA;;EACZ,SAAAC,SAAaC,GAAG,EAAE;IAAAC,eAAA,OAAAF,QAAA;IAChB,IAAI,CAACC,GAAG,GAAGA,GAAG,IAAI,EAAE;IACpB,IAAI,CAACE,IAAI,GAAG,IAAIP,SAAS,CAAC,IAAI,CAACK,GAAG,CAAC;IACnC,IAAI,CAACG,IAAI,GAAG,IAAI,CAACD,IAAI;EACvB;EAACE,YAAA,CAAAL,QAAA;IAAAM,GAAA;IAAAC,KAAA,EAED,SAAAC,KAAMC,GAAG,EAAE;MACT,IAAI,CAAC,IAAI,CAACN,IAAI,CAACK,IAAI,CAACC,GAAG,CAAC,EAAE;QACxB,IAAMC,IAAI,GAAG,IAAI,CAACP,IAAI;QACtB,IAAI,CAACA,IAAI,GAAGO,IAAI,CAACC,IAAI,GAAG,IAAIf,SAAS,CAAC,CAAC,GAAG,IAAI,CAACO,IAAI,CAACS,MAAM,CAACC,MAAM,CAAC;QAClE,IAAI,CAACV,IAAI,CAACK,IAAI,CAACC,GAAG,CAAC;MACrB;IACF;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAO,MAAA,EAAS;MACP,IAAML,GAAG,GAAG,IAAI,CAACL,IAAI,CAACU,KAAK,CAAC,CAAC;MAC7B,IAAIL,GAAG,KAAKM,SAAS,IAAI,IAAI,CAACX,IAAI,CAACO,IAAI,EAAE;QACvC,IAAMA,IAAI,GAAG,IAAI,CAACP,IAAI,CAACO,IAAI;QAC3B,IAAI,CAACP,IAAI,CAACO,IAAI,GAAG,IAAI;QACrB,IAAI,CAACP,IAAI,GAAGO,IAAI;QAChB,OAAO,IAAI,CAACP,IAAI,CAACU,KAAK,CAAC,CAAC;MAC1B;MACA,OAAOL,GAAG;IACZ;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAS,KAAA,EAAQ;MACN,OAAO,IAAI,CAACZ,IAAI,CAACY,IAAI,CAAC,CAAC;IACzB;EAAC;IAAAV,GAAA;IAAAC,KAAA,EAED,SAAAU,QAAA,EAAW;MACT,OAAO,IAAI,CAACd,IAAI,CAACc,OAAO,CAAC,CAAC;IAC5B;EAAC;EAAA,OAAAjB,QAAA;AAAA,GACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}