{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { logger } from '@libp2p/logger';\nimport errcode from 'err-code';\nimport { codes } from './errors.js';\nimport { peerIdFromPeerId } from '@libp2p/peer-id';\nimport { CustomEvent } from '@libp2p/interfaces/events';\nvar log = logger('libp2p:peer-store:proto-book');\nvar EVENT_NAME = 'change:protocols';\nexport var PeerStoreProtoBook = /*#__PURE__*/function () {\n  /**\n   * The ProtoBook is responsible for keeping the known supported\n   * protocols of a peer\n   */\n  function PeerStoreProtoBook(dispatchEvent, store) {\n    _classCallCheck(this, PeerStoreProtoBook);\n    this.dispatchEvent = dispatchEvent;\n    this.store = store;\n  }\n  _createClass(PeerStoreProtoBook, [{\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(peerId) {\n        var release, peer;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              log.trace('get wait for read lock');\n              _context.next = 3;\n              return this.store.lock.readLock();\n            case 3:\n              release = _context.sent;\n              log.trace('get got read lock');\n              _context.prev = 5;\n              _context.next = 8;\n              return this.store.load(peerId);\n            case 8:\n              peer = _context.sent;\n              return _context.abrupt(\"return\", peer.protocols);\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](5);\n              if (!(_context.t0.code !== codes.ERR_NOT_FOUND)) {\n                _context.next = 16;\n                break;\n              }\n              throw _context.t0;\n            case 16:\n              _context.prev = 16;\n              log.trace('get release read lock');\n              release();\n              return _context.finish(16);\n            case 20:\n              return _context.abrupt(\"return\", []);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[5, 12, 16, 20]]);\n      }));\n      function get(_x) {\n        return _get.apply(this, arguments);\n      }\n      return get;\n    }()\n  }, {\n    key: \"set\",\n    value: function () {\n      var _set = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(peerId, protocols) {\n        var release, peer, updatedPeer;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              peerId = peerIdFromPeerId(peerId);\n              if (Array.isArray(protocols)) {\n                _context2.next = 4;\n                break;\n              }\n              log.error('protocols must be provided to store data');\n              throw errcode(new Error('protocols must be provided'), codes.ERR_INVALID_PARAMETERS);\n            case 4:\n              log.trace('set await write lock');\n              _context2.next = 7;\n              return this.store.lock.writeLock();\n            case 7:\n              release = _context2.sent;\n              log.trace('set got write lock');\n              _context2.prev = 9;\n              _context2.prev = 10;\n              _context2.next = 13;\n              return this.store.load(peerId);\n            case 13:\n              peer = _context2.sent;\n              if (!(new Set(_toConsumableArray(protocols)).size === peer.protocols.length)) {\n                _context2.next = 16;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 16:\n              _context2.next = 22;\n              break;\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](10);\n              if (!(_context2.t0.code !== codes.ERR_NOT_FOUND)) {\n                _context2.next = 22;\n                break;\n              }\n              throw _context2.t0;\n            case 22:\n              _context2.next = 24;\n              return this.store.patchOrCreate(peerId, {\n                protocols: protocols\n              });\n            case 24:\n              updatedPeer = _context2.sent;\n              log('stored provided protocols for %p', peerId);\n            case 26:\n              _context2.prev = 26;\n              log.trace('set release write lock');\n              release();\n              return _context2.finish(26);\n            case 30:\n              this.dispatchEvent(new CustomEvent(EVENT_NAME, {\n                detail: {\n                  peerId: peerId,\n                  protocols: updatedPeer.protocols,\n                  oldProtocols: peer == null ? [] : peer.protocols\n                }\n              }));\n            case 31:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[9,, 26, 30], [10, 18]]);\n      }));\n      function set(_x2, _x3) {\n        return _set.apply(this, arguments);\n      }\n      return set;\n    }()\n  }, {\n    key: \"add\",\n    value: function () {\n      var _add = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(peerId, protocols) {\n        var release, peer, updatedPeer;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              peerId = peerIdFromPeerId(peerId);\n              if (Array.isArray(protocols)) {\n                _context3.next = 4;\n                break;\n              }\n              log.error('protocols must be provided to store data');\n              throw errcode(new Error('protocols must be provided'), codes.ERR_INVALID_PARAMETERS);\n            case 4:\n              log.trace('add await write lock');\n              _context3.next = 7;\n              return this.store.lock.writeLock();\n            case 7:\n              release = _context3.sent;\n              log.trace('add got write lock');\n              _context3.prev = 9;\n              _context3.prev = 10;\n              _context3.next = 13;\n              return this.store.load(peerId);\n            case 13:\n              peer = _context3.sent;\n              if (!(new Set([].concat(_toConsumableArray(peer.protocols), _toConsumableArray(protocols))).size === peer.protocols.length)) {\n                _context3.next = 16;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 16:\n              _context3.next = 22;\n              break;\n            case 18:\n              _context3.prev = 18;\n              _context3.t0 = _context3[\"catch\"](10);\n              if (!(_context3.t0.code !== codes.ERR_NOT_FOUND)) {\n                _context3.next = 22;\n                break;\n              }\n              throw _context3.t0;\n            case 22:\n              _context3.next = 24;\n              return this.store.mergeOrCreate(peerId, {\n                protocols: protocols\n              });\n            case 24:\n              updatedPeer = _context3.sent;\n              log('added provided protocols for %p', peerId);\n            case 26:\n              _context3.prev = 26;\n              log.trace('add release write lock');\n              release();\n              return _context3.finish(26);\n            case 30:\n              this.dispatchEvent(new CustomEvent(EVENT_NAME, {\n                detail: {\n                  peerId: peerId,\n                  protocols: updatedPeer.protocols,\n                  oldProtocols: peer == null ? [] : peer.protocols\n                }\n              }));\n            case 31:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[9,, 26, 30], [10, 18]]);\n      }));\n      function add(_x4, _x5) {\n        return _add.apply(this, arguments);\n      }\n      return add;\n    }()\n  }, {\n    key: \"remove\",\n    value: function () {\n      var _remove = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(peerId, protocols) {\n        var release, peer, updatedPeer, protocolSet, _iterator, _step, protocol;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              peerId = peerIdFromPeerId(peerId);\n              if (Array.isArray(protocols)) {\n                _context4.next = 4;\n                break;\n              }\n              log.error('protocols must be provided to store data');\n              throw errcode(new Error('protocols must be provided'), codes.ERR_INVALID_PARAMETERS);\n            case 4:\n              log.trace('remove await write lock');\n              _context4.next = 7;\n              return this.store.lock.writeLock();\n            case 7:\n              release = _context4.sent;\n              log.trace('remove got write lock');\n              _context4.prev = 9;\n              _context4.prev = 10;\n              _context4.next = 13;\n              return this.store.load(peerId);\n            case 13:\n              peer = _context4.sent;\n              protocolSet = new Set(peer.protocols);\n              _iterator = _createForOfIteratorHelper(protocols);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  protocol = _step.value;\n                  protocolSet.delete(protocol);\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              if (!(peer.protocols.length === protocolSet.size)) {\n                _context4.next = 19;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 19:\n              protocols = Array.from(protocolSet);\n              _context4.next = 26;\n              break;\n            case 22:\n              _context4.prev = 22;\n              _context4.t0 = _context4[\"catch\"](10);\n              if (!(_context4.t0.code !== codes.ERR_NOT_FOUND)) {\n                _context4.next = 26;\n                break;\n              }\n              throw _context4.t0;\n            case 26:\n              _context4.next = 28;\n              return this.store.patchOrCreate(peerId, {\n                protocols: protocols\n              });\n            case 28:\n              updatedPeer = _context4.sent;\n            case 29:\n              _context4.prev = 29;\n              log.trace('remove release write lock');\n              release();\n              return _context4.finish(29);\n            case 33:\n              this.dispatchEvent(new CustomEvent(EVENT_NAME, {\n                detail: {\n                  peerId: peerId,\n                  protocols: updatedPeer.protocols,\n                  oldProtocols: peer == null ? [] : peer.protocols\n                }\n              }));\n            case 34:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this, [[9,, 29, 33], [10, 22]]);\n      }));\n      function remove(_x6, _x7) {\n        return _remove.apply(this, arguments);\n      }\n      return remove;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(peerId) {\n        var release, peer;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              peerId = peerIdFromPeerId(peerId);\n              log.trace('delete await write lock');\n              _context5.next = 4;\n              return this.store.lock.writeLock();\n            case 4:\n              release = _context5.sent;\n              log.trace('delete got write lock');\n              _context5.prev = 6;\n              _context5.prev = 7;\n              _context5.next = 10;\n              return this.store.load(peerId);\n            case 10:\n              peer = _context5.sent;\n              _context5.next = 17;\n              break;\n            case 13:\n              _context5.prev = 13;\n              _context5.t0 = _context5[\"catch\"](7);\n              if (!(_context5.t0.code !== codes.ERR_NOT_FOUND)) {\n                _context5.next = 17;\n                break;\n              }\n              throw _context5.t0;\n            case 17:\n              _context5.next = 19;\n              return this.store.patchOrCreate(peerId, {\n                protocols: []\n              });\n            case 19:\n              _context5.prev = 19;\n              log.trace('delete release write lock');\n              release();\n              return _context5.finish(19);\n            case 23:\n              if (peer != null) {\n                this.dispatchEvent(new CustomEvent(EVENT_NAME, {\n                  detail: {\n                    peerId: peerId,\n                    protocols: [],\n                    oldProtocols: peer.protocols\n                  }\n                }));\n              }\n            case 24:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this, [[6,, 19, 23], [7, 13]]);\n      }));\n      function _delete(_x8) {\n        return _delete2.apply(this, arguments);\n      }\n      return _delete;\n    }()\n  }]);\n  return PeerStoreProtoBook;\n}();","map":{"version":3,"names":["logger","errcode","codes","peerIdFromPeerId","CustomEvent","log","EVENT_NAME","PeerStoreProtoBook","dispatchEvent","store","_classCallCheck","_createClass","key","value","_get","_asyncToGenerator","_regeneratorRuntime","mark","_callee","peerId","release","peer","wrap","_callee$","_context","prev","next","trace","lock","readLock","sent","load","abrupt","protocols","t0","code","ERR_NOT_FOUND","finish","stop","get","_x","apply","arguments","_set","_callee2","updatedPeer","_callee2$","_context2","Array","isArray","error","Error","ERR_INVALID_PARAMETERS","writeLock","Set","_toConsumableArray","size","length","patchOrCreate","detail","oldProtocols","set","_x2","_x3","_add","_callee3","_callee3$","_context3","concat","mergeOrCreate","add","_x4","_x5","_remove","_callee4","protocolSet","_iterator","_step","protocol","_callee4$","_context4","_createForOfIteratorHelper","s","n","done","delete","err","e","f","from","remove","_x6","_x7","_delete2","_callee5","_callee5$","_context5","_delete","_x8"],"sources":["/Users/apple/Documents/treasure/node_modules/@libp2p/peer-store/src/proto-book.ts"],"sourcesContent":["import { logger } from '@libp2p/logger'\nimport errcode from 'err-code'\nimport { codes } from './errors.js'\nimport { peerIdFromPeerId } from '@libp2p/peer-id'\nimport { CustomEvent } from '@libp2p/interfaces/events'\nimport type { Store } from './store.js'\nimport type { Peer, PeerProtocolsChangeData, PeerStore, ProtoBook } from '@libp2p/interface-peer-store'\nimport type { PeerId } from '@libp2p/interface-peer-id'\n\nconst log = logger('libp2p:peer-store:proto-book')\n\nconst EVENT_NAME = 'change:protocols'\n\nexport class PeerStoreProtoBook implements ProtoBook {\n  private readonly dispatchEvent: PeerStore['dispatchEvent']\n  private readonly store: Store\n\n  /**\n   * The ProtoBook is responsible for keeping the known supported\n   * protocols of a peer\n   */\n  constructor (dispatchEvent: PeerStore['dispatchEvent'], store: Store) {\n    this.dispatchEvent = dispatchEvent\n    this.store = store\n  }\n\n  async get (peerId: PeerId) {\n    log.trace('get wait for read lock')\n    const release = await this.store.lock.readLock()\n    log.trace('get got read lock')\n\n    try {\n      const peer = await this.store.load(peerId)\n\n      return peer.protocols\n    } catch (err: any) {\n      if (err.code !== codes.ERR_NOT_FOUND) {\n        throw err\n      }\n    } finally {\n      log.trace('get release read lock')\n      release()\n    }\n\n    return []\n  }\n\n  async set (peerId: PeerId, protocols: string[]) {\n    peerId = peerIdFromPeerId(peerId)\n\n    if (!Array.isArray(protocols)) {\n      log.error('protocols must be provided to store data')\n      throw errcode(new Error('protocols must be provided'), codes.ERR_INVALID_PARAMETERS)\n    }\n\n    log.trace('set await write lock')\n    const release = await this.store.lock.writeLock()\n    log.trace('set got write lock')\n\n    let peer\n    let updatedPeer\n\n    try {\n      try {\n        peer = await this.store.load(peerId)\n\n        if (new Set([\n          ...protocols\n        ]).size === peer.protocols.length) {\n          return\n        }\n      } catch (err: any) {\n        if (err.code !== codes.ERR_NOT_FOUND) {\n          throw err\n        }\n      }\n\n      updatedPeer = await this.store.patchOrCreate(peerId, {\n        protocols\n      })\n\n      log('stored provided protocols for %p', peerId)\n    } finally {\n      log.trace('set release write lock')\n      release()\n    }\n\n    this.dispatchEvent(new CustomEvent<PeerProtocolsChangeData>(EVENT_NAME, {\n      detail: {\n        peerId,\n        protocols: updatedPeer.protocols,\n        oldProtocols: peer == null ? [] : peer.protocols\n      }\n    }))\n  }\n\n  async add (peerId: PeerId, protocols: string[]) {\n    peerId = peerIdFromPeerId(peerId)\n\n    if (!Array.isArray(protocols)) {\n      log.error('protocols must be provided to store data')\n      throw errcode(new Error('protocols must be provided'), codes.ERR_INVALID_PARAMETERS)\n    }\n\n    log.trace('add await write lock')\n    const release = await this.store.lock.writeLock()\n    log.trace('add got write lock')\n\n    let peer: Peer | undefined\n    let updatedPeer\n\n    try {\n      try {\n        peer = await this.store.load(peerId)\n\n        if (new Set([\n          ...peer.protocols,\n          ...protocols\n        ]).size === peer.protocols.length) {\n          return\n        }\n      } catch (err: any) {\n        if (err.code !== codes.ERR_NOT_FOUND) {\n          throw err\n        }\n      }\n\n      updatedPeer = await this.store.mergeOrCreate(peerId, {\n        protocols\n      })\n\n      log('added provided protocols for %p', peerId)\n    } finally {\n      log.trace('add release write lock')\n      release()\n    }\n\n    this.dispatchEvent(new CustomEvent<PeerProtocolsChangeData>(EVENT_NAME, {\n      detail: {\n        peerId,\n        protocols: updatedPeer.protocols,\n        oldProtocols: peer == null ? [] : peer.protocols\n      }\n    }))\n  }\n\n  async remove (peerId: PeerId, protocols: string[]) {\n    peerId = peerIdFromPeerId(peerId)\n\n    if (!Array.isArray(protocols)) {\n      log.error('protocols must be provided to store data')\n      throw errcode(new Error('protocols must be provided'), codes.ERR_INVALID_PARAMETERS)\n    }\n\n    log.trace('remove await write lock')\n    const release = await this.store.lock.writeLock()\n    log.trace('remove got write lock')\n\n    let peer: Peer | undefined\n    let updatedPeer: Peer\n\n    try {\n      try {\n        peer = await this.store.load(peerId)\n        const protocolSet = new Set(peer.protocols)\n\n        for (const protocol of protocols) {\n          protocolSet.delete(protocol)\n        }\n\n        if (peer.protocols.length === protocolSet.size) {\n          return\n        }\n\n        protocols = Array.from(protocolSet)\n      } catch (err: any) {\n        if (err.code !== codes.ERR_NOT_FOUND) {\n          throw err\n        }\n      }\n\n      updatedPeer = await this.store.patchOrCreate(peerId, {\n        protocols\n      })\n    } finally {\n      log.trace('remove release write lock')\n      release()\n    }\n\n    this.dispatchEvent(new CustomEvent<PeerProtocolsChangeData>(EVENT_NAME, {\n      detail: {\n        peerId,\n        protocols: updatedPeer.protocols,\n        oldProtocols: peer == null ? [] : peer.protocols\n      }\n    }))\n  }\n\n  async delete (peerId: PeerId) {\n    peerId = peerIdFromPeerId(peerId)\n\n    log.trace('delete await write lock')\n    const release = await this.store.lock.writeLock()\n    log.trace('delete got write lock')\n    let peer: Peer | undefined\n\n    try {\n      try {\n        peer = await this.store.load(peerId)\n      } catch (err: any) {\n        if (err.code !== codes.ERR_NOT_FOUND) {\n          throw err\n        }\n      }\n\n      await this.store.patchOrCreate(peerId, {\n        protocols: []\n      })\n    } finally {\n      log.trace('delete release write lock')\n      release()\n    }\n\n    if (peer != null) {\n      this.dispatchEvent(new CustomEvent<PeerProtocolsChangeData>(EVENT_NAME, {\n        detail: {\n          peerId,\n          protocols: [],\n          oldProtocols: peer.protocols\n        }\n      }))\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}