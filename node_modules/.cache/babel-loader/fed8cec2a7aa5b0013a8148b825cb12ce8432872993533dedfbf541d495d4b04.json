{"ast":null,"code":"import _slicedToArray from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./style.scss\";import MarketplaceButton from\"../../MarketplaceButton\";import{formatterUS}from\"../../../../utils\";import{BASE_REWARD}from\"../../../../constant/blockchain\";import useMakeNotificationSound from\"../../../../hooks/useMakeSound\";import SocialLinkComponent from\"components/AccountComponent/SocialLinkComponent\";import{NFKEY_SOCIALS}from\"constant/singleCollectionPage\";import{useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{selectNftSelected}from\"redux/slice/nftSlice\";import{selectLoaderIsActive}from\"redux/slice/loaderSlice\";import Modal from\"storybook/atom/Modal/modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TreasureBoxModal=function TreasureBoxModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,chestStatus=_ref.chestStatus,onTryAgain=_ref.onTryAgain,amountOpenChest=_ref.amountOpenChest,setIsAnimated=_ref.setIsAnimated;var loaderIsActive=useSelector(selectLoaderIsActive);var nftSelected=useSelector(selectNftSelected);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isTextShown=_useState2[0],setIsTextShown=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),socials=_useState4[0],setSocials=_useState4[1];var audio=useMakeNotificationSound();var navigate=useNavigate();var estPerMonth=nftSelected!==null&&nftSelected!==void 0&&nftSelected.staked?+(nftSelected===null||nftSelected===void 0?void 0:nftSelected.tier)*(nftSelected===null||nftSelected===void 0?void 0:nftSelected.tierTresr)*BASE_REWARD*30:0;var onCloseModal=function onCloseModal(){onClose();setIsTextShown(false);setIsAnimated(false);};useEffect(function(){if(isOpen){setTimeout(function(){return setIsTextShown(true);},6000);chestStatus?audio(\"audio/ModalVideoGame-Success.mp3\"):audio(\"audio/ModalVideoGame-Failure.mp3\");}else setIsTextShown(false);setSocials(NFKEY_SOCIALS);},[isOpen]);// eslint-disable-line react-hooks/exhaustive-deps\nif(chestStatus===null)return null;return/*#__PURE__*/_jsxs(Modal,{handleClose:onCloseModal,isModalOpen:isOpen,withCrossIcon:true,isFullModalBg:true,className:\"max-w-[580px] max-h-[580px] px-[0px] py-[0px]\",children:[chestStatus?/*#__PURE__*/_jsxs(\"div\",{className:\"treasureBoxModal__success \".concat(isTextShown?\"treasureBoxModal__visible\":\"\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal__title treasureBoxModal__title\",children:\"Success!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"modal__text treasureBoxModal__title\",children:[\"Your Treasure Tier for\",/*#__PURE__*/_jsxs(\"span\",{className:\"modal__text--blue\",children:[\" \",\"Founder's Key #\",nftSelected===null||nftSelected===void 0?void 0:nftSelected.tokenId,\" \"]}),\"is now\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"treasureBoxModal__text--yellow\",children:[\"Tier \",nftSelected===null||nftSelected===void 0?void 0:nftSelected.tierTresr]}),\"!\",/*#__PURE__*/_jsx(\"br\",{}),\"Now your rewards are\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"treasureBoxModal__text--yellow\",children:[estPerMonth,\" $TRESR/month\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"modal__text treasureBoxModal__title\",children:\"Remember: Your Treasure Tier is temporary and must be updated before the timer runs out.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"treasureBoxModal__socials mt-[180px]\",children:socials===null||socials===void 0?void 0:socials.map(function(item,key){return/*#__PURE__*/_jsx(SocialLinkComponent,{isEditMode:false,link:item===null||item===void 0?void 0:item.link,index:key,isNFTPage:true},key);})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"treasureBoxModal__failure \".concat(isTextShown?\"treasureBoxModal__visible\":\"\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal__title treasureBoxModal__title\",children:\"Oooops!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"modal__text treasureBoxModal__title\",children:[\"The box didn't open. Your Treasure Tier will remain at\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"treasureBoxModal__text--gray\",children:[\"Tier \",nftSelected===null||nftSelected===void 0?void 0:nftSelected.tierTresr]}),\".\",/*#__PURE__*/_jsx(\"br\",{}),\"You can burn\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"treasureBoxModal__text--gray\",children:[formatterUS(amountOpenChest),\" $TRESR\"]}),\" \",\"to try to open the Treasure Box again\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"treasureBoxModal__video \".concat(chestStatus&&\"-z-10 relative\"),children:/*#__PURE__*/_jsx(\"video\",{src:chestStatus?\"https://artifactory-nfkey.nyc3.digitaloceanspaces.com/static-space/TreasureBox-Success-LowRes.mp4\":\"https://artifactory-nfkey.nyc3.digitaloceanspaces.com/static-space/TreasureBox-Fail-LowRes.mp4\",autoPlay:true,muted:true,height:580,width:580})}),chestStatus?/*#__PURE__*/_jsxs(\"div\",{className:\"treasureBoxModal__buttons \".concat(isTextShown?\"treasureBoxModal__buttons--visible\":\"\"),children:[/*#__PURE__*/_jsx(MarketplaceButton,{isWhite:true,title:\"Back to Dashboard\",onClick:onCloseModal}),!loaderIsActive&&/*#__PURE__*/_jsx(MarketplaceButton,{isBlue:true,title:\"Open Another\",onClick:onTryAgain})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"treasureBoxModal__buttons \".concat(isTextShown?\"treasureBoxModal__buttons--visible\":\"\"),children:[/*#__PURE__*/_jsx(MarketplaceButton,{isWhite:true,title:\"Back to Dashboard\",onClick:onCloseModal}),/*#__PURE__*/_jsx(MarketplaceButton,{isBlue:true,title:\"Try Again \",onClick:onTryAgain})]})]});};export default TreasureBoxModal;","map":{"version":3,"names":["React","useEffect","useState","MarketplaceButton","formatterUS","BASE_REWARD","useMakeNotificationSound","SocialLinkComponent","NFKEY_SOCIALS","useNavigate","useSelector","selectNftSelected","selectLoaderIsActive","Modal","jsx","_jsx","jsxs","_jsxs","TreasureBoxModal","_ref","isOpen","onClose","chestStatus","onTryAgain","amountOpenChest","setIsAnimated","loaderIsActive","nftSelected","_useState","_useState2","_slicedToArray","isTextShown","setIsTextShown","_useState3","_useState4","socials","setSocials","audio","navigate","estPerMonth","staked","tier","tierTresr","onCloseModal","setTimeout","handleClose","isModalOpen","withCrossIcon","isFullModalBg","className","children","concat","tokenId","map","item","key","isEditMode","link","index","isNFTPage","src","autoPlay","muted","height","width","isWhite","title","onClick","isBlue"],"sources":["/Users/apple/Documents/treasure/src/components/common/DashboardModals/TreasureBoxModal/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./style.scss\";\nimport MarketplaceButton from \"../../MarketplaceButton\";\nimport { formatterUS } from \"../../../../utils\";\nimport { BASE_REWARD } from \"../../../../constant/blockchain\";\nimport useMakeNotificationSound from \"../../../../hooks/useMakeSound\";\nimport SocialLinkComponent from \"components/AccountComponent/SocialLinkComponent\";\nimport { NFKEY_SOCIALS } from \"constant/singleCollectionPage\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { selectNftSelected } from \"redux/slice/nftSlice\";\nimport { selectLoaderIsActive } from \"redux/slice/loaderSlice\";\nimport Modal from \"storybook/atom/Modal/modal\";\n\nconst TreasureBoxModal = ({\n  isOpen,\n  onClose,\n  chestStatus,\n  onTryAgain,\n  amountOpenChest,\n  setIsAnimated,\n}) => {\n  const loaderIsActive = useSelector(selectLoaderIsActive);\n  const nftSelected = useSelector(selectNftSelected);\n  const [isTextShown, setIsTextShown] = useState(false);\n  const [socials, setSocials] = useState([]);\n  const audio = useMakeNotificationSound();\n  const navigate = useNavigate();\n\n  const estPerMonth = nftSelected?.staked\n    ? +nftSelected?.tier * nftSelected?.tierTresr * BASE_REWARD * 30\n    : 0;\n\n  const onCloseModal = () => {\n    onClose();\n    setIsTextShown(false);\n    setIsAnimated(false);\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(() => setIsTextShown(true), 6000);\n      chestStatus\n        ? audio(\"audio/ModalVideoGame-Success.mp3\")\n        : audio(\"audio/ModalVideoGame-Failure.mp3\");\n    } else setIsTextShown(false);\n    setSocials(NFKEY_SOCIALS);\n  }, [isOpen]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (chestStatus === null) return null;\n  return (\n    <Modal\n      handleClose={onCloseModal}\n      isModalOpen={isOpen}\n      withCrossIcon\n      isFullModalBg\n      className=\"max-w-[580px] max-h-[580px] px-[0px] py-[0px]\"\n    >\n      {chestStatus ? (\n        <div\n          className={`treasureBoxModal__success ${\n            isTextShown ? \"treasureBoxModal__visible\" : \"\"\n          }`}\n        >\n          <p className=\"modal__title treasureBoxModal__title\">Success!</p>\n          <p className=\"modal__text treasureBoxModal__title\">\n            Your Treasure Tier for\n            <span className=\"modal__text--blue\">\n              {\" \"}\n              Founder's Key #{nftSelected?.tokenId}{\" \"}\n            </span>\n            is now{\" \"}\n            <span className=\"treasureBoxModal__text--yellow\">\n              Tier {nftSelected?.tierTresr}\n            </span>\n            !<br />\n            Now your rewards are{\" \"}\n            <span className=\"treasureBoxModal__text--yellow\">\n              {estPerMonth} $TRESR/month\n            </span>\n          </p>\n          <p className=\"modal__text treasureBoxModal__title\">\n            Remember: Your Treasure Tier is temporary and must be updated before\n            the timer runs out.\n          </p>\n          <div className=\"treasureBoxModal__socials mt-[180px]\">\n            {socials?.map((item, key) => (\n              <SocialLinkComponent\n                key={key}\n                isEditMode={false}\n                link={item?.link}\n                index={key}\n                isNFTPage\n              />\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div\n          className={`treasureBoxModal__failure ${\n            isTextShown ? \"treasureBoxModal__visible\" : \"\"\n          }`}\n        >\n          <p className=\"modal__title treasureBoxModal__title\">Oooops!</p>\n          <p className=\"modal__text treasureBoxModal__title\">\n            The box didn't open. Your Treasure Tier will remain at{\" \"}\n            <span className=\"treasureBoxModal__text--gray\">\n              Tier {nftSelected?.tierTresr}\n            </span>\n            .<br />\n            You can burn{\" \"}\n            <span className=\"treasureBoxModal__text--gray\">\n              {formatterUS(amountOpenChest)} $TRESR\n            </span>{\" \"}\n            to try to open the Treasure Box again\n          </p>\n        </div>\n      )}\n\n      <div\n        className={`treasureBoxModal__video ${chestStatus && \"-z-10 relative\"}`}\n      >\n        <video\n          src={\n            chestStatus\n              ? \"https://artifactory-nfkey.nyc3.digitaloceanspaces.com/static-space/TreasureBox-Success-LowRes.mp4\"\n              : \"https://artifactory-nfkey.nyc3.digitaloceanspaces.com/static-space/TreasureBox-Fail-LowRes.mp4\"\n          }\n          autoPlay\n          muted\n          height={580}\n          width={580}\n        />\n      </div>\n\n      {chestStatus ? (\n        <div\n          className={`treasureBoxModal__buttons ${\n            isTextShown ? \"treasureBoxModal__buttons--visible\" : \"\"\n          }`}\n        >\n          <MarketplaceButton\n            isWhite\n            title={\"Back to Dashboard\"}\n            onClick={onCloseModal}\n          />\n          {!loaderIsActive && (\n            <MarketplaceButton\n              isBlue\n              title={\"Open Another\"}\n              onClick={onTryAgain}\n            />\n          )}\n        </div>\n      ) : (\n        <div\n          className={`treasureBoxModal__buttons ${\n            isTextShown ? \"treasureBoxModal__buttons--visible\" : \"\"\n          }`}\n        >\n          <MarketplaceButton\n            isWhite\n            title={\"Back to Dashboard\"}\n            onClick={onCloseModal}\n          />\n          <MarketplaceButton isBlue title={\"Try Again \"} onClick={onTryAgain} />\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default TreasureBoxModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}