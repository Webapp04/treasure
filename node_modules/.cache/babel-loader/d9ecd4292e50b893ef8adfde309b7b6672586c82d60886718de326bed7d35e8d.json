{"ast":null,"code":"import _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { UnixFS } from 'ipfs-unixfs';\nimport persist from '../utils/persist.js';\nimport { encode, prepare } from '@ipld/dag-pb';\n\n/**\n * @typedef {import('../types').Directory} Directory\n */\n\n/**\n * @type {import('../types').UnixFSV1DagBuilder<Directory>}\n */\nvar dirBuilder = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(item, blockstore, options) {\n    var unixfs, buffer, cid, path;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          unixfs = new UnixFS({\n            type: 'directory',\n            mtime: item.mtime,\n            mode: item.mode\n          });\n          buffer = encode(prepare({\n            Data: unixfs.marshal()\n          }));\n          _context.next = 4;\n          return persist(buffer, blockstore, options);\n        case 4:\n          cid = _context.sent;\n          path = item.path;\n          return _context.abrupt(\"return\", {\n            cid: cid,\n            path: path,\n            unixfs: unixfs,\n            size: buffer.length\n          });\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function dirBuilder(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default dirBuilder;","map":{"version":3,"names":["UnixFS","persist","encode","prepare","dirBuilder","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","item","blockstore","options","unixfs","buffer","cid","path","wrap","_callee$","_context","prev","next","type","mtime","mode","Data","marshal","sent","abrupt","size","length","stop","_x","_x2","_x3","apply","arguments"],"sources":["/Users/apple/Documents/treasure/node_modules/ipfs-unixfs-importer/src/dag-builder/dir.js"],"sourcesContent":["import { UnixFS } from 'ipfs-unixfs'\nimport persist from '../utils/persist.js'\nimport { encode, prepare } from '@ipld/dag-pb'\n\n/**\n * @typedef {import('../types').Directory} Directory\n */\n\n/**\n * @type {import('../types').UnixFSV1DagBuilder<Directory>}\n */\nconst dirBuilder = async (item, blockstore, options) => {\n  const unixfs = new UnixFS({\n    type: 'directory',\n    mtime: item.mtime,\n    mode: item.mode\n  })\n\n  const buffer = encode(prepare({ Data: unixfs.marshal() }))\n  const cid = await persist(buffer, blockstore, options)\n  const path = item.path\n\n  return {\n    cid,\n    path,\n    unixfs,\n    size: buffer.length\n  }\n}\n\nexport default dirBuilder\n"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,aAAa;AACpC,OAAOC,OAAO,MAAM,qBAAqB;AACzC,SAASC,MAAM,EAAEC,OAAO,QAAQ,cAAc;;AAE9C;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAMC,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,IAAI,EAAEC,UAAU,EAAEC,OAAO;IAAA,IAAAC,MAAA,EAAAC,MAAA,EAAAC,GAAA,EAAAC,IAAA;IAAA,OAAAT,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAC3CR,MAAM,GAAG,IAAIb,MAAM,CAAC;YACxBsB,IAAI,EAAE,WAAW;YACjBC,KAAK,EAAEb,IAAI,CAACa,KAAK;YACjBC,IAAI,EAAEd,IAAI,CAACc;UACb,CAAC,CAAC;UAEIV,MAAM,GAAGZ,MAAM,CAACC,OAAO,CAAC;YAAEsB,IAAI,EAAEZ,MAAM,CAACa,OAAO,CAAC;UAAE,CAAC,CAAC,CAAC;UAAAP,QAAA,CAAAE,IAAA;UAAA,OACxCpB,OAAO,CAACa,MAAM,EAAEH,UAAU,EAAEC,OAAO,CAAC;QAAA;UAAhDG,GAAG,GAAAI,QAAA,CAAAQ,IAAA;UACHX,IAAI,GAAGN,IAAI,CAACM,IAAI;UAAA,OAAAG,QAAA,CAAAS,MAAA,WAEf;YACLb,GAAG,EAAHA,GAAG;YACHC,IAAI,EAAJA,IAAI;YACJH,MAAM,EAANA,MAAM;YACNgB,IAAI,EAAEf,MAAM,CAACgB;UACf,CAAC;QAAA;QAAA;UAAA,OAAAX,QAAA,CAAAY,IAAA;MAAA;IAAA,GAAAtB,OAAA;EAAA,CACF;EAAA,gBAjBKL,UAAUA,CAAA4B,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAA7B,IAAA,CAAA8B,KAAA,OAAAC,SAAA;EAAA;AAAA,GAiBf;AAED,eAAehC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}