{"ast":null,"code":"import _objectSpread from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";import{localStorageGet}from\"../utils/localStorage\";var Base=/*#__PURE__*/function(){function Base(){_classCallCheck(this,Base);var BASE_URL=process.env.REACT_APP_API||window.location.origin;this.url=BASE_URL+\"/api\";}_createClass(Base,[{key:\"getToken\",value:function getToken(){return localStorageGet(\"token\",\"\");}},{key:\"getAuthHeader\",value:function getAuthHeader(){return{headers:{Authorization:\"Bearer \".concat(this.getToken())}};}},{key:\"getUrl\",value:function getUrl(path){return\"\".concat(this.url,\"/\").concat(path);}},{key:\"errorCatch\",value:function errorCatch(error){var _error$response,_error$response2,_error$response2$data;var code=error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status;var message=error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message;switch(code){case 401:// localStorageRemove(\"token\");\n// window.location.href = \"/login\";\nreturn{status:false,message:message};default:return{status:false,message:message};}}},{key:\"get\",value:function get(url,config){return axios.get(this.getUrl(url),_objectSpread(_objectSpread({},this.getAuthHeader()),config)).then(function(res){return res.data;}).catch(this.errorCatch);}},{key:\"post\",value:function post(url,data,config){return axios.post(this.getUrl(url),data,_objectSpread(_objectSpread({},this.getAuthHeader()),config)).then(function(res){return res.data;}).catch(function(error){return{status:false,message:error};});}},{key:\"put\",value:function put(url,data,config){return axios.put(this.getUrl(url),data,_objectSpread(_objectSpread({},this.getAuthHeader()),config)).then(function(res){return res.data;}).catch(function(error){return{status:false,message:error};});}},{key:\"delete\",value:function _delete(url,data,config){return axios.delete(this.getUrl(url),_objectSpread(_objectSpread({},this.getAuthHeader()),config)).then(function(res){return res.data;}).catch(function(error){return{status:false,message:error};});}},{key:\"postThirdParty\",value:function postThirdParty(url,data,config){return axios.post(url,data,config).then(function(res){return res.data;}).catch(function(error){return{status:false,message:error};});}},{key:\"getThirdParty\",value:function getThirdParty(url,data,config){return axios.get(url,data,config).then(function(res){return res.data;}).catch(function(error){return{status:false,message:error};});}}]);return Base;}();export{Base as default};","map":{"version":3,"names":["axios","localStorageGet","Base","_classCallCheck","BASE_URL","process","env","REACT_APP_API","window","location","origin","url","_createClass","key","value","getToken","getAuthHeader","headers","Authorization","concat","getUrl","path","errorCatch","error","_error$response","_error$response2","_error$response2$data","code","response","status","message","data","get","config","_objectSpread","then","res","catch","post","put","_delete","delete","postThirdParty","getThirdParty","default"],"sources":["/Users/apple/Documents/treasure/src/api/Base.js"],"sourcesContent":["import axios from \"axios\";\nimport {localStorageGet} from \"../utils/localStorage\";\n\n\nexport default class Base {\n    constructor() {\n        const BASE_URL = process.env.REACT_APP_API || window.location.origin;\n        this.url = BASE_URL + \"/api\";\n    }\n\n    getToken() {\n        return localStorageGet(\"token\", \"\");\n    }\n\n    getAuthHeader() {\n        return {headers: {Authorization: `Bearer ${this.getToken()}`}};\n    }\n\n    getUrl(path) {\n        return `${this.url}/${path}`;\n    }\n\n    errorCatch(error) {\n        const code = error?.response?.status;\n        const message = error?.response?.data?.message;\n\n        switch (code) {\n            case 401:\n                // localStorageRemove(\"token\");\n                // window.location.href = \"/login\";\n                return {status: false, message};\n            default:\n                return {status: false, message};\n        }\n    }\n\n    get(url, config) {\n        return axios\n            .get(this.getUrl(url), {...this.getAuthHeader(), ...config})\n            .then((res) => res.data)\n            .catch(this.errorCatch);\n    }\n\n    post(url, data, config) {\n        return axios\n            .post(this.getUrl(url), data, {...this.getAuthHeader(), ...config})\n            .then((res) => res.data)\n            .catch((error) => ({status: false, message: error}));\n    }\n\n    put(url, data, config) {\n        return axios\n            .put(this.getUrl(url), data, {...this.getAuthHeader(), ...config})\n            .then((res) => res.data)\n            .catch((error) => ({status: false, message: error}));\n    }\n\n    delete(url, data, config) {\n        return axios\n            .delete(this.getUrl(url), {...this.getAuthHeader(), ...config})\n            .then((res) => res.data)\n            .catch((error) => ({status: false, message: error}));\n    }\n\n    postThirdParty(url, data, config) {\n        return axios\n            .post(url, data, config)\n            .then((res) => res.data)\n            .catch((error) => ({status: false, message: error}));\n    }\n\n    getThirdParty(url, data, config) {\n        return axios\n            .get(url, data, config)\n            .then((res) => res.data)\n            .catch((error) => ({status: false, message: error}));\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}