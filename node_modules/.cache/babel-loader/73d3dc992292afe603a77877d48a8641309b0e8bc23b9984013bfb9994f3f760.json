{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import\"react-toastify/dist/ReactToastify.css\";import\"../style.scss\";import useHandleAuth from\"../../../hooks/auth/useHandleAuth\";import useHandleLoader from\"../../../hooks/loader/useHandleLoader\";import useHandleModal from\"../../../hooks/dom/useHandleModal\";import WalletConnectModal from\"../../common/Modals/WalletConnectModal\";import{useEffect}from\"react\";import{useWeb3React}from\"@web3-react/core\";import{walletconnect}from\"../../../utils/connectors\";import ConnectWallets from\"storybook/molecule/ConnectWallet/connectWallet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ConnectWallet(_ref){var setIsAnimated=_ref.setIsAnimated,isLoading=_ref.isLoading,setIsLoading=_ref.setIsLoading,setIsLoadedList=_ref.setIsLoadedList,isNotConnected=_ref.isNotConnected,isMobile=_ref.isMobile;var handleAuth=useHandleAuth();var handleLoader=useHandleLoader();var handleWalletConnectModal=useHandleModal();var context=useWeb3React();var activate=context.activate,deactivate=context.deactivate;var onConnectWallet=function onConnectWallet(){return handleLoader.loaderWrapper(handleAuth.login,2);};var handleWalletConnect=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return activate(walletconnect,function(error){console.warn(error===null||error===void 0?void 0:error.message);},true);case 2:case\"end\":return _context.stop();}},_callee);}));return function handleWalletConnect(){return _ref2.apply(this,arguments);};}();var openConnectWalletModal=function openConnectWalletModal(){handleWalletConnectModal.open();};var onCloseWalletConnectModal=function onCloseWalletConnectModal(){handleWalletConnectModal.close();setIsAnimated(false);setIsLoading(false);setIsLoadedList(false);};useEffect(function(){var closeBtn=document.querySelector(\".walletconnect-modal__close__wrapper\");if(closeBtn){closeBtn.addEventListener(\"click\",function(){deactivate();localStorage.removeItem(\"isWalletConnected\");});}},[document.querySelector(\".walletconnect-modal__close__wrapper\")]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"homePage__info\",children:[/*#__PURE__*/_jsx(ConnectWallets,{isLoading:isLoading,isMobile:isMobile,isNotConnected:isNotConnected,openConnectWalletModal:openConnectWalletModal}),handleWalletConnectModal.isActive&&/*#__PURE__*/_jsx(WalletConnectModal,{isOpen:handleWalletConnectModal.isActive,onClose:onCloseWalletConnectModal,connectMetamask:onConnectWallet,connectWalletConnect:handleWalletConnect})]});}","map":{"version":3,"names":["useHandleAuth","useHandleLoader","useHandleModal","WalletConnectModal","useEffect","useWeb3React","walletconnect","ConnectWallets","jsx","_jsx","jsxs","_jsxs","ConnectWallet","_ref","setIsAnimated","isLoading","setIsLoading","setIsLoadedList","isNotConnected","isMobile","handleAuth","handleLoader","handleWalletConnectModal","context","activate","deactivate","onConnectWallet","loaderWrapper","login","handleWalletConnect","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","error","console","warn","message","stop","apply","arguments","openConnectWalletModal","open","onCloseWalletConnectModal","close","closeBtn","document","querySelector","addEventListener","localStorage","removeItem","className","children","isActive","isOpen","onClose","connectMetamask","connectWalletConnect"],"sources":["/Users/apple/Documents/treasure/src/components/HomePage/ConnectWallet/index.js"],"sourcesContent":["import \"react-toastify/dist/ReactToastify.css\";\nimport \"../style.scss\";\nimport useHandleAuth from \"../../../hooks/auth/useHandleAuth\";\nimport useHandleLoader from \"../../../hooks/loader/useHandleLoader\";\nimport useHandleModal from \"../../../hooks/dom/useHandleModal\";\nimport WalletConnectModal from \"../../common/Modals/WalletConnectModal\";\nimport { useEffect } from \"react\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { walletconnect } from \"../../../utils/connectors\";\nimport ConnectWallets from \"storybook/molecule/ConnectWallet/connectWallet\";\n\nexport default function ConnectWallet({\n  setIsAnimated,\n  isLoading,\n  setIsLoading,\n  setIsLoadedList,\n  isNotConnected,\n  isMobile,\n}) {\n  const handleAuth = useHandleAuth();\n  const handleLoader = useHandleLoader();\n  const handleWalletConnectModal = useHandleModal();\n\n  const context = useWeb3React();\n  const { activate, deactivate } = context;\n\n  const onConnectWallet = () => handleLoader.loaderWrapper(handleAuth.login, 2);\n\n  const handleWalletConnect = async () => {\n    await activate(\n      walletconnect,\n      (error) => {\n        console.warn(error?.message);\n      },\n      true\n    );\n  };\n\n  const openConnectWalletModal = () => {\n    handleWalletConnectModal.open();\n  };\n\n  const onCloseWalletConnectModal = () => {\n    handleWalletConnectModal.close();\n    setIsAnimated(false);\n    setIsLoading(false);\n    setIsLoadedList(false);\n  };\n\n  useEffect(() => {\n    let closeBtn = document.querySelector(\n      \".walletconnect-modal__close__wrapper\"\n    );\n    if (closeBtn) {\n      closeBtn.addEventListener(\"click\", () => {\n        deactivate();\n        localStorage.removeItem(\"isWalletConnected\");\n      });\n    }\n  }, [document.querySelector(\".walletconnect-modal__close__wrapper\")]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div className=\"homePage__info\">\n      <ConnectWallets\n        isLoading={isLoading}\n        isMobile={isMobile}\n        isNotConnected={isNotConnected}\n        openConnectWalletModal={openConnectWalletModal}\n      />\n      {handleWalletConnectModal.isActive && (\n        <WalletConnectModal\n          isOpen={handleWalletConnectModal.isActive}\n          onClose={onCloseWalletConnectModal}\n          connectMetamask={onConnectWallet}\n          connectWalletConnect={handleWalletConnect}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":"0PAAA,MAAO,uCAAuC,CAC9C,MAAO,eAAe,CACtB,MAAO,CAAAA,aAAa,KAAM,mCAAmC,CAC7D,MAAO,CAAAC,eAAe,KAAM,uCAAuC,CACnE,MAAO,CAAAC,cAAc,KAAM,mCAAmC,CAC9D,MAAO,CAAAC,kBAAkB,KAAM,wCAAwC,CACvE,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,YAAY,KAAQ,kBAAkB,CAC/C,OAASC,aAAa,KAAQ,2BAA2B,CACzD,MAAO,CAAAC,cAAc,KAAM,gDAAgD,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5E,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAOlC,IAND,CAAAC,aAAa,CAAAD,IAAA,CAAbC,aAAa,CACbC,SAAS,CAAAF,IAAA,CAATE,SAAS,CACTC,YAAY,CAAAH,IAAA,CAAZG,YAAY,CACZC,eAAe,CAAAJ,IAAA,CAAfI,eAAe,CACfC,cAAc,CAAAL,IAAA,CAAdK,cAAc,CACdC,QAAQ,CAAAN,IAAA,CAARM,QAAQ,CAER,GAAM,CAAAC,UAAU,CAAGpB,aAAa,CAAC,CAAC,CAClC,GAAM,CAAAqB,YAAY,CAAGpB,eAAe,CAAC,CAAC,CACtC,GAAM,CAAAqB,wBAAwB,CAAGpB,cAAc,CAAC,CAAC,CAEjD,GAAM,CAAAqB,OAAO,CAAGlB,YAAY,CAAC,CAAC,CAC9B,GAAQ,CAAAmB,QAAQ,CAAiBD,OAAO,CAAhCC,QAAQ,CAAEC,UAAU,CAAKF,OAAO,CAAtBE,UAAU,CAE5B,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,QAAS,CAAAL,YAAY,CAACM,aAAa,CAACP,UAAU,CAACQ,KAAK,CAAE,CAAC,CAAC,GAE7E,GAAM,CAAAC,mBAAmB,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACpB,CAAAf,QAAQ,CACZlB,aAAa,CACb,SAACkC,KAAK,CAAK,CACTC,OAAO,CAACC,IAAI,CAACF,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEG,OAAO,CAAC,CAC9B,CAAC,CACD,IACF,CAAC,yBAAAN,QAAA,CAAAO,IAAA,MAAAV,OAAA,GACF,kBARK,CAAAL,mBAAmBA,CAAA,SAAAC,KAAA,CAAAe,KAAA,MAAAC,SAAA,OAQxB,CAED,GAAM,CAAAC,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAA,CAAS,CACnCzB,wBAAwB,CAAC0B,IAAI,CAAC,CAAC,CACjC,CAAC,CAED,GAAM,CAAAC,yBAAyB,CAAG,QAA5B,CAAAA,yBAAyBA,CAAA,CAAS,CACtC3B,wBAAwB,CAAC4B,KAAK,CAAC,CAAC,CAChCpC,aAAa,CAAC,KAAK,CAAC,CACpBE,YAAY,CAAC,KAAK,CAAC,CACnBC,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,CAEDb,SAAS,CAAC,UAAM,CACd,GAAI,CAAA+C,QAAQ,CAAGC,QAAQ,CAACC,aAAa,CACnC,sCACF,CAAC,CACD,GAAIF,QAAQ,CAAE,CACZA,QAAQ,CAACG,gBAAgB,CAAC,OAAO,CAAE,UAAM,CACvC7B,UAAU,CAAC,CAAC,CACZ8B,YAAY,CAACC,UAAU,CAAC,mBAAmB,CAAC,CAC9C,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACJ,QAAQ,CAACC,aAAa,CAAC,sCAAsC,CAAC,CAAC,CAAC,CAAE;AAEtE,mBACE1C,KAAA,QAAK8C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjD,IAAA,CAACF,cAAc,EACbQ,SAAS,CAAEA,SAAU,CACrBI,QAAQ,CAAEA,QAAS,CACnBD,cAAc,CAAEA,cAAe,CAC/B6B,sBAAsB,CAAEA,sBAAuB,CAChD,CAAC,CACDzB,wBAAwB,CAACqC,QAAQ,eAChClD,IAAA,CAACN,kBAAkB,EACjByD,MAAM,CAAEtC,wBAAwB,CAACqC,QAAS,CAC1CE,OAAO,CAAEZ,yBAA0B,CACnCa,eAAe,CAAEpC,eAAgB,CACjCqC,oBAAoB,CAAElC,mBAAoB,CAC3C,CACF,EACE,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}