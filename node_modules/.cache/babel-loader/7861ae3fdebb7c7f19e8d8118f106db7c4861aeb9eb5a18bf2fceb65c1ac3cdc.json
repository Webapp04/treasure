{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _awaitAsyncGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js\";\nimport _wrapAsyncGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js\";\nimport _asyncIterator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncIterator.js\";\nimport { BaseDatastore } from './base.js';\nimport * as Errors from './errors.js';\nimport { logger } from '@libp2p/logger';\nimport { pushable } from 'it-pushable';\nimport drain from 'it-drain';\nvar log = logger('datastore:core:tiered');\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * A datastore that can combine multiple stores. Puts and deletes\n * will write through to all datastores. Has and get will\n * try each store sequentially. Query will always try the\n * last one first.\n *\n */\nexport var TieredDatastore = /*#__PURE__*/function (_BaseDatastore) {\n  _inherits(TieredDatastore, _BaseDatastore);\n  var _super = _createSuper(TieredDatastore);\n  /**\n   * @param {Datastore[]} stores\n   */\n  function TieredDatastore(stores) {\n    var _this3;\n    _classCallCheck(this, TieredDatastore);\n    _this3 = _super.call(this);\n    _this3.stores = stores.slice();\n    return _this3;\n  }\n  _createClass(TieredDatastore, [{\n    key: \"open\",\n    value: function () {\n      var _open = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return Promise.all(this.stores.map(function (store) {\n                return store.open();\n              }));\n            case 3:\n              _context.next = 8;\n              break;\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              throw Errors.dbOpenFailedError(_context.t0);\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[0, 5]]);\n      }));\n      function open() {\n        return _open.apply(this, arguments);\n      }\n      return open;\n    }()\n    /**\n     * @param {Key} key\n     * @param {Uint8Array} value\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"put\",\n    value: function () {\n      var _put = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(key, value, options) {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return Promise.all(this.stores.map(function (store) {\n                return store.put(key, value, options);\n              }));\n            case 3:\n              _context2.next = 8;\n              break;\n            case 5:\n              _context2.prev = 5;\n              _context2.t0 = _context2[\"catch\"](0);\n              throw Errors.dbWriteFailedError(_context2.t0);\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[0, 5]]);\n      }));\n      function put(_x, _x2, _x3) {\n        return _put.apply(this, arguments);\n      }\n      return put;\n    }()\n    /**\n     * @param {Key} key\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(key, options) {\n        var _iterator3, _step3, store, res;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _iterator3 = _createForOfIteratorHelper(this.stores);\n              _context3.prev = 1;\n              _iterator3.s();\n            case 3:\n              if ((_step3 = _iterator3.n()).done) {\n                _context3.next = 18;\n                break;\n              }\n              store = _step3.value;\n              _context3.prev = 5;\n              _context3.next = 8;\n              return store.get(key, options);\n            case 8:\n              res = _context3.sent;\n              if (!res) {\n                _context3.next = 11;\n                break;\n              }\n              return _context3.abrupt(\"return\", res);\n            case 11:\n              _context3.next = 16;\n              break;\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](5);\n              log.error(_context3.t0);\n            case 16:\n              _context3.next = 3;\n              break;\n            case 18:\n              _context3.next = 23;\n              break;\n            case 20:\n              _context3.prev = 20;\n              _context3.t1 = _context3[\"catch\"](1);\n              _iterator3.e(_context3.t1);\n            case 23:\n              _context3.prev = 23;\n              _iterator3.f();\n              return _context3.finish(23);\n            case 26:\n              throw Errors.notFoundError();\n            case 27:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[1, 20, 23, 26], [5, 13]]);\n      }));\n      function get(_x4, _x5) {\n        return _get.apply(this, arguments);\n      }\n      return get;\n    }()\n    /**\n     * @param {Key} key\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"has\",\n    value: function () {\n      var _has = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(key, options) {\n        var _iterator4, _step4, s;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _iterator4 = _createForOfIteratorHelper(this.stores);\n              _context4.prev = 1;\n              _iterator4.s();\n            case 3:\n              if ((_step4 = _iterator4.n()).done) {\n                _context4.next = 11;\n                break;\n              }\n              s = _step4.value;\n              _context4.next = 7;\n              return s.has(key, options);\n            case 7:\n              if (!_context4.sent) {\n                _context4.next = 9;\n                break;\n              }\n              return _context4.abrupt(\"return\", true);\n            case 9:\n              _context4.next = 3;\n              break;\n            case 11:\n              _context4.next = 16;\n              break;\n            case 13:\n              _context4.prev = 13;\n              _context4.t0 = _context4[\"catch\"](1);\n              _iterator4.e(_context4.t0);\n            case 16:\n              _context4.prev = 16;\n              _iterator4.f();\n              return _context4.finish(16);\n            case 19:\n              return _context4.abrupt(\"return\", false);\n            case 20:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this, [[1, 13, 16, 19]]);\n      }));\n      function has(_x6, _x7) {\n        return _has.apply(this, arguments);\n      }\n      return has;\n    }()\n    /**\n     * @param {Key} key\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(key, options) {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return Promise.all(this.stores.map(function (store) {\n                return store.delete(key, options);\n              }));\n            case 3:\n              _context5.next = 8;\n              break;\n            case 5:\n              _context5.prev = 5;\n              _context5.t0 = _context5[\"catch\"](0);\n              throw Errors.dbDeleteFailedError(_context5.t0);\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this, [[0, 5]]);\n      }));\n      function _delete(_x8, _x9) {\n        return _delete2.apply(this, arguments);\n      }\n      return _delete;\n    }()\n    /**\n     * @param {AwaitIterable<Pair>} source\n     * @param {Options} [options]\n     * @returns {AsyncIterable<Pair>}\n     */\n  }, {\n    key: \"putMany\",\n    value: function putMany(source) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var error, pushables, _iteratorAbruptCompletion, _didIteratorError, _iteratorError, _loop, _iterator, _step;\n        return _regeneratorRuntime().wrap(function _callee6$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              pushables = _this.stores.map(function (store) {\n                var source = pushable({\n                  objectMode: true\n                });\n                drain(store.putMany(source, options)).catch(function (err) {\n                  // store threw while putting, make sure we bubble the error up\n                  error = err;\n                });\n                return source;\n              });\n              _context7.prev = 1;\n              _iteratorAbruptCompletion = false;\n              _didIteratorError = false;\n              _context7.prev = 4;\n              _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n                var pair;\n                return _regeneratorRuntime().wrap(function _loop$(_context6) {\n                  while (1) switch (_context6.prev = _context6.next) {\n                    case 0:\n                      pair = _step.value;\n                      if (!error) {\n                        _context6.next = 3;\n                        break;\n                      }\n                      throw error;\n                    case 3:\n                      pushables.forEach(function (p) {\n                        return p.push(pair);\n                      });\n                      _context6.next = 6;\n                      return pair;\n                    case 6:\n                    case \"end\":\n                      return _context6.stop();\n                  }\n                }, _loop);\n              });\n              _iterator = _asyncIterator(source);\n            case 7:\n              _context7.next = 9;\n              return _awaitAsyncGenerator(_iterator.next());\n            case 9:\n              if (!(_iteratorAbruptCompletion = !(_step = _context7.sent).done)) {\n                _context7.next = 14;\n                break;\n              }\n              return _context7.delegateYield(_loop(), \"t0\", 11);\n            case 11:\n              _iteratorAbruptCompletion = false;\n              _context7.next = 7;\n              break;\n            case 14:\n              _context7.next = 20;\n              break;\n            case 16:\n              _context7.prev = 16;\n              _context7.t1 = _context7[\"catch\"](4);\n              _didIteratorError = true;\n              _iteratorError = _context7.t1;\n            case 20:\n              _context7.prev = 20;\n              _context7.prev = 21;\n              if (!(_iteratorAbruptCompletion && _iterator.return != null)) {\n                _context7.next = 25;\n                break;\n              }\n              _context7.next = 25;\n              return _awaitAsyncGenerator(_iterator.return());\n            case 25:\n              _context7.prev = 25;\n              if (!_didIteratorError) {\n                _context7.next = 28;\n                break;\n              }\n              throw _iteratorError;\n            case 28:\n              return _context7.finish(25);\n            case 29:\n              return _context7.finish(20);\n            case 30:\n              _context7.prev = 30;\n              pushables.forEach(function (p) {\n                return p.end();\n              });\n              return _context7.finish(30);\n            case 33:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee6, null, [[1,, 30, 33], [4, 16, 20, 30], [21,, 25, 29]]);\n      }))();\n    }\n\n    /**\n     * @param {AwaitIterable<Key>} source\n     * @param {Options} [options]\n     * @returns {AsyncIterable<Key>}\n     */\n  }, {\n    key: \"deleteMany\",\n    value: function deleteMany(source) {\n      var _this2 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var error, pushables, _iteratorAbruptCompletion2, _didIteratorError2, _iteratorError2, _loop2, _iterator2, _step2;\n        return _regeneratorRuntime().wrap(function _callee7$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              pushables = _this2.stores.map(function (store) {\n                var source = pushable({\n                  objectMode: true\n                });\n                drain(store.deleteMany(source, options)).catch(function (err) {\n                  // store threw while deleting, make sure we bubble the error up\n                  error = err;\n                });\n                return source;\n              });\n              _context9.prev = 1;\n              _iteratorAbruptCompletion2 = false;\n              _didIteratorError2 = false;\n              _context9.prev = 4;\n              _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2() {\n                var key;\n                return _regeneratorRuntime().wrap(function _loop2$(_context8) {\n                  while (1) switch (_context8.prev = _context8.next) {\n                    case 0:\n                      key = _step2.value;\n                      if (!error) {\n                        _context8.next = 3;\n                        break;\n                      }\n                      throw error;\n                    case 3:\n                      pushables.forEach(function (p) {\n                        return p.push(key);\n                      });\n                      _context8.next = 6;\n                      return key;\n                    case 6:\n                    case \"end\":\n                      return _context8.stop();\n                  }\n                }, _loop2);\n              });\n              _iterator2 = _asyncIterator(source);\n            case 7:\n              _context9.next = 9;\n              return _awaitAsyncGenerator(_iterator2.next());\n            case 9:\n              if (!(_iteratorAbruptCompletion2 = !(_step2 = _context9.sent).done)) {\n                _context9.next = 14;\n                break;\n              }\n              return _context9.delegateYield(_loop2(), \"t0\", 11);\n            case 11:\n              _iteratorAbruptCompletion2 = false;\n              _context9.next = 7;\n              break;\n            case 14:\n              _context9.next = 20;\n              break;\n            case 16:\n              _context9.prev = 16;\n              _context9.t1 = _context9[\"catch\"](4);\n              _didIteratorError2 = true;\n              _iteratorError2 = _context9.t1;\n            case 20:\n              _context9.prev = 20;\n              _context9.prev = 21;\n              if (!(_iteratorAbruptCompletion2 && _iterator2.return != null)) {\n                _context9.next = 25;\n                break;\n              }\n              _context9.next = 25;\n              return _awaitAsyncGenerator(_iterator2.return());\n            case 25:\n              _context9.prev = 25;\n              if (!_didIteratorError2) {\n                _context9.next = 28;\n                break;\n              }\n              throw _iteratorError2;\n            case 28:\n              return _context9.finish(25);\n            case 29:\n              return _context9.finish(20);\n            case 30:\n              _context9.prev = 30;\n              pushables.forEach(function (p) {\n                return p.end();\n              });\n              return _context9.finish(30);\n            case 33:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee7, null, [[1,, 30, 33], [4, 16, 20, 30], [21,, 25, 29]]);\n      }))();\n    }\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        return _regeneratorRuntime().wrap(function _callee8$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return Promise.all(this.stores.map(function (store) {\n                return store.close();\n              }));\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee8, this);\n      }));\n      function close() {\n        return _close.apply(this, arguments);\n      }\n      return close;\n    }()\n    /**\n     * @returns {Batch}\n     */\n  }, {\n    key: \"batch\",\n    value: function batch() {\n      var batches = this.stores.map(function (store) {\n        return store.batch();\n      });\n      return {\n        put: function put(key, value) {\n          batches.forEach(function (b) {\n            return b.put(key, value);\n          });\n        },\n        delete: function _delete(key) {\n          batches.forEach(function (b) {\n            return b.delete(key);\n          });\n        },\n        commit: function () {\n          var _commit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(options) {\n            var _iterator5, _step5, batch;\n            return _regeneratorRuntime().wrap(function _callee9$(_context11) {\n              while (1) switch (_context11.prev = _context11.next) {\n                case 0:\n                  _iterator5 = _createForOfIteratorHelper(batches);\n                  _context11.prev = 1;\n                  _iterator5.s();\n                case 3:\n                  if ((_step5 = _iterator5.n()).done) {\n                    _context11.next = 9;\n                    break;\n                  }\n                  batch = _step5.value;\n                  _context11.next = 7;\n                  return batch.commit(options);\n                case 7:\n                  _context11.next = 3;\n                  break;\n                case 9:\n                  _context11.next = 14;\n                  break;\n                case 11:\n                  _context11.prev = 11;\n                  _context11.t0 = _context11[\"catch\"](1);\n                  _iterator5.e(_context11.t0);\n                case 14:\n                  _context11.prev = 14;\n                  _iterator5.f();\n                  return _context11.finish(14);\n                case 17:\n                case \"end\":\n                  return _context11.stop();\n              }\n            }, _callee9, null, [[1, 11, 14, 17]]);\n          }));\n          function commit(_x10) {\n            return _commit.apply(this, arguments);\n          }\n          return commit;\n        }()\n      };\n    }\n\n    /**\n     * @param {Query} q\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"query\",\n    value: function query(q, options) {\n      return this.stores[this.stores.length - 1].query(q, options);\n    }\n\n    /**\n     * @param {KeyQuery} q\n     * @param {Options} [options]\n     */\n  }, {\n    key: \"queryKeys\",\n    value: function queryKeys(q, options) {\n      return this.stores[this.stores.length - 1].queryKeys(q, options);\n    }\n  }]);\n  return TieredDatastore;\n}(BaseDatastore);","map":{"version":3,"names":["BaseDatastore","Errors","logger","pushable","drain","log","TieredDatastore","_BaseDatastore","_inherits","_super","_createSuper","stores","_this3","_classCallCheck","call","slice","_createClass","key","value","_open","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","Promise","all","map","store","open","t0","dbOpenFailedError","stop","apply","arguments","_put","_callee2","options","_callee2$","_context2","put","dbWriteFailedError","_x","_x2","_x3","_get","_callee3","_iterator3","_step3","res","_callee3$","_context3","_createForOfIteratorHelper","s","n","done","get","sent","abrupt","error","t1","e","f","finish","notFoundError","_x4","_x5","_has","_callee4","_iterator4","_step4","_callee4$","_context4","has","_x6","_x7","_delete2","_callee5","_callee5$","_context5","delete","dbDeleteFailedError","_delete","_x8","_x9","putMany","source","_this","length","undefined","_wrapAsyncGenerator","_callee6","pushables","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_loop","_iterator","_step","_callee6$","_context7","objectMode","catch","err","pair","_loop$","_context6","forEach","p","push","_asyncIterator","_awaitAsyncGenerator","delegateYield","return","end","deleteMany","_this2","_callee7","_iteratorAbruptCompletion2","_didIteratorError2","_iteratorError2","_loop2","_iterator2","_step2","_callee7$","_context9","_loop2$","_context8","_close","_callee8","_callee8$","_context10","close","batch","batches","b","commit","_commit","_callee9","_iterator5","_step5","_callee9$","_context11","_x10","query","q","queryKeys"],"sources":["/Users/apple/Documents/treasure/node_modules/datastore-core/src/tiered.js"],"sourcesContent":["import { BaseDatastore } from './base.js'\nimport * as Errors from './errors.js'\nimport { logger } from '@libp2p/logger'\nimport { pushable } from 'it-pushable'\nimport drain from 'it-drain'\n\nconst log = logger('datastore:core:tiered')\n\n/**\n * @typedef {import('interface-datastore').Datastore} Datastore\n * @typedef {import('interface-datastore').Options} Options\n * @typedef {import('interface-datastore').Batch} Batch\n * @typedef {import('interface-datastore').Query} Query\n * @typedef {import('interface-datastore').KeyQuery} KeyQuery\n * @typedef {import('interface-datastore').Key} Key\n * @typedef {import('interface-datastore').Pair} Pair\n */\n\n/**\n * @template TEntry\n * @typedef {import('interface-store').AwaitIterable<TEntry>} AwaitIterable\n */\n\n/**\n * A datastore that can combine multiple stores. Puts and deletes\n * will write through to all datastores. Has and get will\n * try each store sequentially. Query will always try the\n * last one first.\n *\n */\nexport class TieredDatastore extends BaseDatastore {\n  /**\n   * @param {Datastore[]} stores\n   */\n  constructor (stores) {\n    super()\n\n    this.stores = stores.slice()\n  }\n\n  async open () {\n    try {\n      await Promise.all(this.stores.map((store) => store.open()))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbOpenFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} value\n   * @param {Options} [options]\n   */\n  async put (key, value, options) {\n    try {\n      await Promise.all(this.stores.map(store => store.put(key, value, options)))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbWriteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async get (key, options) {\n    for (const store of this.stores) {\n      try {\n        const res = await store.get(key, options)\n        if (res) return res\n      } catch (err) {\n        log.error(err)\n      }\n    }\n    throw Errors.notFoundError()\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async has (key, options) {\n    for (const s of this.stores) {\n      if (await s.has(key, options)) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Options} [options]\n   */\n  async delete (key, options) {\n    try {\n      await Promise.all(this.stores.map(store => store.delete(key, options)))\n    } catch (/** @type {any} */ err) {\n      throw Errors.dbDeleteFailedError(err)\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Pair>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Pair>}\n   */\n  async * putMany (source, options = {}) {\n    let error\n    const pushables = this.stores.map(store => {\n      const source = pushable({\n        objectMode: true\n      })\n\n      drain(store.putMany(source, options))\n        .catch(err => {\n          // store threw while putting, make sure we bubble the error up\n          error = err\n        })\n\n      return source\n    })\n\n    try {\n      for await (const pair of source) {\n        if (error) {\n          throw error\n        }\n\n        pushables.forEach(p => p.push(pair))\n\n        yield pair\n      }\n    } finally {\n      pushables.forEach(p => p.end())\n    }\n  }\n\n  /**\n   * @param {AwaitIterable<Key>} source\n   * @param {Options} [options]\n   * @returns {AsyncIterable<Key>}\n   */\n  async * deleteMany (source, options = {}) {\n    let error\n    const pushables = this.stores.map(store => {\n      const source = pushable({\n        objectMode: true\n      })\n\n      drain(store.deleteMany(source, options))\n        .catch(err => {\n          // store threw while deleting, make sure we bubble the error up\n          error = err\n        })\n\n      return source\n    })\n\n    try {\n      for await (const key of source) {\n        if (error) {\n          throw error\n        }\n\n        pushables.forEach(p => p.push(key))\n\n        yield key\n      }\n    } finally {\n      pushables.forEach(p => p.end())\n    }\n  }\n\n  async close () {\n    await Promise.all(this.stores.map(store => store.close()))\n  }\n\n  /**\n   * @returns {Batch}\n   */\n  batch () {\n    const batches = this.stores.map(store => store.batch())\n\n    return {\n      put: (key, value) => {\n        batches.forEach(b => b.put(key, value))\n      },\n      delete: (key) => {\n        batches.forEach(b => b.delete(key))\n      },\n      commit: async (options) => {\n        for (const batch of batches) {\n          await batch.commit(options)\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Query} q\n   * @param {Options} [options]\n   */\n  query (q, options) {\n    return this.stores[this.stores.length - 1].query(q, options)\n  }\n\n  /**\n   * @param {KeyQuery} q\n   * @param {Options} [options]\n   */\n  queryKeys (q, options) {\n    return this.stores[this.stores.length - 1].queryKeys(q, options)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}