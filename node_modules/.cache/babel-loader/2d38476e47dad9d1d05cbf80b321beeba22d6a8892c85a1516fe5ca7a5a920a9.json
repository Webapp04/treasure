{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{ALERT_STATUS_FAILURE,ALERT_STATUS_SUCCESS,CLAIM_FOUNDERS_REWARDS_ALERT}from\"constant/alert\";import{useContractDailyBonusRewardsWithSigner}from\"hooks/blockchain/useHandleContracts\";import useHandleNFT from\"hooks/blockchain/useHandleNFT\";import{useDispatch,useSelector}from\"react-redux\";import ACTIONS from\"redux/action\";import{selectNftList,selectNftSelected}from\"redux/slice/nftSlice\";import{selectUser}from\"redux/slice/userSlice\";export default function useClaimAllBase(){var nftSelected=useSelector(selectNftSelected);var nftLists=useSelector(selectNftList);var user=useSelector(selectUser);var dispatch=useDispatch();var handleNFT=useHandleNFT();var handleContractDailyBonusRewardsWithSigner=useContractDailyBonusRewardsWithSigner();var claimAllBase=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _nftLists$filter;var tokenIdList,contractDailyBonusRewardsWithSigner;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(user!==null&&user!==void 0&&user.wallet_id){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:if(nftSelected!==null&&nftSelected!==void 0&&nftSelected.tokenId){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:tokenIdList=nftLists===null||nftLists===void 0?void 0:(_nftLists$filter=nftLists.filter(function(item){return(item===null||item===void 0?void 0:item.staked)==true;}))===null||_nftLists$filter===void 0?void 0:_nftLists$filter.map(function(item){return item.tokenId;});_context2.next=7;return handleContractDailyBonusRewardsWithSigner;case 7:contractDailyBonusRewardsWithSigner=_context2.sent;return _context2.abrupt(\"return\",contractDailyBonusRewardsWithSigner.claimAllBaseReward(tokenIdList).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(tx){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return tx.wait();case 2:ACTIONS.SET_TRANSANCTION_HASH(dispatch,tx===null||tx===void 0?void 0:tx.hash);handleNFT.getRewardsReleased();handleNFT.balanceOfTRESR(user===null||user===void 0?void 0:user.wallet_id);handleNFT.getAVAXBalance(user===null||user===void 0?void 0:user.wallet_id);handleNFT.getPoolAllocation();handleNFT.getPendingAllBaseReward(tokenIdList);ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_SUCCESS,CLAIM_FOUNDERS_REWARDS_ALERT(true));case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){ACTIONS.SET_ALERT(dispatch,true,ALERT_STATUS_FAILURE,CLAIM_FOUNDERS_REWARDS_ALERT(false));return null;}));case 9:case\"end\":return _context2.stop();}},_callee2);}));return function claimAllBase(){return _ref.apply(this,arguments);};}();return{claimAllBase:claimAllBase};}","map":{"version":3,"names":["ALERT_STATUS_FAILURE","ALERT_STATUS_SUCCESS","CLAIM_FOUNDERS_REWARDS_ALERT","useContractDailyBonusRewardsWithSigner","useHandleNFT","useDispatch","useSelector","ACTIONS","selectNftList","selectNftSelected","selectUser","useClaimAllBase","nftSelected","nftLists","user","dispatch","handleNFT","handleContractDailyBonusRewardsWithSigner","claimAllBase","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","_nftLists$filter","tokenIdList","contractDailyBonusRewardsWithSigner","wrap","_callee2$","_context2","prev","next","wallet_id","abrupt","tokenId","filter","item","staked","map","sent","claimAllBaseReward","then","_ref2","_callee","tx","_callee$","_context","wait","SET_TRANSANCTION_HASH","hash","getRewardsReleased","balanceOfTRESR","getAVAXBalance","getPoolAllocation","getPendingAllBaseReward","SET_ALERT","stop","_x","apply","arguments","catch","err"],"sources":["/Users/apple/Documents/treasure/src/hooks/rewards/useClaimAllBase.js"],"sourcesContent":["import {\n  ALERT_STATUS_FAILURE,\n  ALERT_STATUS_SUCCESS,\n  CLAIM_FOUNDERS_REWARDS_ALERT,\n} from \"constant/alert\";\nimport { useContractDailyBonusRewardsWithSigner } from \"hooks/blockchain/useHandleContracts\";\nimport useHandleNFT from \"hooks/blockchain/useHandleNFT\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ACTIONS from \"redux/action\";\nimport { selectNftList, selectNftSelected } from \"redux/slice/nftSlice\";\nimport { selectUser } from \"redux/slice/userSlice\";\n\nexport default function useClaimAllBase() {\n  const nftSelected = useSelector(selectNftSelected);\n  const nftLists = useSelector(selectNftList);\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n  const handleNFT = useHandleNFT();\n  const handleContractDailyBonusRewardsWithSigner =\n    useContractDailyBonusRewardsWithSigner();\n\n  const claimAllBase = async () => {\n    if (!user?.wallet_id) return;\n    if (!nftSelected?.tokenId) return;\n\n    const tokenIdList = nftLists\n      ?.filter((item) => item?.staked == true)\n      ?.map((item) => item.tokenId);\n    const contractDailyBonusRewardsWithSigner =\n      await handleContractDailyBonusRewardsWithSigner;\n    return contractDailyBonusRewardsWithSigner\n      .claimAllBaseReward(tokenIdList)\n      .then(async (tx) => {\n        await tx.wait();\n        ACTIONS.SET_TRANSANCTION_HASH(dispatch, tx?.hash);\n\n        handleNFT.getRewardsReleased();\n        handleNFT.balanceOfTRESR(user?.wallet_id);\n        handleNFT.getAVAXBalance(user?.wallet_id);\n        handleNFT.getPoolAllocation();\n        handleNFT.getPendingAllBaseReward(tokenIdList);\n\n        ACTIONS.SET_ALERT(\n          dispatch,\n          true,\n          ALERT_STATUS_SUCCESS,\n          CLAIM_FOUNDERS_REWARDS_ALERT(true)\n        );\n      })\n      .catch((err) => {\n        ACTIONS.SET_ALERT(\n          dispatch,\n          true,\n          ALERT_STATUS_FAILURE,\n          CLAIM_FOUNDERS_REWARDS_ALERT(false)\n        );\n\n        return null;\n      });\n  };\n  return { claimAllBase };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}