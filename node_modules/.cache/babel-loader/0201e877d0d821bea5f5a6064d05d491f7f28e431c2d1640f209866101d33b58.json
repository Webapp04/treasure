{"ast":null,"code":"import _regeneratorRuntime from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/apple/Documents/treasure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';\n\n/**\n * @typedef {import('ipfs-core-types/src/swarm').AddrsResult} AddrsResult\n */\n\n/**\n * @param {object} config\n * @param {import('../../types').NetworkService} config.network\n */\nexport function createAddrs(_ref) {\n  var network = _ref.network;\n  /**\n   * @type {import('ipfs-core-types/src/swarm').API<{}>[\"addrs\"]}\n   */\n  function addrs() {\n    return _addrs.apply(this, arguments);\n  }\n  function _addrs() {\n    _addrs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var options,\n        peers,\n        _yield$network$use,\n        libp2p,\n        _args = arguments;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n            // eslint-disable-line require-await\n            /** @type {AddrsResult[]} */\n            peers = [];\n            _context.next = 4;\n            return network.use(options);\n          case 4:\n            _yield$network$use = _context.sent;\n            libp2p = _yield$network$use.libp2p;\n            _context.next = 8;\n            return libp2p.peerStore.forEach(function (peer) {\n              peers.push({\n                id: peer.id,\n                addrs: peer.addresses.map(function (mi) {\n                  return mi.multiaddr;\n                })\n              });\n            });\n          case 8:\n            return _context.abrupt(\"return\", peers);\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return _addrs.apply(this, arguments);\n  }\n  return withTimeoutOption(addrs);\n}","map":{"version":3,"names":["withTimeoutOption","createAddrs","_ref","network","addrs","_addrs","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","options","peers","_yield$network$use","libp2p","_args","wrap","_callee$","_context","prev","next","length","undefined","use","sent","peerStore","forEach","peer","push","id","addresses","map","mi","multiaddr","abrupt","stop"],"sources":["/Users/apple/Documents/treasure/node_modules/ipfs-core/src/components/swarm/addrs.js"],"sourcesContent":["import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option'\n\n/**\n * @typedef {import('ipfs-core-types/src/swarm').AddrsResult} AddrsResult\n */\n\n/**\n * @param {object} config\n * @param {import('../../types').NetworkService} config.network\n */\nexport function createAddrs ({ network }) {\n  /**\n   * @type {import('ipfs-core-types/src/swarm').API<{}>[\"addrs\"]}\n   */\n  async function addrs (options = {}) { // eslint-disable-line require-await\n    /** @type {AddrsResult[]} */\n    const peers = []\n    const { libp2p } = await network.use(options)\n\n    await libp2p.peerStore.forEach(peer => {\n      peers.push({\n        id: peer.id,\n        addrs: peer.addresses.map((mi) => mi.multiaddr)\n      })\n    })\n\n    return peers\n  }\n\n  return withTimeoutOption(addrs)\n}\n"],"mappings":";;AAAA,SAASA,iBAAiB,QAAQ,qCAAqC;;AAEvE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAAAC,IAAA,EAAe;EAAA,IAAXC,OAAO,GAAAD,IAAA,CAAPC,OAAO;EACpC;AACF;AACA;EAFE,SAGeC,KAAKA,CAAA;IAAA,OAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAA,SAAAF,OAAA;IAAAA,MAAA,GAAAG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAApB,SAAAC,QAAA;MAAA,IAAAC,OAAA;QAAAC,KAAA;QAAAC,kBAAA;QAAAC,MAAA;QAAAC,KAAA,GAAAT,SAAA;MAAA,OAAAE,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAsBT,OAAO,GAAAI,KAAA,CAAAM,MAAA,QAAAN,KAAA,QAAAO,SAAA,GAAAP,KAAA,MAAG,CAAC,CAAC;YAAI;YACpC;YACMH,KAAK,GAAG,EAAE;YAAAM,QAAA,CAAAE,IAAA;YAAA,OACSlB,OAAO,CAACqB,GAAG,CAACZ,OAAO,CAAC;UAAA;YAAAE,kBAAA,GAAAK,QAAA,CAAAM,IAAA;YAArCV,MAAM,GAAAD,kBAAA,CAANC,MAAM;YAAAI,QAAA,CAAAE,IAAA;YAAA,OAERN,MAAM,CAACW,SAAS,CAACC,OAAO,CAAC,UAAAC,IAAI,EAAI;cACrCf,KAAK,CAACgB,IAAI,CAAC;gBACTC,EAAE,EAAEF,IAAI,CAACE,EAAE;gBACX1B,KAAK,EAAEwB,IAAI,CAACG,SAAS,CAACC,GAAG,CAAC,UAACC,EAAE;kBAAA,OAAKA,EAAE,CAACC,SAAS;gBAAA;cAChD,CAAC,CAAC;YACJ,CAAC,CAAC;UAAA;YAAA,OAAAf,QAAA,CAAAgB,MAAA,WAEKtB,KAAK;UAAA;UAAA;YAAA,OAAAM,QAAA,CAAAiB,IAAA;QAAA;MAAA,GAAAzB,OAAA;IAAA,CACb;IAAA,OAAAN,MAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAED,OAAOP,iBAAiB,CAACI,KAAK,CAAC;AACjC"},"metadata":{},"sourceType":"module","externalDependencies":[]}